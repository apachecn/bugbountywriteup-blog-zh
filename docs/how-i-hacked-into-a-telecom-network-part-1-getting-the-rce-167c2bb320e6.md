# æˆ‘æ˜¯å¦‚ä½•ä¾µå…¥ç”µä¿¡ç½‘ç»œçš„â€”â€”ç¬¬ä¸€éƒ¨åˆ†(è·å¾— RCE)

> åŸæ–‡ï¼š<https://infosecwriteups.com/how-i-hacked-into-a-telecom-network-part-1-getting-the-rce-167c2bb320e6?source=collection_archive---------0----------------------->

> *TLDRï¼›ä¸€å®¶ç”µä¿¡å…¬å¸çš„çº¢é˜Ÿé¡¹ç›®ã€‚åœ¨å…¬å¸çš„ç½‘ç»œç›‘æ§ç³»ç»Ÿ(NMS)ä¸Šè·å¾—äº†ç«‹è¶³ç‚¹ã€‚é€šè¿‡ HTTP éš§é“ä¼ è¾“ SSH çš„åå‘å¤–å£³é—®é¢˜å·²æ’åºã€‚å½“é€šè¿‡ HTTP è·å¾— SSH æ—¶å˜æˆäº†å®Œå…¨å¿è€…ã€‚åœ¨ç½‘ç»œå†…éƒ¨ä»£ç†ä»¥è·å–å†…éƒ¨ç½‘ç»œæ‰«æã€‚ä½¿ç”¨ SS7 åº”ç”¨ç¨‹åºè®¿é—® CDRs å’Œ VLRã€‚*

å¤§å®¶å¥½ï¼Œè¿™æ˜¯æˆ‘åœ¨ Medium ä¸Šçš„ç¬¬ä¸€ç¯‡å¸–å­ï¼Œæˆ‘å¸Œæœ›ä½ ä»¬å–œæ¬¢çœ‹ï¼ç”±äºè¿™äº›ä¿¡æ¯çš„æ•æ„Ÿæ€§ï¼Œæˆ‘ä¸å¾—ä¸ç¼–è¾‘å¾ˆå¤šä¿¡æ¯ã€‚(æˆ‘æå‰é“æ­‰ğŸ˜…)

æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹é“¾æ¥:
[***ç¬¬ 2 éƒ¨åˆ†â€”ç©éš§é“:TCP éš§é“***](https://medium.com/bugbountywriteup/how-i-hacked-into-a-telecom-network-part-2-playing-with-tunnels-tcp-tunneling-b4cef2837938) [***ç¬¬ 3 éƒ¨åˆ†â€”ç©éš§é“:éšå½¢ SSH &åŠ¨æ€ SSH éš§é“***](https://medium.com/bugbountywriteup/how-i-hacked-into-a-telecom-network-part-3-playing-with-tunnels-stealthy-ssh-dynamic-tunnels-5ac26557d0eb) [***ç¬¬ 4 éƒ¨åˆ†â€”è®¿é—® CDRsã€SS7 åº”ç”¨ç¨‹åº& VLRs***](https://medium.com/@TheCyb3rAlpha/how-i-hacked-into-a-telecom-network-part-4-getting-access-to-cdrs-ss7-applications-vlrs-9a8cf95e2648)

# ä»‹ç»

ä¸ä¹…å‰ï¼Œæˆ‘åœ¨ä¸ºä¸€ä¸ªå®¢æˆ·åšçº¢é˜Ÿé¡¹ç›®ã€‚æˆ‘è¢«è¦æ±‚è¿›å…¥ç½‘ç»œå†…éƒ¨ï¼ŒæŸ¥çœ‹ç”µä¿¡ç½‘ç»œçš„é€šè¯æ•°æ®è®°å½•(cdr)ã€‚ä¸çŸ¥é“ CDR æ˜¯ä»€ä¹ˆçš„äººï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„è§£é‡Š(æ— è€»åœ°æŠ„è¢­ç»´åŸºç™¾ç§‘)â€”

> **å‘¼å«è¯¦ç»†è®°å½•(CDR)** æ˜¯ç”±ç”µè¯äº¤æ¢æœºæˆ–å…¶ä»–ç”µä¿¡è®¾å¤‡ç”Ÿæˆçš„æ•°æ®è®°å½•ï¼Œè®°å½•äº†é€šè¿‡è¯¥è®¾æ–½æˆ–è®¾å¤‡çš„ç”µè¯å‘¼å«æˆ–å…¶ä»–ç”µä¿¡äº¤æ˜“(ä¾‹å¦‚ï¼Œæ–‡æœ¬æ¶ˆæ¯)çš„è¯¦ç»†ä¿¡æ¯ã€‚è¯¥è®°å½•åŒ…å«å‘¼å«çš„å„ç§å±æ€§ï¼Œå¦‚æ—¶é—´ã€æŒç»­æ—¶é—´ã€å®ŒæˆçŠ¶æ€ã€æºå·ç å’Œç›®çš„å·ç ã€‚

åœ¨æˆ‘æ‰€æœ‰çš„å…¶ä»–çº¦å®šä¸­ï¼Œè¿™å æœ‰ç‰¹æ®Šçš„ä½ç½®ã€‚è·å¾—æœ€åˆçš„ç«‹è¶³ç‚¹å¤ªå®¹æ˜“äº†(ç®€å•çš„ç½‘ç»œæœåŠ¡å¼€å‘è·å¾— RCE)ï¼Œä½†é—®é¢˜æ˜¯ç¨³å®šçš„å¤–å£³ã€‚

åœ¨è¿™ç¯‡åšæ–‡(ä¸æ˜¯æ•™ç¨‹)ä¸­ï¼Œæˆ‘æƒ³åˆ†äº«æˆ‘å¦‚ä½•åœ¨å‡ åˆ†é’Ÿå†…ä»**è¿œç¨‹ä»£ç æ‰§è¡Œ(RCE)** åˆ°ä»£ç†å†…éƒ¨ç½‘ç»œæ‰«æçš„ç»å†ã€‚

# ä¾¦å¯Ÿ

æ¯ä¸ªæœ‰é“å¾·çš„é»‘å®¢/æ¸—é€æµ‹è¯•å‘˜/bug èµé‡‘çŒäºº/çº¢é˜Ÿé˜Ÿå‘˜éƒ½çŸ¥é“ä¾¦å¯Ÿçš„é‡è¦æ€§ã€‚â€œç»™æˆ‘å…­ä¸ªå°æ—¶ç æ ‘ï¼Œæˆ‘ä¼šç”¨å‰å››ä¸ªå°æ—¶ç£¨æ–§å­â€è¿™å¥è¯ç”¨åœ¨è¿™é‡Œå†åˆé€‚ä¸è¿‡äº†ã€‚ä¾¦å¯Ÿåšå¾—è¶Šå¹¿æ³›ï¼Œå¼€å‘çš„æœºä¼šå°±è¶Šå¤§ã€‚

æ‰€ä»¥å¯¹äº RTEï¼Œrecon çš„æ˜æ˜¾é€‰æ‹©æ˜¯: *DNS æšä¸¾ï¼ŒASN & BGP æŸ¥æ‰¾ï¼Œæ¥è‡ªå¤šä¸ªæœç´¢å¼•æ“çš„ä¸€äº›è¢«åŠ¨ reconï¼Œæ£€æŸ¥æºä»£ç åº“ï¼Œå¦‚ GitHubã€BitBucketã€GitLab ç­‰ã€‚å¯¹äºä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œåšä¸€äº›å…³äºå‘˜å·¥çš„é±¼å‰å¼ç½‘ç»œé’“é±¼ï¼Œä»¥é˜²æ²¡æœ‰å‘ç° RCEã€‚*(ç›¸ä¿¡æˆ‘çš„è¯ï¼Œæ¬ºéª—å‘˜å·¥ä¸‹è½½&æ‰§è¡Œæ¶æ„æ–‡ä»¶å¾ˆå®¹æ˜“ï¼Œä½†å‰ææ˜¯ä½ èƒ½å…‹æœéšœç¢â€”â€”**AVs&åƒåœ¾é‚®ä»¶è¿‡æ»¤å™¨**

ä½ å¯ä»¥ä»å¾ˆå¤šæ¥æºä¸ºæŸä¸ªç‰¹å®šçš„ç»„ç»‡è¿›è¡Œä¾¦æŸ¥ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä» DNS æšä¸¾æœ¬èº«å¼€å§‹ã€‚

*aiodnsbrute-v-t 7000â€”no-verify-w DNS-list . uniq . lst * * * * * * . com . * * | grep -v è¶…æ—¶| grep -v æ ¼å¼é”™è¯¯| grep-v å¼‚å¸¸*

![](img/4ba214cafdfe7beafa3e251ae2068b9d.png)

> æœ‰è¶£çš„äº‹å®:æˆ‘ä½¿ç”¨çš„å•è¯è¡¨æœ‰ 277 ä¸‡ä¸ªå”¯ä¸€çš„ DNS è®°å½•ã€‚

å¤§å¤šæ•°èµé‡‘çŒäººä¼šä¸ºæ‰¾åˆ°çš„æ‰€æœ‰å­åŸŸå¯»æ‰¾ç«¯å£ 80 æˆ– 443ã€‚é—®é¢˜æ˜¯ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œæœ‰æ—¶æœ€å¥½æ‰§è¡Œå…¨ç«¯å£æ‰«æã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªå­åŸŸ **eã€ç¼–è¾‘ã€‘â€”â€”NMSã€‚ç»è¿‡å…¨é¢çš„ç«¯å£æ‰«æï¼Œæˆ‘å¾—åˆ°äº†ä¸€äº›æœ‰è¶£çš„ç»“æœã€‚**

![](img/633dd4978288d55930d500b72c4ac854.png)

ç«¯å£ 12000/tcp å’Œ 14000/tcp é™¤äº† 14100/tcp æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œåªèƒ½è¯´è¿™æ˜¯æˆ‘çš„å¹¸è¿æ—¥ï¼ï¼

![](img/d5cbaf131adfb463a83e73a395faceac.png)

**J-Fuggin-Bossï¼ï¼**

# è¿œç¨‹ä»£ç æ‰§è¡Œ

ä»è¿™é‡Œå¼€å§‹ï¼Œæ¯ä¸ªä»¥å‰åˆ©ç”¨è¿‡è‡­åæ˜­è‘—çš„ JBoss æ¼æ´çš„äººéƒ½çŸ¥é“äº‹æƒ…å°†å¦‚ä½•å‘å±•ã€‚å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œå¦‚æœä½ æ²¡æœ‰ JBoss æ¼æ´åˆ©ç”¨çš„ç»éªŒï¼Œä½ å¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„é“¾æ¥æ¥å¸®åŠ©ä½ è§£å†³è¿™ä¸ªé—®é¢˜:

[**JBoss-å¼¥åˆä¼ä¸šä¸æ‚¨ä¹‹é—´çš„å·®è·**](https://www.redteam-pentesting.de/publications/2010-04-21-JBoss-Bridging-the-Gap-Between-the-Enterprise-and-You_Ruhr-Universitaet-Bochum_RedTeam-Pentesting.pdf)

[**é»‘å®¢ _ å’Œ _ å®‰å…¨ _jboss**](https://doc.lagout.org/Others/hacking_and_securing_jboss.pdf)

å¯¹äº JBoss å‰¥å‰Šï¼Œå¯ä»¥ç”¨ [Jexboss](https://github.com/joaomatosf/jexboss) ã€‚è¯¥å·¥å…·åŒ…å«è®¸å¤šæ–¹æ³•å’Œå¼€å‘æŠ€æœ¯ï¼Œè¿˜æ¶µç›–äº†åº”ç”¨ç¨‹åºå’Œ Servlet ååºåˆ—åŒ–ä»¥åŠ Struct2ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ Metasploit æ¥åˆ©ç”¨ JBossï¼Œå°½ç®¡æˆ‘æ›´å–œæ¬¢ Jexbossã€‚

ç»§ç»­å‚ä¸ï¼Œä¸€æ—¦æˆ‘å‘ç° JBossï¼Œæˆ‘å¾ˆå¿«å°±æ¿€å‘äº† Jexboss çš„å¼€å‘ã€‚è¿™ä¸ªå·¥å…·å¾ˆå®¹æ˜“ä½¿ç”¨ã€‚

*ã€‚/jex boss . py-u*[*http://ã€ç¼–æ ¡ã€‘:14100/*](http://[REDACTED]:14100/)

![](img/7561db9ba870d87ea71d1ea8fe5a74a5.png)

ä»ä¸Šé¢çš„æˆªå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨å¾ˆå®¹æ˜“å—åˆ°æ”»å‡»ã€‚ä½¿ç”¨ **JMXInvokerServlet** æ–¹æ³•ï¼Œæˆ‘å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šè¿œç¨‹æ‰§è¡Œä»£ç ã€‚ç›¸å½“ç›´æ¥çš„å‰¥å‰Šï¼å¯¹å—ï¼Ÿ

![](img/0d9a6a3e13828e4ef408e2c18e4b002a.png)

> ä½ ä¸€å®šåœ¨æƒ³ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆé«˜çº§çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ

è€å¿ƒç‚¹ä¼™è®¡ä»¬ï¼

ç°åœ¨æˆ‘æœ‰äº†ç«‹è¶³ç‚¹ï¼Œå®é™…é—®é¢˜å‡ºç°äº†ã€‚å½“ç„¶ï¼Œåƒå¾€å¸¸ä¸€æ ·ï¼Œä¸€æ—¦æˆ‘æœ‰äº† RCEï¼Œæˆ‘è¯•å›¾å¾—åˆ°ä¸€ä¸ªåå‘å£³ã€‚

![](img/860dc627ce08cde7bb4fdd3b367017cb.png)

æˆ‘ç”šè‡³å¾—åˆ°äº†ä¸€ä¸ªåå‘è¿æ¥ï¼

![](img/ae8005e62e3f0dee5351b6fdfc6f94e2.png)

ç„¶è€Œï¼Œshell å¹¶ä¸ç¨³å®šï¼Œå‡ ç§’é’Ÿå python è¿›ç¨‹å°±è¢«ç»ˆæ­¢äº†ã€‚æˆ‘ç”šè‡³å°è¯•ä½¿ç”¨å…¶ä»–åå‘ shell ä¸€è¡Œç¨‹åºè´Ÿè½½ã€ä¸åŒçš„å…¬å…±ç«¯å£ï¼Œç”šè‡³ UDPï¼Œä½†ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚æˆ‘è¿˜å°è¯•äº†ä¸åŒå½¢å¼çš„ reverse _ TCP/http/https Metasploit æœ‰æ•ˆè´Ÿè½½æ¥è·å¾— meterpreter è¿æ¥ï¼Œä½†å‡ ç§’é’Ÿå meterpreter å¤–å£³å°±æ–­å¼€äº†ã€‚

æˆ‘ä»¥å‰ç»å†è¿‡ç±»ä¼¼çš„æƒ…å†µï¼Œæˆ‘æ€»æ˜¯é—®å¦‚æœæˆ‘ä¸èƒ½å¾—åˆ°ä¸€ä¸ªåå‘ shellï¼Œæˆ‘å°†å¦‚ä½•ç»§ç»­ï¼Ÿ

é€šè¿‡ HTTP éš§é“è¿›å…¥**ç»‘å®šå¤–å£³è¿æ¥ï¼**

[**æœªå®Œå¾…ç»­ç¬¬äºŒéƒ¨åˆ†â€¦â€¦**](https://medium.com/@TheCyb3rAlpha/how-i-hacked-into-a-telecom-network-part-2-playing-with-tunnels-tcp-tunneling-b4cef2837938)

# æ¨å¹¿æ—¶é—´ï¼

å¦‚æœä½ ä»¬æƒ³äº†è§£æ›´å¤šå…³äºæˆ‘ä½¿ç”¨çš„æŠ€æœ¯åŠå…¶èƒŒåçš„åŸºæœ¬æ¦‚å¿µï¼Œå¯ä»¥é˜…è¯»æˆ‘çš„ä¹¦(ä¸***@ himan Shu _ hax****)*

> ***äº²åŠ›äº²ä¸ºçš„çº¢é˜Ÿæˆ˜æœ¯***â€”â€”[äºšé©¬é€Š](https://www.amazon.in/Hands-Penetration-Testing-Metasploit-vulnerabilities-ebook/dp/B07MT8DDBR)ã€ [PacktPub](https://www.packtpub.com/in/networking-and-servers/hands-red-team-tactics)

![](img/49183e9f12fed4d46b3e035adceddb8e.png)

> ***ä½¿ç”¨ Metasploit*** â€” [äºšé©¬é€Š](https://www.amazon.in/Hands-Penetration-Testing-Metasploit-vulnerabilities-ebook/dp/B07MT8DDBR)ã€ [PacktPub](https://www.packtpub.com/in/networking-and-servers/hands-web-penetration-testing-metasploit) è¿›è¡Œå®é™…æ“ä½œçš„ Web åº”ç”¨æ¸—é€æµ‹è¯•

![](img/0bad1ace10ecc835b82b0fbb2be73fae.png)