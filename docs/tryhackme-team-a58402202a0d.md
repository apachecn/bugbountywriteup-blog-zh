# TryHackMe:å›¢é˜Ÿ

> åŸæ–‡ï¼š<https://infosecwriteups.com/tryhackme-team-a58402202a0d?source=collection_archive---------3----------------------->

èµ°æŸ¥

å¤§å®¶å¥½ã€‚ï¼è¿™ä¸€æ¬¡æˆ‘ä»¬å°† root Teamï¼ŒTryHackMe ä¸Šçš„ easy roomã€‚

![](img/63b7c1e2a6fa8f41eb1125c2c610ba8b.png)

# é¦–å­—æ¯:

```
export IP=10.10.103.174
```

## ä¾¦å¯Ÿ

```
nmap $IP 
```

æœ‰ 3 ä¸ªç«¯å£ï¼Œ21ã€22 å’Œ 80ã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢ç©¶ä¸€ä¸‹:

```
nmap -sC -sV -p21,22,80 -oN nmap $IP
```

![](img/095ea0d7a83794704e65ac528ce25607.png)

nmap

> ç«¯å£ **80** åªæ˜¯ Apache web æœåŠ¡å™¨é¡µé¢ã€‚ä½†æ˜¯åœ¨æºä»£ç ä¸­ï¼Œæˆ‘ä»¬å‘ç°:

![](img/6dce53a36360981ae395352f9bf21d65.png)

> è®©æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°ä¸»æœºä¸­

```
sudo vim /etc/hosts
```

![](img/23738d8f0f9450b7617520d7dcf64ed9.png)

ä¸»æœº _ æ–‡ä»¶

è®¿é—®ç½‘ç«™ï¼Œå³ team.thm

![](img/e699b0fbbe3b0c6c8ad96f6f7653f4aa.png)

team.thm

é¦–å…ˆï¼Œæˆ‘è®¿é—®äº†`robots.txt`ï¼Œå‘ç°åªæœ‰ä¸€ä¸ªè¯ï¼Œå³ dale:

![](img/7ca08e50df67af64b29d116f564d71ec.png)

robots.txt

> åšç›®å½•æšä¸¾ï¼Œæˆ‘ç”¨ gobuster:

```
gobuster dir -u [http://team.thm](http://team.thm) -w medium.txt
```

![](img/2ebf074df11e854f170b47e9c1be0994.png)

gobuster_result _1

**/scripts** å¼•èµ·äº†æˆ‘çš„æ³¨æ„ã€‚å®ƒåœ¨é¡µé¢ä¸Šç»™å‡ºæ‹’ç»çš„æƒé™ã€‚ä¹‹åï¼Œæˆ‘åšäº†å¦ä¸€ä¸ªç›®å½•æšä¸¾ï¼Œå†æ¬¡ä½¿ç”¨ **disbuster** ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº† **script.txt**

![](img/a2c06b7e030cf6bcd6159c72671656ba.png)

gobuster_result _2

# æ–‡ä»¶ä¼ é€åè®®

è®©æˆ‘ä»¬ä¸€èµ·å»å‚è§‚`[http://team.thm/scripts/script.txt](http://team.thm/scripts/script.txt)`

![](img/2038b87b90d8a1173d5ade0e31d7bded.png)

è„šæœ¬. txt

ä¼¼ä¹ä»–ä»¬æ›´æ”¹äº†æ–‡ä»¶åï¼Œå› ä¸ºæ—§æ–‡ä»¶åŒ…å«å‡­æ®ï¼Œä½†é‚£æ˜¯åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚

ç»è¿‡ä¸€ç•ªçŒœæµ‹ï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°äº†æ—§çš„è„šæœ¬æ–‡ä»¶ï¼Œå®ƒç»™äº†æˆ‘ä»¬ ftp ç”¨æˆ·åå’Œå¯†ç :

![](img/42ef64d70e0250651823846050e96bdb.png)

è„šæœ¬.æ—§

ä»¥ä¸Šå‡­æ®è¿æ¥åˆ° FTP æœåŠ¡å™¨:

![](img/f52efebf4796562e3c7c2434f0241fb2.png)

ftp è¿æ¥

# User.txt

## LFI

æˆ‘ä»¬å¾—åˆ°äº† FTP æœåŠ¡å™¨ä¸Šçš„å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒæŒ‡å‘æŸä¸ª **dev** ç«™ç‚¹ã€‚

æˆ‘å¾ˆå¿«å°† dev æ·»åŠ åˆ°ä¸»æœºçš„æ–‡ä»¶ä¸­

![](img/ac30acff8247ca0527de300454da4628.png)

ä¸»æœº

å¹¶è®¿é—®äº†`dev.team.thm`å’Œå¦ä¸€ä¸ªé¡µé¢é“¾æ¥:

![](img/223452fc10145a79c8616c260611aaff.png)

å¼€å‘å›¢é˜Ÿ. thm

æ­¤é“¾æ¥é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œè¯¥é¡µé¢é™¤äº† url ä¹‹å¤–æ²¡æœ‰ä»»ä½•ç‰¹æ®Šå†…å®¹:

![](img/6d6c7e75ea8924b59d053c6b5f73e5fe.png)

LFI ç½‘å€

*   å°è¯•äº†ä¸€äº› LFI æŠ€å·§â†’å¤±è´¥
*   å†æ¬¡å°è¯•ç›¸åŒçš„æŠ€æœ¯ï¼Œä½†è¿™ä¸€æ¬¡ä¸æ‰“å—å¥—ä»¶è¿è¡Œâ†’æˆåŠŸ

![](img/6765f619e42564c7669bff963d7c6cc6.png)

lfi

æˆ‘å¾—åˆ°äº†`/etc/passwd`æ–‡ä»¶ã€‚ç„¶åæˆ‘æƒ³ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Œçªç„¶æƒ³èµ· SecLists æœ‰ä¸€äº› **lfi å•è¯è¡¨:**

*   å‘å…¥ä¾µè€…å‘é€è¯·æ±‚ï¼Œç„¶åå¼€ç«

![](img/320e138140574f8cfff81f3684a35c16.png)

å‘é€ç»™å…¥ä¾µè€…

*   åæ¥ï¼Œå½“å…¥ä¾µè€…å®Œæˆä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬å‘ç°äº† sshd é…ç½®æ–‡ä»¶

![](img/c1be4de4356e5d75f69787a3fcc8d364.png)

ssh id_rsa å¯†é’¥

ä¿å­˜æ–‡ä»¶ï¼Œè®©æˆ‘ä»¬è¿æ¥åˆ° **dale** (è®°å¾—æˆ‘ä»¬åœ¨ robots.txt ä¸­æ‰¾åˆ°çš„)

## å˜˜

```
ssh -i id_rsa dale@team.thm
```

â†’ä¸€å®šè¦ç»™ id_rsa æ–‡ä»¶é€‚å½“çš„æƒé™ï¼Œå¦åˆ™æ— æ³•å·¥ä½œã€‚

![](img/602dffd6013998b3101f2091edb777b7.png)

ssh è¿æ¥

å¾—åˆ° shell/ssh ä¹‹åï¼Œæˆ‘åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ£€æŸ¥`.bash_history`æ–‡ä»¶ã€‚æ£€æŸ¥ç›¸åŒï¼Œæˆ‘ä»¬å¾—åˆ°:

![](img/e8abdb224fde9b3f7369cae33cc5d96f.png)

ã€‚bash _ å†å²

ä¼¼ä¹ç”¨æˆ·`dale`å¯ä»¥ç”¨ **sudo** è¿è¡Œä¸€äº›æ–‡ä»¶ï¼Œæ£€æŸ¥æ–‡ä»¶å†…å®¹â†’

![](img/e1d05f720e642cd9f5b087c3d64594b6.png)

å¡ç‰¹å½¼å‹’ç®¡ç†æ£€æŸ¥

å¦‚æ‚¨æ‰€è§ï¼Œæœ‰ä¸¤ä¸ªç”¨æˆ·è¾“å…¥ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„å‘½ä»¤æ³¨å…¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªã€‚

## åˆ©ç”¨è„šæœ¬(ç¬¬ 1 éƒ¨åˆ†)

å› ä¸ºçº¢è‰²æ˜¯å°†è¾“å…¥å‘½ä»¤é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åªä½¿ç”¨ç´«è‰²ã€‚

è¿è¡Œæˆ‘ä»¬ä»`.bash_history`æ–‡ä»¶ä¸­æ‰¾åˆ°çš„å‘½ä»¤:

![](img/51e7cbed9b4e6ecf44b7b6d9ef0ff5b4.png)

åˆ©ç”¨è„šæœ¬

# æ ¹

## åˆ©ç”¨è„šæœ¬(ç¬¬ 2 éƒ¨åˆ†)

ç°åœ¨æˆ‘ä»¬æ”¹å˜äº†ç”¨æˆ·ã€‚è¯¥ç”¨æˆ·å±äºä¸åŒçš„ç»„ï¼ŒåŒ…æ‹¬**ç®¡ç†å‘˜**

æ£€æŸ¥è¯¥ç”¨æˆ·çš„å‘½ä»¤å†å²åï¼Œæˆ‘ä»¬å‘ç°è¯¥ç”¨æˆ·æœ‰ä¸€ä¸ªè„šæœ¬:

![](img/a3381d11c9635176b6fe07639848a888.png)

æ–‡ä»¶æƒé™

ç”±äº`gyles`æ˜¯**ç®¡ç†**ç»„çš„æˆå‘˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œè¯¥è„šæœ¬ã€‚

è®©æˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­æ·»åŠ åå‘ shell è´Ÿè½½ï¼Œå¹¶è§¦å‘ shell :D

![](img/d94280ac69978a397b5ba51a7a1fc60b.png)

æœ‰æ•ˆè½½è·

è®¾ç½®ç›‘å¬ç¨‹åº:

![](img/765e647630ad03eb8c8941329754d746.png)

å¬ä¼—

è¿™æ˜¯æˆ‘çš„è‡ªå®šä¹‰è„šæœ¬ï¼Œä¸è¦ç´§ã€‚ä½ å¯ä»¥è·‘

```
nc -lnvp 1234
```

## åå‘å¤–å£³

è®¾ç½®å¥½ç›‘å¬å™¨åï¼Œè¿è¡Œè¯¥æ–‡ä»¶ï¼Œç„¶åå˜£ï¼ï¼

![](img/0d691b948a50ff7f3acf16ea02fa9500.png)

æ ¹

æˆ‘ä»¬æ˜¯**æ ¹**ã€‚ç°åœ¨æ˜¯ root.txt çš„æ—¶å€™äº†

![](img/15b787f4ac93875c11eefe659ffec089.png)

root.txt

è¿™ä¸ªæˆ¿é—´å°±è¿™äº›äº†ã€‚è®©æˆ‘ä»¬åœ¨å¦ä¸€ä¸ªåšå®¢ä¸Šè§é¢å§ã€‚

## å†è§äº†ã€‚ï¼

# å‚è€ƒèµ„æ–™:

> || [ç½‘ç«™](https://namx05.github.io) | [æ¨ç‰¹](http://twitter.com/namx05)|[thm room](http://tryhackme.com/room/teamcw)| LFI _[æœ‰æ•ˆè½½è·](https://raw.githubusercontent.com/danielmiessler/SecLists/master/Fuzzing/LFI/LFI-gracefulsecurity-linux.txt) ||

# ğŸ”ˆ ğŸ”ˆInfosec Writeups æ­£åœ¨ç»„ç»‡å…¶é¦–æ¬¡è™šæ‹Ÿä¼šè®®å’Œç½‘ç»œæ´»åŠ¨ã€‚å¦‚æœä½ å¯¹ä¿¡æ¯å®‰å…¨æ„Ÿå…´è¶£ï¼Œè¿™æ˜¯æœ€é…·çš„åœ°æ–¹ï¼Œæœ‰ 16 ä¸ªä»¤äººéš¾ä»¥ç½®ä¿¡çš„æ¼”è®²è€…å’Œ 10 å¤šä¸ªå°æ—¶å……æ»¡åŠ›é‡çš„è®¨è®ºä¼šè®®ã€‚[æŸ¥çœ‹æ›´å¤šè¯¦æƒ…å¹¶åœ¨æ­¤æ³¨å†Œã€‚](https://iwcon.live/)

[**https://iwcon.live/**](https://iwcon.live/)