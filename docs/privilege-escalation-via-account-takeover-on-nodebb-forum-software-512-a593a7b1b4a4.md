# é€šè¿‡ NodeBB è®ºå›è½¯ä»¶ä¸Šçš„å¸æˆ·æ¥ç®¡æå‡æƒé™â€” Bug Bounty (512 ç¾å…ƒ)â€”CVE-2020â€“15149

> åŸæ–‡ï¼š<https://infosecwriteups.com/privilege-escalation-via-account-takeover-on-nodebb-forum-software-512-a593a7b1b4a4?source=collection_archive---------1----------------------->

å¤§å®¶å¥½ã€‚

æˆ‘å¸Œæœ›ä½ ä»¬éƒ½è¿‡å¾—å¥½ã€‚âœŒï¸

å¤§çº¦ä¸€ä¸ªæœˆå‰ï¼Œæˆ‘å‘Šè¯‰ä½ ï¼Œæˆ‘åœ¨ä¸€ä¸ª web åº”ç”¨ç¨‹åºä¸­å‘ç°äº†ä¸€ä¸ªå¸æˆ·æ¥ç®¡æ¼æ´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚éšç€å¸¦æœ‰æ¼æ´çš„ web åº”ç”¨ç¨‹åºçš„æ–°è¡¥ä¸çš„åˆ°æ¥ï¼Œæˆ‘ç°åœ¨å¯ä»¥ä¸æ‚¨åˆ†äº«æˆ‘æ˜¯å¦‚ä½•å‘ç°è¯¥æ¼æ´çš„ã€‚

è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª bug èµé‡‘å†™ï¼Œæ‰€ä»¥æˆ‘å†™ P1 åˆæ ¼çš„æ¼æ´ã€‚,

è®©æˆ‘ä»¬æ¥è°ˆè°ˆå§ã€‚

![](img/2fdaca6876f3fbf706d2f4438e85abc6.png)

å½“æˆ‘å¯¹ NodeBB è®ºå›è½¯ä»¶è¿›è¡Œæµ‹è¯•æ—¶ï¼Œæˆ‘å‘ç°æ¯ä¸ªç”¨æˆ·å¸æˆ·çš„å¯†ç éƒ½å¯ä»¥æ›´æ”¹ã€‚

ç°åœ¨ï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨åˆ©ç”¨æ­¤æ¼æ´çš„æ­¥éª¤ã€‚

1.  é¦–å…ˆï¼Œç¡®å®š**ã€adminã€‘**ç”¨æˆ·çš„ uid:

[T3ã€https://try.nodebb.org/uid/*ã€‘T5](https://try.nodebb.org/uid/*)

æˆ‘åœ¨æ ‡æœ‰æ˜Ÿå·(*)çš„åœ°æ–¹è¯•äº†è¯•æ•°å­—ï¼Œå‘ç° admin å¸æˆ·çš„ **uid** å€¼æ˜¯ **1** ã€‚

[**https://try.nodebb.org/uid/1**](https://try.nodebb.org/uid/1)**->**[**https://try.nodebb.org/user/admin**](https://try.nodebb.org/user/admin)

![](img/69bab67c18cbe121f770d90e96058992.png)

2-æˆ‘ä¸ºè‡ªå·±åˆ›å»ºäº†ä¸€ä¸ªåä¸º**â€œæµ‹è¯•ç”¨æˆ· 1â€**çš„ç”¨æˆ·ã€‚

![](img/eda3c17db7f403ded019eaead0784dc8.png)

3-æˆ‘ä»æˆ‘çš„ç”¨æˆ·èµ„æ–™è½¬åˆ°å¯†ç æ›´æ”¹é¡µé¢ï¼Œåœ¨ç¬¬ä¸€ä¸ªæ¡†ä¸­è¾“å…¥äº†æˆ‘ä»¬å½“å‰çš„å¯†ç ã€‚ç„¶åï¼Œæˆ‘åœ¨ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªæ¡†ä¸­å†™ä¸‹äº†æˆ‘ä»¬æƒ³è¦æ›´æ”¹çš„å¯†ç ã€‚

![](img/eeda06a46897626614464edb5ed9d7a7.png)

4-ç„¶åï¼Œåœ¨æŒ‰æäº¤æŒ‰é’®ä¹‹å‰ï¼Œæˆ‘æ‰“å¼€äº† Burp Suiteï¼Œå®ƒæœ‰ä¸€ä¸ªä»£ç†é€‰é¡¹ï¼Œæˆ‘å°†è¯·æ±‚ä¸Šçš„ uid å€¼æ›¿æ¢ä¸º 1ï¼Œè¿™æ˜¯ admin ç”¨æˆ·çš„ uid å€¼ï¼Œç„¶åæˆ‘å‘é€äº†è¯·æ±‚ã€‚

![](img/a8dfa4dbe3df90e72de112d1e11bf41c.png)

5-æˆ‘åœ¨ç”¨æˆ·åæ¡†ä¸­å†™äº†â€œadmin â€,åœ¨å¯†ç æ¡†ä¸­å†™äº†æˆ‘åœ¨æ­¥éª¤ 5 ä¸­å†™çš„å¯†ç ã€‚

![](img/e0f21e25544908e6f2cfc2287c9b1c6b.png)

6-å› æ­¤ï¼Œæˆ‘è·å¾—äº†â€œadminâ€ç”¨æˆ·çš„å¸æˆ·ã€‚

![](img/880c3a337bbb92b14d0c460b91e6ecb1.png)

å› æ­¤ï¼Œç”±äºæˆ‘åœ¨ NodeBB å…¬å¸å‘ç°çš„è¿™ä¸ªæ¼æ´ï¼Œæˆ‘èµ¢å¾—äº† 512 ç¾å…ƒçš„å¥–é‡‘ã€‚ğŸ†ğŸ†ğŸ†

å¯ä»¥ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥æŸ¥çœ‹ NodeBB è®ºå›è½¯ä»¶çš„åäººå ‚åå•ã€‚

[**https://blog.nodebb.org/bounty/**](https://blog.nodebb.org/bounty/)

ä¸‹é¢æ˜¯ github é¡µé¢çš„é“¾æ¥ï¼Œå…¶ä¸­åŒ…å«æ¼æ´å·²è¢«å…³é—­çš„ä¿¡æ¯ã€‚

[**https://github . com/nodeb/nodeb/security/advisories/GHSA-hr66-c8pg-5mg 7**](https://github.com/NodeBB/NodeBB/security/advisories/GHSA-hr66-c8pg-5mg7)

æˆ‘å¸Œæœ›ä½ ä»¬èƒ½ä»ä¸­å­¦åˆ°ä¸€äº›ä¸œè¥¿ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œè¯·å‡»æŒã€‚âœ‹

æ„Ÿè°¢æ‚¨é˜…è¯»æˆ‘çš„æ–‡ç« ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„é“¾æ¥è”ç³»åˆ°æˆ‘ã€‚

å¥åº·çš„æ—¥å­ï¼ğŸ˜·

[https://twitter.com/erenuyguun](https://twitter.com/erenuyguun)

https://www.linkedin.com/in/3ren-uygun/