# å…¥ä¾µå†…éƒ¨(Tryhackme)

> åŸæ–‡ï¼š<https://infosecwriteups.com/hacking-the-internal-tryhackme-42939bd3f5d6?source=collection_archive---------2----------------------->

å˜¿ï¼Œä¼™è®¡ä»¬ï¼Œè¿™ä¸ªå¸–å­æ˜¯å…³äºæˆ‘æœ€è¿‘åœ¨ Tryhackme ä¸­æåˆ°çš„æœºå™¨çš„ï¼Œå®ƒç¡®å®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾µå…¥æœºå™¨ï¼Œå› ä¸ºå®ƒæ¶µç›–äº†çœŸå®ä¸–ç•Œçš„ pentest ç¤ºä¾‹ï¼Œè€Œä¸”ä½ ä¹Ÿä¼šäº†è§£åˆ°çœŸå®çš„ pentest ç¯å¢ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚åŠ¡å¿…è®°ä¸‹è¿™å°æœºå™¨é‡Œçš„ä¸€åˆ‡ã€‚

![](img/eb25e9d93cacdede143865d9a8ae8d5d.png)

å†…éƒ¨çš„

éš¾åº¦:éš¾

å†…å®¹:

1.  æ‰«æå’Œä¿¡æ¯æ”¶é›†(Nmapã€Niktoã€Dirbã€Wordpress)
2.  è¯†åˆ«ç¼ºé™·ã€‚
3.  å¼ºåˆ¶ç™»å½•é¡µé¢(wpscan)ã€‚
4.  è·å¾—åå‘å¤–å£³ã€‚
5.  æšä¸¾è®¡ç®—æœºã€‚
6.  è·å– user.txt
7.  éš§é“æŠ€æœ¯
8.  æƒé™æå‡

å› ä¸ºè¿™å°±åƒä¸€ä¸ªçœŸå®çš„æµ‹è¯•ç¯å¢ƒï¼Œæˆ‘ä»¬å¿…é¡»éµå¾ªä¸€å®šçš„è§„åˆ™ã€‚è¿™é‡Œæœ‰ä¸€ä»½ç®€æŠ¥å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚

![](img/7f460e6a8117cafb37a4599874f03c42.png)

äº¤æˆ˜è§„åˆ™

æˆ‘ä»¬å°†å¯¹æ­¤æœºå™¨è¿›è¡Œè¯¦ç»†æ‰«æï¼Œå³é’ˆå¯¹å¼€æ”¾ç«¯å£å’ŒæœåŠ¡çš„å¯†é›† Nmap æ‰«æã€‚

è¿˜æœ‰ä¸€ä»¶äº‹ï¼Œç¡®ä¿ç¼–è¾‘/etc/hosts æ–‡ä»¶ï¼ŒIP åº”è¯¥åæ˜ åˆ° ***internal.thm***

![](img/8176f7f181fdff39ffc40f2304fc721b.png)

Nmap æ‰«æç»“æœ

å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬åœ¨ç«¯å£ 80 ä¸Šè¿è¡Œ web æœåŠ¡å™¨ï¼Œä¸ºäº†è¿›ä¸€æ­¥åˆ—ä¸¾ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ dirb å’Œ niktoã€‚

ç›®å½•æ‰«æç»“æœ:

![](img/87f3461da9e5abe59bddc956bcb82d6f.png)

ç›®å½•æ‰«æç»“æœ

Nikto æ‰«æç»“æœ:

![](img/2e2031994b0e0b7e72a4cdd96e4e8e15.png)

Nikto æ‰«æç»“æœ

ä» dirb å’Œ nikto çš„æ‰«æä¸­æ²¡å¾—åˆ°ä»€ä¹ˆã€‚æœ‰ä¸€ä¸ª wordpress ç½‘ç«™æ­£åœ¨è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ wpscan æ¥åˆ—ä¸¾ç”¨æˆ·å’Œæ˜“å—æ”»å‡»çš„æ’ä»¶ã€‚

![](img/d0cc16ad1232ad9211d2548e91793646.png)![](img/bf496a24eddebdc9669a2d3e12dc805f.png)

æˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªç”¨æˆ·ç®¡ç†å‘˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ rockyou.txt ä½œä¸ºé»˜è®¤å•è¯åˆ—è¡¨å¯¹ç™»å½•é¡µé¢è¿›è¡Œæš´åŠ›æ”»å‡»ã€‚

![](img/ddfdda1253c1874b64a5a03fa57884cd.png)

æˆåŠŸæ‰§è¡Œæš´åŠ›ç ´è§£

æˆ‘ä»¬å”¯ä¸€å‰©ä¸‹çš„å°±æ˜¯ç™»å½•åˆ°ç½‘é¡µï¼Œé€šè¿‡ä¸»é¢˜ç¼–è¾‘å™¨å¾—åˆ°åå‘å¤–å£³ã€‚è®©æˆ‘ä»¬é¦–å…ˆä½¿ç”¨å‡­æ®ç™»å½•ã€‚

![](img/4454c30a25f3393677c800b90d494b09.png)

ç°åœ¨æˆ‘ä»¬åœ¨ï¼Œè®©æˆ‘ä»¬ç¼–è¾‘ä¸»é¢˜æ–‡ä»¶æ¥è·å¾—åå‘å¤–å£³ã€‚è·Ÿæˆ‘æ¥ğŸš€

è¿›å…¥å¤–è§‚->ä¸»é¢˜ç¼–è¾‘å™¨-> 404.php

ç”± [pentest monkey](https://github.com/pentestmonkey/php-reverse-shell) ç”¨æ¶æ„ php ä»£ç æ›¿æ¢ 404.php çš„å†…å®¹ã€‚

![](img/b2524e1177c6e088aff79c465b1a7763.png)

ç¼–è¾‘ 404.php

æ›´æ–°æ–‡ä»¶å¹¶è®¿é—®ä»¥ä¸‹ URL:

> http://internal . thm/blog/WP-content/themes/twenty seven/404 . PHP

![](img/aa9838312e5e660f96da5ef43d9d8077.png)

è·å–åå‘å¤–å£³

ä¸ºäº†ç”Ÿæˆä¸€ä¸ªç¨³å®šçš„ shellï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥ä½¿ç”¨ pythonã€‚

![](img/1642c1a6aa13f2e51e9198f767d462f3.png)

ä½¿ç”¨ python è·å¾—ç¨³å®šçš„å¤–å£³

æ‰€ä»¥è¦è·å¾— user.txtï¼Œæˆ‘ä»¬å¿…é¡»å°†æˆ‘ä»¬çš„ç‰¹æƒå‡çº§åˆ° ***aubreanna*** ã€‚å°è¯•è¿è¡Œ linpeas è„šæœ¬æˆ–æ‰‹åŠ¨æšä¸¾ä¼šå¾ˆå¥½ã€‚æˆ‘åœ¨/opt ç›®å½•ä¸­æ‰¾åˆ°äº†è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒåŒ…å«äº†ç”¨æˆ· ***aubreanna*** çš„å‡­è¯ã€‚

![](img/8eb82a584e2f5f37dae413fec2fff196.png)

aubreanna çš„è¯ä¹¦

![](img/e0024c0d7d76b3fea745c6a213cd5be2.png)

è·å– user.txt

å’Œ user.txt ä¸€èµ·ï¼Œæˆ‘ä¹Ÿå¾—åˆ°äº†è¿™ä¸ªæ–‡ä»¶ã€‚è®©æˆ‘ç»™ä½ çœ‹çœ‹å®ƒçš„å†…å®¹ã€‚

![](img/dc7aa60eac3b512a26be10fb51e374c5.png)

ç«¯å£ 8080 ä¸Šè¿è¡Œç€ä¸€ä¸ªå†…éƒ¨ web æœåŠ¡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ socat åœ¨ä»»ä½•ç«¯å£å·ç›‘å¬å®ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¿é—®å®ƒã€‚

socat å®ç”¨ç¨‹åºæ˜¯ä¸¤ä¸ªç‹¬ç«‹æ•°æ®é€šé“ä¹‹é—´åŒå‘æ•°æ®ä¼ è¾“çš„ä¸­ç»§ã€‚

![](img/27cbacd9f6b6bef0d889169381ffb850.png)

ä»[è¿™é‡Œ](https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/socat)è·å– socat çš„äºŒè¿›åˆ¶ç‰ˆæœ¬ã€‚

![](img/4d401e7f220c96bfc34eaeb1afd847f1.png)

çœ‹åˆ°å®ƒçš„å·¥ä½œã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¯ä»¥æµè§ˆç½‘ç»œæœåŠ¡å™¨ï¼Œçœ‹çœ‹æˆ‘ä»¬æ˜¯å¦èƒ½å¾—åˆ°ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿ã€‚

![](img/9dd6044c47aed8b4e908943f5ec22798.png)

ç™»å½•é¡µé¢

å•Šï¼Œåˆæ¥äº†ğŸ˜§ã€‚æˆ‘å°è¯•äº†é»˜è®¤ç”¨æˆ·å/å¯†ç ï¼Œä½†ä¸èµ·ä½œç”¨ã€‚æš´åŠ›æ˜¯æˆ‘ä»¬å”¯ä¸€çš„é€‰æ‹©ã€‚æˆ‘å°†åœ¨è¿™é‡Œä½¿ç”¨ä¹å¤´è›‡ã€‚

![](img/b15a530910ba02ae20ad9fa146dce911.png)

è›®åŠ›æˆåŠŸ

æ‰€ä»¥ç™»å½•ä¹‹åï¼Œæˆ‘ä»¬å¾—æƒ³åŠæ³•å»æ‹¿ä¸œè¥¿ã€‚æ‰€ä»¥æˆ‘è°·æ­Œäº†ä¸€ä¸‹æˆ‘ä»¬èƒ½å¯¹è©¹é‡‘æ–¯åšäº›ä»€ä¹ˆã€‚æ‰€ä»¥æˆ‘æ‰¾åˆ°äº†è¿™ä¸ªè„šæœ¬æ§åˆ¶å°ï¼Œå®ƒå…è®¸äººä»¬ç¼–å†™å’Œæ‰§è¡Œ Groovy è„šæœ¬ã€‚

[](https://blog.pentesteracademy.com/abusing-jenkins-groovy-script-console-to-get-shell-98b951fa64a6) [## æ»¥ç”¨ Jenkins Groovy è„šæœ¬æ§åˆ¶å°è·å– Shell

### Jenkins æ˜¯é¢†å…ˆçš„å¼€æºè‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œç”¨äºéƒ¨ç½²å’Œè‡ªåŠ¨åŒ–ä»»ä½•é¡¹ç›®ã€‚

blog.pentesteracademy.com](https://blog.pentesteracademy.com/abusing-jenkins-groovy-script-console-to-get-shell-98b951fa64a6) ![](img/d74f9dbec961092bfe7a2e43a22e1667.png)

è¿è¡Œè„šæœ¬ï¼Œå¹¶åœ¨ç›¸åº”çš„ç«¯å£ä¸Šç­‰å¾…ä¼ å…¥çš„è¿æ¥ã€‚

![](img/5c38607b239f8df46c58f241e469ae0c.png)

åå‘å¤–å£³

æšä¸¾äº†ä¸€ä¼šå„¿ï¼Œæ‰«æäº†ä¸€ä¸‹ç³»ç»Ÿï¼Œå¾—åˆ°äº†è¿™ä¸ª note.txtï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº† root ç”¨æˆ·çš„å¯†ç ã€‚è½»æ¾å³è½¬ğŸ˜™

![](img/802163d8f636f53567791dc15a742418.png)![](img/0e584ed7b56288cf83468bef8e4e2138.png)

æˆ‘å¸Œæœ›ä½ ä»¬èƒ½ç†è§£ï¼Œéšæ—¶ç»™æˆ‘å‘ä¸å’Œè°çš„çŸ­ä¿¡

è°¢è°¢ä½ ğŸ˜ƒå¿«ä¹é»‘å®¢ğŸ’»